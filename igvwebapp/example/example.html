<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>IGV</title>

</head>

<body>

<h1>GFF3 custom data source example</h1>

<div id="igvDiv" style="padding-top: 50px;padding-bottom: 20px; height: auto"></div>

<script type="module">

    import igv from "https://cdn.jsdelivr.net/npm/igv@2.7.5/dist/igv.esm.min.js";  //"../../js/index.js";

    import {MockReader} from "./js/mockReader.js";

    const url = "gff3files_sample/consolidated.gff3";

    (async function()  {

        MockReader.init(url);

        const options =
            {
                reference: {
                    "id": "ASM985889v3",
                    "name": "Sars-CoV-2 (ASM985889v3)",
                    "fastaURL": "https://s3.amazonaws.com/igv.org.genomes/covid_ASM985889v3/GCF_009858895.2_ASM985889v3_genomic.fna",
                    "indexURL": "https://s3.amazonaws.com/igv.org.genomes/covid_ASM985889v3/GCF_009858895.2_ASM985889v3_genomic.fna.fai",
                    "order": 1000000,
                    "tracks": [
                        {
                            "name": "Annotations",
                            "url": "https://s3.amazonaws.com/igv.org.genomes/covid_ASM985889v3/GCF_009858895.2_ASM985889v3_genomic.gff.gz",
                            "displayMode": "EXPANDED",
                            "nameField": "gene",
                            "height": 150
                        }
                    ]
                },

                tracks: [
                    {
                        type: 'annotation',
                        name: '20CVa_018_CV19_S25',
                        reader: new MockReader('20CVa_018_CV19_S25'),
                        height: 30
                    },
                    {
                        type: 'annotation',
                        name: '20CVa_019_CV19_S26',
                        reader: new MockReader('20CVa_019_CV19_S26'),
                        height: 30
                    },
                    {
                        type: 'annotation',
                        name: '20CVa_022_CV19_S29',
                        reader: new MockReader('20CVa_022_CV19_S29'),
                        height: 30
                    }, {
                        type: 'annotation',
                        reader: new MockReader('20CVa_024_CV19_S31'),
                        name: '20CVa_024_CV19_S31',
                        height: 30
                    }, {
                        type: 'annotation',
                        reader: new MockReader('20CVa_025_CV19_S32'),
                        name: '20CVa_025_CV19_S32',
                        height: 30
                    }, {
                        type: 'annotation',
                        reader: new MockReader('20CVa_026_CV19_S33'),
                        name: '20CVa_026_CV19_S33',
                        height: 30
                    },
                    {
                        type: 'annotation',
                        reader: new MockReader('20CVa_027_CV19_S34'),
                        name: '20CVa_027_CV19_S34',
                        height: 30
                    },
                    {
                        type: 'annotation',
                        reader: new MockReader('20CVa_030_CV19_S37'),
                        name: '20CVa_030_CV19_S37',
                        height: 30
                    },
                    {
                        type: 'annotation',
                        reader: new MockReader('20CVa_031_CV19_S38'),
                        name: '20CVa_031_CV19_S38',
                        height: 30
                    },
                    {
                        type: 'annotation',
                        reader: new MockReader('20CVa_034_CV19_S41'),
                        name: '20CVa_034_CV19_S41',
                        height: 30
                    },
                    {
                        type: 'annotation',
                        reader: new MockReader('20CVa_035_CV19_S42'),
                        name: '20CVa_035_CV19_S42',
                        height: 30
                    },
                ]
                // tracks: [
                //     {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_018_CV19_S25.gff3',
                //         name: '20CVa_018_CV19_S25',
                //         height: 30
                //     },
                //     {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_019_CV19_S26.gff3',
                //         name: '20CVa_019_CV19_S26',
                //         height: 30
                //     },
                //     {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_022_CV19_S29.gff3',
                //         name: '20CVa_022_CV19_S29',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_024_CV19_S31.gff3',
                //         name: '20CVa_024_CV19_S31',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_025_CV19_S32.gff3',
                //         name: '20CVa_025_CV19_S32',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_026_CV19_S33.gff3',
                //         name: '20CVa_026_CV19_S33',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_027_CV19_S34.gff3',
                //         name: '20CVa_027_CV19_S34',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_030_CV19_S37.gff3',
                //         name: '20CVa_030_CV19_S37',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_031_CV19_S38.gff3',
                //         name: '20CVa_031_CV19_S38',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_034_CV19_S41.gff3',
                //         name: '20CVa_034_CV19_S41',
                //         height: 30
                //     }, {
                //         type: 'annotation',
                //         format: 'gff3',
                //         url: 'gff3files_sample/20CVa_035_CV19_S42.gff3',
                //         name: '20CVa_035_CV19_S42',
                //         height: 30
                //     },
                // ]
            }

        const igvDiv = document.getElementById("igvDiv");

        igv.createBrowser(igvDiv, options)
            .then(function (browser) {
                console.log("Created IGV browser");
            })
    })();

</script>

</body>

</html>
