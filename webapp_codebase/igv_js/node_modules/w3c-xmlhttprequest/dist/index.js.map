{"version":3,"file":"index.js","sources":["../src/dom/event.ts","../src/progressevent.ts","../src/webidl/domexception.ts","../src/dom/eventtarget.ts","../src/xmlhttprequesteventtarget.ts","../src/xmlhttprequestupload.ts","../src/xmlhttprequest.ts","../src/formdata.ts"],"sourcesContent":["// The MIT License (MIT)\n//\n// Copyright (c) 2013-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport { performance } from 'perf_hooks';\nimport EventTarget from './eventtarget';\n\nexport const internalEventSymbol = Symbol('InternalEvent');\n\nexport interface EventInit {\n  bubbles?: boolean;\n  cancelable?: boolean;\n  composed?: boolean;\n}\n\nexport class InternalEvent {\n  canceled: boolean;\n  immediatePropagationStoped: boolean;\n  initialized: boolean;\n  propagationStoped: boolean;\n\n  bubbles: boolean;\n  cancelable: boolean;\n  eventPhase: number;\n  target: EventTarget | null;\n  timeStamp: number;\n  type: string;\n\n  constructor(type: string, eventInit: EventInit) {\n    this.canceled = false;\n    this.immediatePropagationStoped = false;\n    this.initialized = true;\n    this.propagationStoped = false;\n\n    this.bubbles = eventInit.bubbles ?? false;\n    this.cancelable = eventInit.cancelable ?? false;\n    this.eventPhase = Event.NONE;\n    this.target = null;\n    this.timeStamp = performance.now();\n    this.type = type;\n  }\n}\n\n/**\n * @see {@link https://dom.spec.whatwg.org/#interface-event DOM Standard - 2.2. Interface Event}\n */\nexport default class Event {\n  static readonly NONE = 0;\n  static readonly CAPTURING_PHASE = 1;\n  static readonly AT_TARGET = 2;\n  static readonly BUBBLING_PHASE = 3;\n\n  readonly NONE = Event.NONE;\n  readonly CAPTURING_PHASE = Event.CAPTURING_PHASE;\n  readonly AT_TARGET = Event.AT_TARGET;\n  readonly BUBBLING_PHASE = Event.BUBBLING_PHASE;\n\n  [internalEventSymbol]: InternalEvent;\n\n  get bubbles(): boolean {\n    return this[internalEventSymbol].bubbles;\n  }\n\n  get cancelable(): boolean {\n    return this[internalEventSymbol].cancelable;\n  }\n\n  get currentTarget(): EventTarget | null {\n    return this[internalEventSymbol].target;\n  }\n\n  get defaultPrevented(): boolean {\n    return this[internalEventSymbol].canceled;\n  }\n\n  get eventPhase(): number {\n    return this[internalEventSymbol].eventPhase;\n  }\n\n  /**\n   * @todo Make the value changeable.\n   */\n  get isTrusted(): boolean {\n    return true;\n  }\n\n  get target(): EventTarget | null {\n    return this[internalEventSymbol].target;\n  }\n\n  get timeStamp(): number {\n    return this[internalEventSymbol].timeStamp;\n  }\n\n  get type(): string {\n    return this[internalEventSymbol].type;\n  }\n\n  constructor(type: string, eventInit: EventInit = {}) {\n    if (!type) throw new TypeError('Not enough arguments.');\n\n    Object.defineProperty(this, internalEventSymbol, {\n      enumerable: false,\n      value: new InternalEvent(type, {\n        bubbles: eventInit.bubbles ?? false,\n        cancelable: eventInit.cancelable ?? false\n      }),\n      writable: true\n    });\n  }\n\n  preventDefault(): void {\n    if (this.cancelable && !this[internalEventSymbol].canceled) {\n      this[internalEventSymbol].canceled = true;\n    }\n  }\n\n  stopImmediatePropagation(): void {\n    if (!this[internalEventSymbol].immediatePropagationStoped) {\n      this[internalEventSymbol].immediatePropagationStoped = true;\n    }\n  }\n\n  stopPropagation(): void {\n    if (!this[internalEventSymbol].propagationStoped) {\n      this[internalEventSymbol].propagationStoped = true;\n    }\n  }\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2013-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport Event, { EventInit } from './dom/event';\n\n/**\n * @see {@link https://xhr.spec.whatwg.org/#interface-progressevent XMLHttpRequest Standard - 6. Interface ProgressEvent}\n */\nexport interface ProgressEventInit extends EventInit {\n  lengthComputable?: boolean;\n  loaded?: number;\n  total?: number;\n}\n\nexport default class ProgressEvent extends Event {\n  #lengthComputable: boolean;\n  #loaded: number;\n  #total: number;\n\n  get lengthComputable(): boolean {\n    return this.#lengthComputable;\n  }\n\n  get loaded(): number {\n    return this.#loaded;\n  }\n\n  get total(): number {\n    return this.#total;\n  }\n\n  constructor(type: string, eventInit: ProgressEventInit = {}) {\n    super(type, eventInit);\n\n    this.#lengthComputable = eventInit.lengthComputable ?? false;\n    this.#loaded = eventInit.loaded ?? 0;\n    this.#total = eventInit.total ?? 0;\n  }\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2013-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * @see {@link https://heycam.github.io/webidl/#idl-DOMException Web IDL - 4.3. DOMException}\n */\nexport default class DOMException extends Error {\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly INDEX_SIZE_ERR = 1;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly DOMSTRING_SIZE_ERR = 2;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly HIERARCHY_REQUEST_ERR = 3;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly WRONG_DOCUMENT_ERR = 4;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly INVALID_CHARACTER_ERR = 5;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly NO_DATA_ALLOWED_ERR = 6;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly NO_MODIFICATION_ALLOWED_ERR = 7;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly NOT_FOUND_ERR = 8;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly NOT_SUPPORTED_ERR = 9;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly INUSE_ATTRIBUTE_ERR = 10;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly INVALID_STATE_ERR = 11;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly SYNTAX_ERR = 12;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly INVALID_MODIFICATION_ERR = 13;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly NAMESPACE_ERR = 14;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly INVALID_ACCESS_ERR = 15;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly VALIDATION_ERR = 16;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly TYPE_MISMATCH_ERR = 17;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly SECURITY_ERR = 18;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly NETWORK_ERR = 19;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly ABORT_ERR = 20;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly URL_MISMATCH_ERR = 21;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly QUOTA_EXCEEDED_ERR = 22;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly TIMEOUT_ERR = 23;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly INVALID_NODE_TYPE_ERR = 24;\n  /**\n   * @deprecated since version 3.0\n   */\n  static readonly DATA_CLONE_ERR = 25;\n\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly INDEX_SIZE_ERR = DOMException.INDEX_SIZE_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly DOMSTRING_SIZE_ERR = DOMException.DOMSTRING_SIZE_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly HIERARCHY_REQUEST_ERR = DOMException.HIERARCHY_REQUEST_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly WRONG_DOCUMENT_ERR = DOMException.WRONG_DOCUMENT_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly INVALID_CHARACTER_ERR = DOMException.INVALID_CHARACTER_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly NO_DATA_ALLOWED_ERR = DOMException.NO_DATA_ALLOWED_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly NO_MODIFICATION_ALLOWED_ERR =\n    DOMException.NO_MODIFICATION_ALLOWED_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly NOT_FOUND_ERR = DOMException.NOT_FOUND_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly NOT_SUPPORTED_ERR = DOMException.NOT_SUPPORTED_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly INUSE_ATTRIBUTE_ERR = DOMException.INUSE_ATTRIBUTE_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly INVALID_STATE_ERR = DOMException.INVALID_STATE_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly SYNTAX_ERR = DOMException.SYNTAX_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly INVALID_MODIFICATION_ERR = DOMException.INVALID_MODIFICATION_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly NAMESPACE_ERR = DOMException.NAMESPACE_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly INVALID_ACCESS_ERR = DOMException.INVALID_ACCESS_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly VALIDATION_ERR = DOMException.VALIDATION_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly TYPE_MISMATCH_ERR = DOMException.TYPE_MISMATCH_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly SECURITY_ERR = DOMException.SECURITY_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly NETWORK_ERR = DOMException.NETWORK_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly ABORT_ERR = DOMException.ABORT_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly URL_MISMATCH_ERR = DOMException.URL_MISMATCH_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly QUOTA_EXCEEDED_ERR = DOMException.QUOTA_EXCEEDED_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly TIMEOUT_ERR = DOMException.TIMEOUT_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly INVALID_NODE_TYPE_ERR = DOMException.INVALID_NODE_TYPE_ERR;\n  /**\n   * @deprecated since version 3.0\n   */\n  readonly DATA_CLONE_ERR = DOMException.DATA_CLONE_ERR;\n\n  #codeMap = new Map<string, number>([\n    ['IndexSizeError', DOMException.INDEX_SIZE_ERR],\n    ['HierarchyRequestError', DOMException.HIERARCHY_REQUEST_ERR],\n    ['WrongDocumentError', DOMException.WRONG_DOCUMENT_ERR],\n    ['InvalidCharacterError', DOMException.INVALID_CHARACTER_ERR],\n    ['NotFoundError', DOMException.NOT_FOUND_ERR],\n    ['NotSupportedError', DOMException.NOT_SUPPORTED_ERR],\n    ['InvalidStateError', DOMException.INVALID_STATE_ERR],\n    ['SyntaxError', DOMException.SYNTAX_ERR],\n    ['InvalidModificationError', DOMException.INVALID_MODIFICATION_ERR],\n    ['NamespaceError', DOMException.NAMESPACE_ERR],\n    ['InvalidAccessError', DOMException.INVALID_ACCESS_ERR],\n    ['TypeMismatchError', DOMException.TYPE_MISMATCH_ERR],\n    ['SecurityError', DOMException.SECURITY_ERR],\n    ['NetworkError', DOMException.NETWORK_ERR],\n    ['AbortError', DOMException.ABORT_ERR],\n    ['URLMismatchError', DOMException.URL_MISMATCH_ERR],\n    ['QuotaExceededError', DOMException.QUOTA_EXCEEDED_ERR],\n    ['TimeoutError', DOMException.TIMEOUT_ERR],\n    ['InvalidNodeTypeError', DOMException.INVALID_NODE_TYPE_ERR],\n    ['DataCloneError', DOMException.DATA_CLONE_ERR]\n  ]);\n\n  #message: string;\n  #name: string;\n\n  /**\n   * @deprecated since version 3.0\n   */\n  get code(): number {\n    return this.#codeMap.get(this.name) ?? 0;\n  }\n\n  get message(): string {\n    return this.#message;\n  }\n\n  get name(): string {\n    return this.#name;\n  }\n\n  constructor(message = '', name = 'Error') {\n    super(message);\n\n    this.#message = message;\n    this.#name = name;\n  }\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2012-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport Event, { internalEventSymbol } from './event';\n\ninterface EventListenerOptions {\n  capture?: boolean;\n}\n\ninterface AddEventListenerOptions extends EventListenerOptions {\n  once?: boolean;\n  passive?: boolean;\n}\n\ninterface EventListener {\n  (event: Event): void;\n}\n\ninterface EventListenerObject {\n  handleEvent(event: Event): void;\n}\n\ntype EventListenerOrEventListenerObject = EventListener | EventListenerObject;\n\n/**\n * @see {@link https://dom.spec.whatwg.org/#interface-eventtarget DOM Standard - 2.7. Interface EventTarget}\n */\nexport default class EventTarget {\n  #listeners: {\n    [type: string]: Set<EventListenerOrEventListenerObject>;\n  };\n\n  constructor() {\n    this.#listeners = {};\n  }\n\n  /**\n   * @see {@link https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener DOM Standard - The addEventListener(type, callback, options) method}\n   */\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    options: boolean | AddEventListenerOptions = false\n  ): void {\n    this.#listeners[type] =\n      this.#listeners[type] ?? new Set<EventListenerOrEventListenerObject>();\n\n    if (!this.#listeners[type].has(listener)) {\n      this.#listeners[type].add(listener);\n    }\n  }\n\n  /**\n   * @see {@link https://dom.spec.whatwg.org/#dom-eventtarget-dispatchevent DOM Standard - The dispatchEvent(event) method}\n   */\n  dispatchEvent(event: Event): boolean {\n    if (!(event instanceof Event)) {\n      // TODO: Add human readable message.\n      throw new TypeError('');\n    }\n\n    event[internalEventSymbol].eventPhase = Event.CAPTURING_PHASE;\n    event[internalEventSymbol].target = this;\n    event[internalEventSymbol].eventPhase = Event.AT_TARGET;\n\n    const listeners = this.#listeners[event.type];\n\n    if (listeners && !event[internalEventSymbol].propagationStoped) {\n      for (const listener of listeners) {\n        if (typeof listener === 'undefined') continue;\n\n        if (typeof listener === 'function') {\n          listener.call(this, event);\n        } else if (typeof listener.handleEvent === 'function') {\n          listener.handleEvent.call(listener, event);\n        }\n      }\n    }\n\n    if (event.bubbles) {\n      event[internalEventSymbol].eventPhase = Event.BUBBLING_PHASE;\n    }\n\n    event[internalEventSymbol].eventPhase = Event.NONE;\n\n    return event.defaultPrevented;\n  }\n\n  /**\n   * @see {@link https://dom.spec.whatwg.org/#dom-eventtarget-removeeventlistener DOM Standard - The removeEventListener(type, callback, options) method}\n   */\n  removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    options: boolean | EventListenerOptions = false\n  ): void {\n    if (this.#listeners[type]) {\n      this.#listeners[type].delete(listener);\n    }\n  }\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2012-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport EventTarget from './dom/eventtarget';\nimport EventHandler from './html/eventhandler';\n\nexport default class XMLHttpRequestEventTarget extends EventTarget {\n  #onabort: EventHandler | null;\n  #onerror: EventHandler | null;\n  #onload: EventHandler | null;\n  #onloadstart: EventHandler | null;\n  #onloadend: EventHandler | null;\n  #onprogress: EventHandler | null;\n  #ontimeout: EventHandler | null;\n\n  get onabort(): EventHandler | null {\n    return this.#onabort;\n  }\n\n  set onabort(value: EventHandler | null) {\n    if (this.#onabort) {\n      this.removeEventListener('abort', this.#onabort);\n    }\n\n    if (typeof value === 'function') {\n      this.#onabort = value;\n      this.addEventListener('abort', this.#onabort);\n    } else {\n      this.#onabort = null;\n    }\n  }\n\n  get onerror(): EventHandler | null {\n    return this.#onerror;\n  }\n\n  set onerror(value: EventHandler | null) {\n    if (this.#onerror) {\n      this.removeEventListener('error', this.#onerror);\n    }\n\n    if (typeof value === 'function') {\n      this.#onerror = value;\n      this.addEventListener('error', this.#onerror);\n    } else {\n      this.#onerror = null;\n    }\n  }\n\n  get onload(): EventHandler | null {\n    return this.#onload;\n  }\n\n  set onload(value: EventHandler | null) {\n    if (this.#onload) {\n      this.removeEventListener('load', this.#onload);\n    }\n\n    if (typeof value === 'function') {\n      this.#onload = value;\n      this.addEventListener('load', this.#onload);\n    } else {\n      this.#onload = null;\n    }\n  }\n\n  get onloadstart(): EventHandler | null {\n    return this.#onloadstart;\n  }\n\n  set onloadstart(value: EventHandler | null) {\n    if (this.#onloadstart) {\n      this.removeEventListener('loadstart', this.#onloadstart);\n    }\n\n    if (typeof value === 'function') {\n      this.#onloadstart = value;\n      this.addEventListener('loadstart', this.#onloadstart);\n    } else {\n      this.#onloadstart = null;\n    }\n  }\n\n  get onloadend(): EventHandler | null {\n    return this.#onloadend;\n  }\n\n  set onloadend(value: EventHandler | null) {\n    if (this.#onloadend) {\n      this.removeEventListener('loadend', this.#onloadend);\n    }\n\n    if (typeof value === 'function') {\n      this.#onloadend = value;\n      this.addEventListener('loadend', this.#onloadend);\n    } else {\n      this.#onloadend = null;\n    }\n  }\n\n  get onprogress(): EventHandler | null {\n    return this.#onprogress;\n  }\n\n  set onprogress(value: EventHandler | null) {\n    if (this.#onprogress) {\n      this.removeEventListener('progress', this.#onprogress);\n    }\n\n    if (typeof value === 'function') {\n      this.#onprogress = value;\n      this.addEventListener('progress', this.#onprogress);\n    } else {\n      this.#onprogress = null;\n    }\n  }\n\n  get ontimeout(): EventHandler | null {\n    return this.#ontimeout;\n  }\n\n  set ontimeout(value: EventHandler | null) {\n    if (this.#ontimeout) {\n      this.removeEventListener('timeout', this.#ontimeout);\n    }\n\n    if (typeof value === 'function') {\n      this.#ontimeout = value;\n      this.addEventListener('timeout', this.#ontimeout);\n    } else {\n      this.#ontimeout = null;\n    }\n  }\n\n  constructor() {\n    super();\n\n    this.#onabort = null;\n    this.#onerror = null;\n    this.#onload = null;\n    this.#onloadstart = null;\n    this.#onloadend = null;\n    this.#onprogress = null;\n    this.#ontimeout = null;\n  }\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2011-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport XMLHttpRequestEventTarget from './xmlhttprequesteventtarget';\n\nexport default class XMLHttpRequestUpload extends XMLHttpRequestEventTarget {}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2011-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport * as http from 'http';\nimport * as https from 'https';\nimport Event from './dom/event';\nimport FormData from './formdata';\nimport EventHandler from './html/eventhandler';\nimport ProgressEvent from './progressevent';\nimport DOMException from './webidl/domexception';\nimport XMLHttpRequestEventTarget from './xmlhttprequesteventtarget';\nimport XMLHttpRequestUpload from './xmlhttprequestupload';\n\nconst FORBIDDEN_METHODS = ['connect', 'trace', 'track'];\n\nconst ACCEPTABLE_RESPONSE_TYPES = [\n  '',\n  'arraybuffer',\n  'blob',\n  'document',\n  'json',\n  'text'\n];\n\n/**\n * @see {@link https://fetch.spec.whatwg.org/#forbidden-header-name Fetch Standard - forbidden header name}\n */\nconst FORBIDDEN_REQUEST_HEADERS = [\n  'accept-charset',\n  'accept-encoding',\n  'access-control-request-headers',\n  'access-control-request-method',\n  'connection',\n  'content-length',\n  'cookie',\n  'cookie2',\n  'date',\n  'dnt',\n  'expect',\n  'host',\n  'keep-alive',\n  'origin',\n  'referer',\n  'te',\n  'trailer',\n  'transfer-encoding',\n  'upgrade',\n  'user-agent',\n  'via'\n];\n\n/**\n * @see {@link https://fetch.spec.whatwg.org/#forbidden-response-header-name Fetch Standard - forbidden response header name}\n */\nconst FORBIDDEN_RESPONSE_HEADERS = ['set-cookie', 'set-cookie2'];\n\n/**\n * @see {@link https://tools.ietf.org/html/rfc7230#section-3.2.6 RFC 7230 - HTTP/1.1 Message Syntax and Routing - 3.2.6. Field Value Components}\n */\nconst HTTP_HEADER_FIELD_NAME_REGEXP = /[!#$%&'*+-.^_`|~a-z0-9]+/;\n\nexport type BodyInit =\n  | ArrayBuffer\n  | Buffer\n  | FormData\n  | URLSearchParams\n  | Uint8Array\n  | string;\n\nexport type XMLHttpRequestResponseType =\n  | ''\n  | 'arraybuffer'\n  | 'blob'\n  | 'document'\n  | 'json'\n  | 'text';\n\n/**\n * @see {@link https://xhr.spec.whatwg.org/#interface-xmlhttprequest XMLHttpRequest Standard - 4. Interface XMLHttpRequest}\n */\nexport default class XMLHttpRequest extends XMLHttpRequestEventTarget {\n  static readonly UNSENT = 0;\n  static readonly OPENED = 1;\n  static readonly HEADERS_RECEIVED = 2;\n  static readonly LOADING = 3;\n  static readonly DONE = 4;\n\n  readonly UNSENT = XMLHttpRequest.UNSENT;\n  readonly OPENED = XMLHttpRequest.OPENED;\n  readonly HEADERS_RECEIVED = XMLHttpRequest.HEADERS_RECEIVED;\n  readonly LOADING = XMLHttpRequest.LOADING;\n  readonly DONE = XMLHttpRequest.DONE;\n\n  readonly upload: XMLHttpRequestUpload;\n\n  #client: http.ClientRequest | null;\n  #onreadystatechange: EventHandler | null;\n  #responseBuffer: Buffer;\n  #responseHeaders: http.IncomingHttpHeaders | null;\n\n  #readyState: number;\n  #responseType: XMLHttpRequestResponseType;\n  #responseURL: string;\n  #status: number;\n  #statusText: string;\n  #timeout: number;\n  #withCredentials: boolean;\n\n  get onreadystatechange(): EventHandler | null {\n    return this.#onreadystatechange;\n  }\n\n  set onreadystatechange(value: EventHandler | null) {\n    if (this.#onreadystatechange) {\n      this.removeEventListener('readystatechange', this.#onreadystatechange);\n    }\n\n    if (typeof value === 'function') {\n      this.#onreadystatechange = value;\n      this.addEventListener('readystatechange', this.#onreadystatechange);\n    } else {\n      this.#onreadystatechange = null;\n    }\n  }\n\n  get readyState(): number {\n    return this.#readyState;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  get response(): ArrayBufferLike | Buffer | string | any | null {\n    if (this.readyState !== XMLHttpRequest.DONE) {\n      return null;\n    }\n\n    switch (this.responseType) {\n      case 'arraybuffer':\n        return new Uint8Array(this.#responseBuffer).buffer;\n      case 'blob':\n        return this.#responseBuffer;\n      case 'document':\n        return this.responseXML;\n      case 'json':\n        try {\n          const text = this.#responseBuffer.toString();\n\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n          return JSON.parse(text);\n        } catch {\n          return null;\n        }\n      default:\n        return this.responseText;\n    }\n  }\n\n  get responseText(): string {\n    if (this.responseType !== '' && this.responseType !== 'text') {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'InvalidStateError');\n    }\n\n    if (\n      this.readyState !== XMLHttpRequest.LOADING &&\n      this.readyState !== XMLHttpRequest.DONE\n    ) {\n      return '';\n    }\n\n    return this.#responseBuffer.toString();\n  }\n\n  get responseType(): XMLHttpRequestResponseType {\n    return this.#responseType;\n  }\n\n  set responseType(value: XMLHttpRequestResponseType) {\n    if (ACCEPTABLE_RESPONSE_TYPES.includes(value)) {\n      if (\n        this.readyState === XMLHttpRequest.LOADING ||\n        this.readyState === XMLHttpRequest.DONE\n      ) {\n        // TODO: Add human readable message.\n        throw new DOMException('', 'InvalidStateError');\n      }\n\n      this.#responseType = value;\n    }\n  }\n\n  get responseURL(): string {\n    return this.#responseURL;\n  }\n\n  get responseXML(): null {\n    if (this.responseType !== '' && this.responseType !== 'document') {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'InvalidStateError');\n    }\n\n    if (this.readyState !== XMLHttpRequest.DONE) {\n      return null;\n    }\n\n    return null;\n  }\n\n  get status(): number {\n    return this.#status;\n  }\n\n  get statusText(): string {\n    return this.#statusText;\n  }\n\n  get timeout(): number {\n    return this.#timeout;\n  }\n\n  set timeout(value: number) {\n    this.#timeout = value;\n  }\n\n  get withCredentials(): boolean {\n    return this.#withCredentials;\n  }\n\n  set withCredentials(value: boolean) {\n    if (\n      this.readyState !== XMLHttpRequest.UNSENT &&\n      this.readyState !== XMLHttpRequest.OPENED\n    ) {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'InvalidStateError');\n    }\n\n    this.#withCredentials = value;\n  }\n\n  constructor() {\n    super();\n\n    this.upload = new XMLHttpRequestUpload();\n\n    this.#client = null;\n    this.#onreadystatechange = null;\n    this.#responseBuffer = Buffer.alloc(0);\n    this.#responseHeaders = null;\n\n    this.#readyState = XMLHttpRequest.UNSENT;\n    this.#responseType = '';\n    this.#responseURL = '';\n    this.#status = 0;\n    this.#statusText = '';\n    this.#timeout = 0;\n    this.#withCredentials = false;\n  }\n\n  /**\n   * @see {@link https://xhr.spec.whatwg.org/#the-abort()-method XMLHttpRequest Standard - 4.5.7. The abort() method}\n   */\n  abort(): void {\n    if (\n      this.readyState === XMLHttpRequest.UNSENT ||\n      this.readyState === XMLHttpRequest.OPENED ||\n      this.readyState === XMLHttpRequest.DONE ||\n      !this.#client\n    ) {\n      return;\n    }\n\n    this.#client.destroy();\n\n    this.#readyState = XMLHttpRequest.UNSENT;\n\n    this.dispatchEvent(new ProgressEvent('abort'));\n    this.upload.dispatchEvent(new ProgressEvent('abort'));\n\n    this.#client = null;\n  }\n\n  /**\n   * @see {@link https://xhr.spec.whatwg.org/#the-getallresponseheaders()-method XMLHttpRequest Standard - 4.6.5. The getAllResponseHeaders() method}\n   */\n  getAllResponseHeaders(): string {\n    if (\n      this.readyState === XMLHttpRequest.UNSENT ||\n      this.readyState === XMLHttpRequest.OPENED ||\n      !this.#responseHeaders\n    ) {\n      return '';\n    }\n\n    const headerNames = Object.keys(this.#responseHeaders).sort();\n\n    let result = '';\n    for (const name of headerNames) {\n      const value = this.#responseHeaders[name];\n\n      if (value) {\n        const values = Array.isArray(value) ? value : [value];\n\n        for (const v of values) {\n          result += `${name}: ${v}\\r\\n`;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * @see {@link https://xhr.spec.whatwg.org/#the-getresponseheader()-method XMLHttpRequest Standard - 4.6.4. The getResponseHeader() method}\n   */\n  getResponseHeader(name: string): string | null {\n    if (\n      this.readyState === XMLHttpRequest.UNSENT ||\n      this.readyState === XMLHttpRequest.OPENED ||\n      !this.#responseHeaders\n    ) {\n      return null;\n    }\n\n    // Normalize value\n    const headerName = `${name}`.toLowerCase();\n\n    if (!HTTP_HEADER_FIELD_NAME_REGEXP.test(headerName)) {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'SyntaxError');\n    }\n\n    if (FORBIDDEN_RESPONSE_HEADERS.includes(headerName)) {\n      // TODO: Print human readable warn message.\n      return null;\n    }\n\n    const value = this.#responseHeaders[headerName] || null;\n\n    return Array.isArray(value) ? value.join(', ') : value;\n  }\n\n  /**\n   * @see {@link https://xhr.spec.whatwg.org/#the-open()-method 4.5.1. The open() method}\n   */\n  open(\n    method: string,\n    url: string,\n    async = true,\n    username: string | null = null,\n    password: string | null = null\n  ): void {\n    if (!async) {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'InvalidAccessError');\n    }\n\n    this.#responseURL = '';\n\n    let parsedURL: URL;\n\n    try {\n      parsedURL = new URL(url, 'http://localhost/');\n    } catch {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'SyntaxError');\n    }\n\n    if (FORBIDDEN_METHODS.includes(method.toLowerCase())) {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'SecurityError');\n    }\n\n    const protocol = parsedURL.protocol;\n    const isHTTPS = protocol === 'https:';\n    const user = username || parsedURL.username;\n    const pass = password || parsedURL.password;\n\n    const agent = isHTTPS ? https.globalAgent : http.globalAgent;\n    const auth = user ? (pass ? `${user}:${pass}` : user) : '';\n    const path = parsedURL.pathname + parsedURL.search;\n    const port = parsedURL.port\n      ? parseInt(parsedURL.port, 10)\n      : isHTTPS\n      ? 443\n      : 80;\n\n    this.#client = new http.ClientRequest({\n      agent,\n      auth,\n      host: parsedURL.hostname,\n      method,\n      path,\n      port,\n      protocol\n    });\n\n    this.#client.addListener('error', () => {\n      this.dispatchEvent(new ProgressEvent('error'));\n      this.upload.dispatchEvent(new ProgressEvent('error'));\n\n      this.#client = null;\n      this.#readyState = XMLHttpRequest.DONE;\n    });\n\n    this.#client.addListener('response', (response) => {\n      this.#readyState = XMLHttpRequest.HEADERS_RECEIVED;\n      this.dispatchEvent(new Event('readystatechange'));\n\n      this.#status = response.statusCode ?? 0;\n      this.#statusText = response.statusMessage ?? '';\n      this.#responseHeaders = response.headers;\n\n      this.#responseURL = `${protocol}//${parsedURL.host}${path}`;\n\n      response.addListener('data', (chunk: Buffer) => {\n        if (this.#responseBuffer.length === 0) {\n          this.dispatchEvent(new ProgressEvent('loadstart'));\n        }\n\n        this.#responseBuffer = Buffer.concat([this.#responseBuffer, chunk]);\n\n        this.#readyState = XMLHttpRequest.LOADING;\n        this.dispatchEvent(new Event('readystatechange'));\n\n        this.dispatchEvent(\n          new ProgressEvent('progress', {\n            loaded: this.#responseBuffer.length\n          })\n        );\n      });\n\n      response.addListener('end', () => {\n        if (this.#responseBuffer.length === 0) {\n          this.#readyState = XMLHttpRequest.LOADING;\n          this.dispatchEvent(new Event('readystatechange'));\n        }\n\n        this.#client = null;\n\n        this.#readyState = XMLHttpRequest.DONE;\n        this.dispatchEvent(new Event('readystatechange'));\n\n        this.dispatchEvent(\n          new ProgressEvent('load', {\n            loaded: this.#responseBuffer.length\n          })\n        );\n        this.dispatchEvent(\n          new ProgressEvent('loadend', {\n            loaded: this.#responseBuffer.length\n          })\n        );\n      });\n    });\n\n    this.#readyState = XMLHttpRequest.OPENED;\n    this.dispatchEvent(new Event('readystatechange'));\n  }\n\n  /**\n   * @see {@link https://xhr.spec.whatwg.org/#the-overridemimetype()-method XMLHttpRequest Standard - 4.6.7. The overrideMimeType() method}\n   */\n  overrideMimeType(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    mime: string\n  ): void {\n    // TODO: Unimplemented.\n  }\n\n  /**\n   * @see {@link https://xhr.spec.whatwg.org/#the-send()-method XMLHttpRequest Standard - 4.5.6. The send() method}\n   */\n  send(body: BodyInit | null = null): void {\n    if (this.readyState !== XMLHttpRequest.OPENED || !this.#client) {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'InvalidStateError');\n    }\n\n    if (body) {\n      const bodyInit =\n        body instanceof ArrayBuffer || body instanceof Uint8Array\n          ? Buffer.from(body)\n          : body;\n\n      if (typeof bodyInit === 'string' || bodyInit instanceof Buffer) {\n        const length = Buffer.isBuffer(bodyInit)\n          ? bodyInit.length\n          : Buffer.byteLength(bodyInit);\n\n        this.#client.setHeader('Content-Length', length);\n      }\n\n      this.#client.addListener('socket', (socket) => {\n        this.upload.dispatchEvent(new ProgressEvent('loadstart'));\n\n        socket.addListener('data', () => {\n          this.upload.dispatchEvent(new ProgressEvent('progress'));\n        });\n\n        socket.addListener('end', () => {\n          this.upload.dispatchEvent(new ProgressEvent('load'));\n          this.upload.dispatchEvent(new ProgressEvent('loadend'));\n        });\n      });\n\n      this.#client.write(body);\n    }\n\n    this.dispatchEvent(new ProgressEvent('loadstart'));\n    this.#client.end();\n  }\n\n  /**\n   * @see {@link https://xhr.spec.whatwg.org/#the-setrequestheader()-method XMLHttpRequest Standard - 4.5.2. The setRequestHeader() method}\n   */\n  setRequestHeader(name: string, value: string): void {\n    if (this.readyState !== XMLHttpRequest.OPENED || !this.#client) {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'InvalidStateError');\n    }\n\n    // Normalize value\n    const headerName = `${name}`.toLowerCase();\n    const headerValue = `${value}`.trim();\n\n    if (!HTTP_HEADER_FIELD_NAME_REGEXP.test(headerName)) {\n      // TODO: Add human readable message.\n      throw new DOMException('', 'SyntaxError');\n    }\n\n    if (\n      FORBIDDEN_REQUEST_HEADERS.includes(headerName) ||\n      headerName.startsWith('proxy-') ||\n      headerName.startsWith('sec-')\n    ) {\n      // TODO: Print human readable warn message.\n      return;\n    }\n\n    try {\n      this.#client.setHeader(headerName, headerValue);\n    } catch (error) {\n      const message = error instanceof Error ? error.message : '';\n\n      throw new DOMException(message, 'SyntaxError');\n    }\n  }\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2012-2020 Yamagishi Kazutoshi\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * @see {@link https://xhr.spec.whatwg.org/#interface-formdata XMLHttpRequest Standard - 5. Interface FormData}\n */\nexport default class FormData {\n  /**\n   * @todo Implement this function.\n   */\n  append(/* name, value, filename */): void {\n    // wip\n  }\n}\n"],"names":["internalEventSymbol","Symbol","InternalEvent","constructor","type","eventInit","canceled","immediatePropagationStoped","initialized","propagationStoped","bubbles","cancelable","eventPhase","target","timeStamp","Event","NONE","performance","now","currentTarget","defaultPrevented","isTrusted","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","TypeError","Object","defineProperty","enumerable","value","writable","preventDefault","stopImmediatePropagation","stopPropagation","ProgressEvent","lengthComputable","loaded","total","DOMException","Error","code","get","name","message","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","Map","EventTarget","addEventListener","listener","options","Set","has","add","dispatchEvent","event","listeners","call","handleEvent","removeEventListener","delete","XMLHttpRequestEventTarget","onabort","onerror","onload","onloadstart","onloadend","onprogress","ontimeout","XMLHttpRequestUpload","FORBIDDEN_METHODS","ACCEPTABLE_RESPONSE_TYPES","FORBIDDEN_REQUEST_HEADERS","FORBIDDEN_RESPONSE_HEADERS","HTTP_HEADER_FIELD_NAME_REGEXP","XMLHttpRequest","onreadystatechange","readyState","response","DONE","responseType","Uint8Array","buffer","responseXML","text","toString","JSON","parse","responseText","LOADING","includes","responseURL","status","statusText","timeout","withCredentials","UNSENT","OPENED","HEADERS_RECEIVED","upload","Buffer","alloc","abort","destroy","getAllResponseHeaders","headerNames","keys","sort","result","values","Array","isArray","v","getResponseHeader","headerName","toLowerCase","test","join","open","method","url","async","username","password","parsedURL","URL","protocol","isHTTPS","user","pass","agent","https","globalAgent","http","auth","path","pathname","search","port","parseInt","ClientRequest","host","hostname","addListener","statusCode","statusMessage","headers","chunk","length","concat","overrideMimeType","mime","send","body","bodyInit","ArrayBuffer","from","isBuffer","byteLength","setHeader","socket","write","end","setRequestHeader","headerValue","trim","startsWith","error","FormData","append"],"mappings":"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"}