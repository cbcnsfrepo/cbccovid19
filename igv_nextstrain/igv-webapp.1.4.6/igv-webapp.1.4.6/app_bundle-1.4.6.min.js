!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).igv_webapp={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},i=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},o=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c={f:l&&!s.call({1:2},1)?function(t){var e=l(this,t);return!!e&&e.enumerable}:s},f=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},u={}.toString,h=function(t){return u.call(t).slice(8,-1)},p="".split,d=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?p.call(t,""):Object(t)}:Object,g=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},m=function(t){return d(g(t))},w=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=function(t,e){if(!w(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!w(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!w(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!w(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},v={}.hasOwnProperty,b=function(t,e){return v.call(t,e)},x=i.document,S=w(x)&&w(x.createElement),E=function(t){return S?x.createElement(t):{}},R=!o&&!a((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a})),k=Object.getOwnPropertyDescriptor,C={f:o?k:function(t,e){if(t=m(t),e=y(e,!0),R)try{return k(t,e)}catch(t){}if(b(t,e))return f(!c.f.call(t,e),t[e])}},D=function(t){if(!w(t))throw TypeError(String(t)+" is not an object");return t},L=Object.defineProperty,T={f:o?L:function(t,e,n){if(D(t),e=y(e,!0),D(n),R)try{return L(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=o?function(t,e,n){return T.f(t,e,f(1,n))}:function(t,e,n){return t[e]=n,t},B=function(t,e){try{I(i,t,e)}catch(n){i[t]=e}return e},A="__core-js_shared__",O=i[A]||B(A,{}),_=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(t){return _.call(t)});var M,z,F,U=O.inspectSource,H=i.WeakMap,N="function"==typeof H&&/native code/.test(U(H)),P=n((function(t){(t.exports=function(t,e){return O[t]||(O[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.0",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),j=0,K=Math.random(),G=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++j+K).toString(36)},Z=P("keys"),V=function(t){return Z[t]||(Z[t]=G(t))},Y={},q=i.WeakMap;if(N){var W=O.state||(O.state=new q),X=W.get,J=W.has,Q=W.set;M=function(t,e){return e.facade=t,Q.call(W,t,e),e},z=function(t){return X.call(W,t)||{}},F=function(t){return J.call(W,t)}}else{var tt=V("state");Y[tt]=!0,M=function(t,e){return e.facade=t,I(t,tt,e),e},z=function(t){return b(t,tt)?t[tt]:{}},F=function(t){return b(t,tt)}}var et={set:M,get:z,has:F,enforce:function(t){return F(t)?z(t):M(t,{})},getterFor:function(t){return function(e){var n;if(!w(e)||(n=z(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=n((function(t){var e=et.get,n=et.enforce,r=String(String).split("String");(t.exports=function(t,e,a,o){var s,l=!!o&&!!o.unsafe,c=!!o&&!!o.enumerable,f=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof e||b(a,"name")||I(a,"name",e),(s=n(a)).source||(s.source=r.join("string"==typeof e?e:""))),t!==i?(l?!f&&t[e]&&(c=!0):delete t[e],c?t[e]=a:I(t,e,a)):c?t[e]=a:B(e,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||U(this)}))})),rt=i,it=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?it(rt[t])||it(i[t]):rt[t]&&rt[t][e]||i[t]&&i[t][e]},ot=Math.ceil,st=Math.floor,lt=function(t){return isNaN(t=+t)?0:(t>0?st:ot)(t)},ct=Math.min,ft=function(t){return t>0?ct(lt(t),9007199254740991):0},ut=Math.max,ht=Math.min,pt=function(t,e){var n=lt(t);return n<0?ut(n+e,0):ht(n,e)},dt=function(t){return function(e,n,r){var i,a=m(e),o=ft(a.length),s=pt(r,o);if(t&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((t||s in a)&&a[s]===n)return t||s||0;return!t&&-1}},gt={includes:dt(!0),indexOf:dt(!1)},mt=gt.indexOf,wt=function(t,e){var n,r=m(t),i=0,a=[];for(n in r)!b(Y,n)&&b(r,n)&&a.push(n);for(;e.length>i;)b(r,n=e[i++])&&(~mt(a,n)||a.push(n));return a},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vt=yt.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return wt(t,vt)}},xt={f:Object.getOwnPropertySymbols},St=at("Reflect","ownKeys")||function(t){var e=bt.f(D(t)),n=xt.f;return n?e.concat(n(t)):e},Et=function(t,e){for(var n=St(e),r=T.f,i=C.f,a=0;a<n.length;a++){var o=n[a];b(t,o)||r(t,o,i(e,o))}},Rt=/#|\.prototype\./,kt=function(t,e){var n=Dt[Ct(t)];return n==Tt||n!=Lt&&("function"==typeof e?a(e):!!e)},Ct=kt.normalize=function(t){return String(t).replace(Rt,".").toLowerCase()},Dt=kt.data={},Lt=kt.NATIVE="N",Tt=kt.POLYFILL="P",It=kt,Bt=C.f,At=function(t,e){var n,r,a,o,s,l=t.target,c=t.global,f=t.stat;if(n=c?i:f?i[l]||B(l,{}):(i[l]||{}).prototype)for(r in e){if(o=e[r],a=t.noTargetGet?(s=Bt(n,r))&&s.value:n[r],!It(c?r:l+(f?".":"#")+r,t.forced)&&void 0!==a){if(typeof o==typeof a)continue;Et(o,a)}(t.sham||a&&a.sham)&&I(o,"sham",!0),nt(n,r,o,t)}},Ot=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},_t=function(t,e,n){if(Ot(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Mt=function(t){return Object(g(t))},zt=Array.isArray||function(t){return"Array"==h(t)},Ft=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),Ut=Ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ht=P("wks"),Nt=i.Symbol,Pt=Ut?Nt:Nt&&Nt.withoutSetter||G,$t=function(t){return b(Ht,t)||(Ft&&b(Nt,t)?Ht[t]=Nt[t]:Ht[t]=Pt("Symbol."+t)),Ht[t]},jt=$t("species"),Kt=function(t,e){var n;return zt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!zt(n.prototype)?w(n)&&null===(n=n[jt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Gt=[].push,Zt=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,a=6==t,o=7==t,s=5==t||a;return function(l,c,f,u){for(var h,p,g=Mt(l),m=d(g),w=_t(c,f,3),y=ft(m.length),v=0,b=u||Kt,x=e?b(l,y):n||o?b(l,0):void 0;y>v;v++)if((s||v in m)&&(p=w(h=m[v],v,g),t))if(e)x[v]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:Gt.call(x,h)}else switch(t){case 4:return!1;case 7:Gt.call(x,h)}return a?-1:r||i?i:x}},Vt={forEach:Zt(0),map:Zt(1),filter:Zt(2),some:Zt(3),every:Zt(4),find:Zt(5),findIndex:Zt(6),filterOut:Zt(7)},Yt=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){throw 1},1)}))},qt=Object.defineProperty,Wt={},Xt=function(t){throw t},Jt=function(t,e){if(b(Wt,t))return Wt[t];e||(e={});var n=[][t],r=!!b(e,"ACCESSORS")&&e.ACCESSORS,i=b(e,0)?e[0]:Xt,s=b(e,1)?e[1]:void 0;return Wt[t]=!!n&&!a((function(){if(r&&!o)return!0;var t={length:-1};r?qt(t,1,{enumerable:!0,get:Xt}):t[1]=1,n.call(t,i,s)}))},Qt=Vt.forEach,te=Yt("forEach"),ee=Jt("forEach"),ne=te&&ee?[].forEach:function(t){return Qt(this,t,arguments.length>1?arguments[1]:void 0)};At({target:"Array",proto:!0,forced:[].forEach!=ne},{forEach:ne});var re={};re[$t("toStringTag")]="z";var ie="[object z]"===String(re),ae=$t("toStringTag"),oe="Arguments"==h(function(){return arguments}()),se=ie?h:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ae))?n:oe?h(e):"Object"==(r=h(e))&&"function"==typeof e.callee?"Arguments":r},le=ie?{}.toString:function(){return"[object "+se(this)+"]"};ie||nt(Object.prototype,"toString",le,{unsafe:!0});var ce=i.Promise,fe=function(t,e,n){for(var r in e)nt(t,r,e[r],n);return t},ue=T.f,he=$t("toStringTag"),pe=function(t,e,n){t&&!b(t=n?t:t.prototype,he)&&ue(t,he,{configurable:!0,value:e})},de=$t("species"),ge=function(t){var e=at(t),n=T.f;o&&e&&!e[de]&&n(e,de,{configurable:!0,get:function(){return this}})},me=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},we={},ye=$t("iterator"),ve=Array.prototype,be=$t("iterator"),xe=function(t){var e=t.return;if(void 0!==e)return D(e.call(t)).value},Se=function(t,e){this.stopped=t,this.result=e},Ee=function(t,e,n){var r,i,a,o,s,l,c,f,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),g=_t(e,u,1+h+d),m=function(t){return r&&xe(r),new Se(!0,t)},w=function(t){return h?(D(t),d?g(t[0],t[1],m):g(t[0],t[1])):d?g(t,m):g(t)};if(p)r=t;else{if("function"!=typeof(i=function(t){if(null!=t)return t[be]||t["@@iterator"]||we[se(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(f=i)&&(we.Array===f||ve[ye]===f)){for(a=0,o=ft(t.length);o>a;a++)if((s=w(t[a]))&&s instanceof Se)return s;return new Se(!1)}r=i.call(t)}for(l=r.next;!(c=l.call(r)).done;){try{s=w(c.value)}catch(t){throw xe(r),t}if("object"==typeof s&&s&&s instanceof Se)return s}return new Se(!1)},Re=$t("iterator"),ke=!1;try{var Ce=0,De={next:function(){return{done:!!Ce++}},return:function(){ke=!0}};De[Re]=function(){return this},Array.from(De,(function(){throw 2}))}catch(t){}var Le,Te,Ie,Be=function(t,e){if(!e&&!ke)return!1;var n=!1;try{var r={};r[Re]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Ae=$t("species"),Oe=function(t,e){var n,r=D(t).constructor;return void 0===r||null==(n=D(r)[Ae])?e:Ot(n)},_e=at("document","documentElement"),Me=at("navigator","userAgent")||"",ze=/(iphone|ipod|ipad).*applewebkit/i.test(Me),Fe="process"==h(i.process),Ue=i.location,He=i.setImmediate,Ne=i.clearImmediate,Pe=i.process,$e=i.MessageChannel,je=i.Dispatch,Ke=0,Ge={},Ze="onreadystatechange",Ve=function(t){if(Ge.hasOwnProperty(t)){var e=Ge[t];delete Ge[t],e()}},Ye=function(t){return function(){Ve(t)}},qe=function(t){Ve(t.data)},We=function(t){i.postMessage(t+"",Ue.protocol+"//"+Ue.host)};He&&Ne||(He=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ge[++Ke]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Le(Ke),Ke},Ne=function(t){delete Ge[t]},Fe?Le=function(t){Pe.nextTick(Ye(t))}:je&&je.now?Le=function(t){je.now(Ye(t))}:$e&&!ze?(Ie=(Te=new $e).port2,Te.port1.onmessage=qe,Le=_t(Ie.postMessage,Ie,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts&&Ue&&"file:"!==Ue.protocol&&!a(We)?(Le=We,i.addEventListener("message",qe,!1)):Le=Ze in E("script")?function(t){_e.appendChild(E("script")).onreadystatechange=function(){_e.removeChild(this),Ve(t)}}:function(t){setTimeout(Ye(t),0)});var Xe,Je,Qe,tn,en,nn,rn,an,on={set:He,clear:Ne},sn=C.f,ln=on.set,cn=i.MutationObserver||i.WebKitMutationObserver,fn=i.document,un=i.process,hn=i.Promise,pn=sn(i,"queueMicrotask"),dn=pn&&pn.value;dn||(Xe=function(){var t,e;for(Fe&&(t=un.domain)&&t.exit();Je;){e=Je.fn,Je=Je.next;try{e()}catch(t){throw Je?tn():Qe=void 0,t}}Qe=void 0,t&&t.enter()},!ze&&!Fe&&cn&&fn?(en=!0,nn=fn.createTextNode(""),new cn(Xe).observe(nn,{characterData:!0}),tn=function(){nn.data=en=!en}):hn&&hn.resolve?(rn=hn.resolve(void 0),an=rn.then,tn=function(){an.call(rn,Xe)}):tn=Fe?function(){un.nextTick(Xe)}:function(){ln.call(i,Xe)});var gn,mn,wn=dn||function(t){var e={fn:t,next:void 0};Qe&&(Qe.next=e),Je||(Je=e,tn()),Qe=e},yn=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Ot(e),this.reject=Ot(n)},vn={f:function(t){return new yn(t)}},bn=function(t,e){if(D(t),w(e)&&e.constructor===t)return e;var n=vn.f(t);return(0,n.resolve)(e),n.promise},xn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Sn=i.process,En=Sn&&Sn.versions,Rn=En&&En.v8;Rn?mn=(gn=Rn.split("."))[0]+gn[1]:Me&&(!(gn=Me.match(/Edge\/(\d+)/))||gn[1]>=74)&&(gn=Me.match(/Chrome\/(\d+)/))&&(mn=gn[1]);var kn,Cn,Dn,Ln,Tn=mn&&+mn,In=on.set,Bn=$t("species"),An="Promise",On=et.get,_n=et.set,Mn=et.getterFor(An),zn=ce,Fn=i.TypeError,Un=i.document,Hn=i.process,Nn=at("fetch"),Pn=vn.f,$n=Pn,jn=!!(Un&&Un.createEvent&&i.dispatchEvent),Kn="function"==typeof PromiseRejectionEvent,Gn="unhandledrejection",Zn=It(An,(function(){if(!(U(zn)!==String(zn))){if(66===Tn)return!0;if(!Fe&&!Kn)return!0}if(Tn>=51&&/native code/.test(zn))return!1;var t=zn.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Bn]=e,!(t.then((function(){}))instanceof e)})),Vn=Zn||!Be((function(t){zn.all(t).catch((function(){}))})),Yn=function(t){var e;return!(!w(t)||"function"!=typeof(e=t.then))&&e},qn=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;wn((function(){for(var r=t.value,i=1==t.state,a=0;n.length>a;){var o,s,l,c=n[a++],f=i?c.ok:c.fail,u=c.resolve,h=c.reject,p=c.domain;try{f?(i||(2===t.rejection&&Qn(t),t.rejection=1),!0===f?o=r:(p&&p.enter(),o=f(r),p&&(p.exit(),l=!0)),o===c.promise?h(Fn("Promise-chain cycle")):(s=Yn(o))?s.call(o,u,h):u(o)):h(r)}catch(t){p&&!l&&p.exit(),h(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Xn(t)}))}},Wn=function(t,e,n){var r,a;jn?((r=Un.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),i.dispatchEvent(r)):r={promise:e,reason:n},!Kn&&(a=i["on"+t])?a(r):t===Gn&&function(t,e){var n=i.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Xn=function(t){In.call(i,(function(){var e,n=t.facade,r=t.value;if(Jn(t)&&(e=xn((function(){Fe?Hn.emit("unhandledRejection",r,n):Wn(Gn,n,r)})),t.rejection=Fe||Jn(t)?2:1,e.error))throw e.value}))},Jn=function(t){return 1!==t.rejection&&!t.parent},Qn=function(t){In.call(i,(function(){var e=t.facade;Fe?Hn.emit("rejectionHandled",e):Wn("rejectionhandled",e,t.value)}))},tr=function(t,e,n){return function(r){t(e,r,n)}},er=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,qn(t,!0))},nr=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Fn("Promise can't be resolved itself");var r=Yn(e);r?wn((function(){var n={done:!1};try{r.call(e,tr(nr,n,t),tr(er,n,t))}catch(e){er(n,e,t)}})):(t.value=e,t.state=1,qn(t,!1))}catch(e){er({done:!1},e,t)}}};Zn&&(zn=function(t){me(this,zn,An),Ot(t),kn.call(this);var e=On(this);try{t(tr(nr,e),tr(er,e))}catch(t){er(e,t)}},(kn=function(t){_n(this,{type:An,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=fe(zn.prototype,{then:function(t,e){var n=Mn(this),r=Pn(Oe(this,zn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Fe?Hn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&qn(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Cn=function(){var t=new kn,e=On(t);this.promise=t,this.resolve=tr(nr,e),this.reject=tr(er,e)},vn.f=Pn=function(t){return t===zn||t===Dn?new Cn(t):$n(t)},"function"==typeof ce&&(Ln=ce.prototype.then,nt(ce.prototype,"then",(function(t,e){var n=this;return new zn((function(t,e){Ln.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Nn&&At({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return bn(zn,Nn.apply(i,arguments))}}))),At({global:!0,wrap:!0,forced:Zn},{Promise:zn}),pe(zn,An,!1),ge(An),Dn=at(An),At({target:An,stat:!0,forced:Zn},{reject:function(t){var e=Pn(this);return e.reject.call(void 0,t),e.promise}}),At({target:An,stat:!0,forced:Zn},{resolve:function(t){return bn(this,t)}}),At({target:An,stat:!0,forced:Vn},{all:function(t){var e=this,n=Pn(e),r=n.resolve,i=n.reject,a=xn((function(){var n=Ot(e.resolve),a=[],o=0,s=1;Ee(t,(function(t){var l=o++,c=!1;a.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,a[l]=t,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(t){var e=this,n=Pn(e),r=n.reject,i=xn((function(){var i=Ot(e.resolve);Ee(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),At({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});n((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),o=new L(r||[]);return a._invoke=function(t,e,n){var r=u;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=f(t,e,n);if("normal"===l.type){if(r=n.done?d:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u="suspendedStart",h="suspendedYield",p="executing",d="completed",g={};function m(){}function w(){}function y(){}var v={};v[a]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(T([])));x&&x!==n&&r.call(x,a)&&(v=x);var S=y.prototype=m.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function R(t,e){function n(i,a,o,s){var l=f(t[i],t,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}var i;this._invoke=function(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=f(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return w.prototype=S.constructor=y,y.constructor=w,w.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(R.prototype),R.prototype[o]=function(){return this},t.AsyncIterator=R,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new R(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),l(S,s,"Generator"),S[a]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function rr(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ir(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){rr(a,r,i,o,s,"next",t)}function s(t){rr(a,r,i,o,s,"throw",t)}o(void 0)}))}}function ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||or(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(t,e){if(t){if("string"==typeof t)return sr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sr(t,e):void 0}}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=or(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var cr={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};cr.Zip.CompressionMethod={STORE:0,DEFLATE:8},cr.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},cr.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},cr.Zip.FileHeaderSignature=[80,75,1,2],cr.Zip.LocalFileHeaderSignature=[80,75,3,4],cr.Zip.CentralDirectorySignature=[80,75,5,6],cr.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var n,r=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=cr.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case cr.Zip.CompressionMethod.STORE:break;case cr.Zip.CompressionMethod.DEFLATE:i=cr.CRC32.calc(t),t=this.deflateWithOption(t,e),n=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:n,encrypted:!1,size:r,crc32:i})},cr.Zip.prototype.setPassword=function(t){this.password=t},cr.Zip.prototype.compress=function(){var t,e,n,r,i,a,o,s,l,c,f,u,h,p,d,g,m,w,y,v,b,x,S,E,R,k,C=this.files,D=0,L=0;for(S=0,E=C.length;S<E;++S){if(p=(t=C[S]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=cr.CRC32.calc(t.buffer),t.option.compressionMethod){case cr.Zip.CompressionMethod.STORE:break;case cr.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(x=this.createEncryptionKey(t.option.password||this.password),v=t.buffer,(b=new Uint8Array(v.length+12)).set(v,12),v=b,R=0;R<12;++R)v[R]=this.encode(x,11===S?255&t.crc32:256*Math.random()|0);for(k=v.length;R<k;++R)v[R]=this.encode(x,v[R]);t.buffer=v}D+=30+p+t.buffer.length,L+=46+p+g}for(a=22+(this.comment?this.comment.length:0),e=new Uint8Array(D+L+a),n=0,i=(r=D)+L,S=0,E=C.length;S<E;++S)p=(t=C[S]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,o=n,e[n++]=cr.Zip.LocalFileHeaderSignature[0],e[n++]=cr.Zip.LocalFileHeaderSignature[1],e[n++]=cr.Zip.LocalFileHeaderSignature[2],e[n++]=cr.Zip.LocalFileHeaderSignature[3],e[r++]=cr.Zip.FileHeaderSignature[0],e[r++]=cr.Zip.FileHeaderSignature[1],e[r++]=cr.Zip.FileHeaderSignature[2],e[r++]=cr.Zip.FileHeaderSignature[3],20,e[r++]=20,e[r++]=t.option.os||cr.Zip.OperatingSystem.MSDOS,e[n++]=e[r++]=20,e[n++]=e[r++]=0,s=0,(t.option.password||this.password)&&(s|=cr.Zip.Flags.ENCRYPT),e[n++]=e[r++]=255&s,e[n++]=e[r++]=s>>8&255,l=t.option.compressionMethod,e[n++]=e[r++]=255&l,e[n++]=e[r++]=l>>8&255,c=t.option.date||new Date,e[n++]=e[r++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,e[n++]=e[r++]=c.getHours()<<3|c.getMinutes()>>3,e[n++]=e[r++]=(c.getMonth()+1&7)<<5|c.getDate(),e[n++]=e[r++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,f=t.crc32,e[n++]=e[r++]=255&f,e[n++]=e[r++]=f>>8&255,e[n++]=e[r++]=f>>16&255,e[n++]=e[r++]=f>>24&255,u=t.buffer.length,e[n++]=e[r++]=255&u,e[n++]=e[r++]=u>>8&255,e[n++]=e[r++]=u>>16&255,e[n++]=e[r++]=u>>24&255,h=t.size,e[n++]=e[r++]=255&h,e[n++]=e[r++]=h>>8&255,e[n++]=e[r++]=h>>16&255,e[n++]=e[r++]=h>>24&255,e[n++]=e[r++]=255&p,e[n++]=e[r++]=p>>8&255,e[n++]=e[r++]=255&d,e[n++]=e[r++]=d>>8&255,e[r++]=255&g,e[r++]=g>>8&255,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,(m=t.option.filename)&&(e.set(m,n),e.set(m,r),n+=p,r+=p),(w=t.option.extraField)&&(e.set(w,n),e.set(w,r),n+=d,r+=d),(y=t.option.comment)&&(e.set(y,r),r+=g),e.set(t.buffer,n),n+=t.buffer.length;return e[i++]=cr.Zip.CentralDirectorySignature[0],e[i++]=cr.Zip.CentralDirectorySignature[1],e[i++]=cr.Zip.CentralDirectorySignature[2],e[i++]=cr.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&L,e[i++]=L>>8&255,e[i++]=L>>16&255,e[i++]=L>>24&255,e[i++]=255&D,e[i++]=D>>8&255,e[i++]=D>>16&255,e[i++]=D>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},cr.Zip.prototype.deflateWithOption=function(t,e){return new cr.RawDeflate(t,e.deflateOption).compress()},cr.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},cr.Zip.prototype.encode=function(t,e){var n=this.getByte(t);return this.updateKeys(t,e),n^e},cr.Zip.prototype.updateKeys=function(t,e){t[0]=cr.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=cr.CRC32.single(t[2],t[1]>>>24)},cr.Zip.prototype.createEncryptionKey=function(t){var e,n,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),e=0,n=t.length;e<n;++e)this.updateKeys(r,255&t[e]);return r},cr.Huffman.buildHuffmanTable=function(t){var e,n,r,i,a,o,s,l,c,f,u,h=t.length,p=0,d=Number.POSITIVE_INFINITY;for(l=0,c=h;l<c;++l)t[l]>p&&(p=t[l]),t[l]<d&&(d=t[l]);for(e=1<<p,n=new Uint32Array(e),r=1,i=0,a=2;r<=p;){for(l=0;l<h;++l)if(t[l]===r){for(o=0,s=i,f=0;f<r;++f)o=o<<1|1&s,s>>=1;for(u=r<<16|l,f=o;f<e;f+=a)n[f]=u;++i}++r,i<<=1,a<<=1}return[n,p,d]};var fr=cr.Huffman.buildHuffmanTable;cr.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=cr.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case cr.RawInflate.BufferType.BLOCK:this.op=cr.RawInflate.MaxBackwardLength,this.output=new Uint8Array(cr.RawInflate.MaxBackwardLength+this.bufferSize+cr.RawInflate.MaxCopyLength);break;case cr.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},cr.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},cr.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case cr.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case cr.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},cr.RawInflate.MaxBackwardLength=32768,cr.RawInflate.MaxCopyLength=258,cr.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cr.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),cr.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),cr.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),cr.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),cr.RawInflate.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return fr(n)}(),cr.RawInflate.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return fr(n)}(),cr.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},cr.RawInflate.prototype.readBits=function(t){var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;if(a+(t-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<t;)n|=i[a++]<<r,r+=8;return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,e},cr.RawInflate.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,l=t[0],c=t[1];i<c&&!(o>=s);)r|=a[o++]<<i,i+=8;if((n=(e=l[r&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&e},cr.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,n=this.input,r=this.ip,i=this.output,a=this.op,o=n.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=o)throw new Error("invalid uncompressed block header: LEN");if(t=n[r++]|n[r++]<<8,r+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(t===~(n[r++]|n[r++]<<8))throw new Error("invalid uncompressed block header: length verify");if(r+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case cr.RawInflate.BufferType.BLOCK:for(;a+t>i.length;)t-=e=s-a,i.set(n.subarray(r,r+e),a),a+=e,r+=e,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case cr.RawInflate.BufferType.ADAPTIVE:for(;a+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(n.subarray(r,r+t),a),a+=t,r+=t,this.ip=r,this.op=a,this.output=i},cr.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case cr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(cr.RawInflate.FixedLiteralLengthTable,cr.RawInflate.FixedDistanceTable);break;case cr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(cr.RawInflate.FixedLiteralLengthTable,cr.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},cr.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i,a,o,s,l,c=this.readBits(5)+257,f=this.readBits(5)+1,u=this.readBits(4)+4,h=new Uint8Array(cr.RawInflate.Order.length);for(s=0;s<u;++s)h[cr.RawInflate.Order[s]]=this.readBits(3);for(t=fr(h),r=new Uint8Array(c+f),s=0,l=c+f;s<l;)switch(i=this.readCodeByTable(t)){case 16:for(o=3+this.readBits(2);o--;)r[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)r[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)r[s++]=0;a=0;break;default:r[s++]=i,a=i}switch(e=fr(r.subarray(0,c)),n=fr(r.subarray(c)),this.bufferType){case cr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,n);break;case cr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,n);break;default:throw new Error("invalid inflate mode")}},cr.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=n.length-cr.RawInflate.MaxCopyLength,c=cr.RawInflate.LengthCodeTable,f=cr.RawInflate.LengthExtraTable,u=cr.RawInflate.DistCodeTable,h=cr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=l&&(this.op=r,n=this.expandBufferBlock(),r=this.op),n[r++]=i;else for(s=c[a=i-257],f[a]>0&&(s+=this.readBits(f[a])),o=u[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),r>=l&&(this.op=r,n=this.expandBufferBlock(),r=this.op);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},cr.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=n.length,c=cr.RawInflate.LengthCodeTable,f=cr.RawInflate.LengthExtraTable,u=cr.RawInflate.DistCodeTable,h=cr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=l&&(l=(n=this.expandBufferAdaptive()).length),n[r++]=i;else for(s=c[a=i-257],f[a]>0&&(s+=this.readBits(f[a])),o=u[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),r+s>l&&(l=(n=this.expandBufferAdaptive()).length);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},cr.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-cr.RawInflate.MaxBackwardLength),n=this.op-cr.RawInflate.MaxBackwardLength,r=this.output;return e.set(r.subarray(cr.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,r.set(r.subarray(n,n+cr.RawInflate.MaxBackwardLength)),this.op=cr.RawInflate.MaxBackwardLength,r},cr.RawInflate.prototype.expandBufferAdaptive=function(t){var e,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(e=new Uint8Array(n)).set(o),this.output=e,this.output},cr.RawInflate.prototype.concatBufferBlock=function(){var t,e,n,r,i,a=0,o=this.totalpos+(this.op-cr.RawInflate.MaxBackwardLength),s=this.output,l=this.blocks,c=new Uint8Array(o);if(0===l.length)return this.output.subarray(cr.RawInflate.MaxBackwardLength,this.op);for(e=0,n=l.length;e<n;++e)for(r=0,i=(t=l[e]).length;r<i;++r)c[a++]=t[r];for(e=cr.RawInflate.MaxBackwardLength,n=this.op;e<n;++e)c[a++]=s[e];return this.blocks=[],this.buffer=c,this.buffer},cr.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};var ur;fr=cr.Huffman.buildHuffmanTable;let hr;async function pr(t){if("undefined"!=typeof gapi&&gapi.auth2&&gapi.auth2.getAuthInstance())return void console.warn("oAuth has already been initialized");gapi.apiKey=t.apiKey;const e=Object.assign({},t);return e.scope||(e.scope="profile"),t.client_id||(t.client_id=t.clientId),await async function(t){return new Promise((function(e,n){gapi.load(t,{callback:e,onerror:n})}))}("auth2"),new Promise((function(t,n){gapi.auth2.init(e).then(t,n)}))}async function dr(){return gapi.auth2.getAuthInstance().signOut()}cr.RawInflateStream=function(t,e,n){this.blocks=[],this.bufferSize=n||65e3,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=cr.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},cr.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},cr.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},cr.RawInflateStream.prototype.decompress=function(t,e){var n=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!n;)switch(this.status){case cr.RawInflateStream.Status.INITIALIZED:case cr.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(n=!0);break;case cr.RawInflateStream.Status.BLOCK_HEADER_END:case cr.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case cr.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(n=!0);break;case cr.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(n=!0);break;case cr.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(n=!0)}break;case cr.RawInflateStream.Status.BLOCK_BODY_END:case cr.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case cr.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(n=!0);break;case cr.RawInflateStream.BlockType.FIXED:case cr.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(n=!0)}break;case cr.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?n=!0:this.status=cr.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},cr.RawInflateStream.MaxBackwardLength=32768,cr.RawInflateStream.MaxCopyLength=258,cr.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cr.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),cr.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),cr.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),cr.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),cr.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return fr(n)}(),cr.RawInflateStream.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return fr(n)}(),cr.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=cr.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=cr.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=cr.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=cr.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=cr.RawInflateStream.Status.BLOCK_HEADER_END},cr.RawInflateStream.prototype.readBits=function(t){for(var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;r<t;){if(i.length<=a)return-1;n|=(e=i[a++])<<r,r+=8}return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,e},cr.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=t[0],l=t[1];i<l;){if(a.length<=o)return-1;r|=a[o++]<<i,i+=8}if((n=(e=s[r&(1<<l)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&e},cr.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,n=this.ip;if(this.status=cr.RawInflateStream.Status.BLOCK_BODY_START,n+4>=e.length)return-1;if((t=e[n++]|e[n++]<<8)===~(e[n++]|e[n++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=n,this.blockLength=t,this.status=cr.RawInflateStream.Status.BLOCK_BODY_END},cr.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,n=this.output,r=this.op,i=this.blockLength;for(this.status=cr.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(r===n.length&&(n=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=r,this.blockLength=i+1,-1;n[r++]=t[e++]}return i<0&&(this.status=cr.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=r,0},cr.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=cr.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=cr.RawInflateStream.FixedLiteralLengthTable,this.distTable=cr.RawInflateStream.FixedDistanceTable,this.status=cr.RawInflateStream.Status.BLOCK_BODY_END,0},cr.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},cr.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},cr.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i=new Uint8Array(cr.RawInflateStream.Order.length);if(this.status=cr.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,n=this.readBits(4)+4,t<0||e<0||n<0)return this.restore_(),-1;try{(function(){var a,o,s,l,c,f,u=0;for(c=0;c<n;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");i[cr.RawInflateStream.Order[c]]=a}for(r=fr(i),l=new Uint8Array(t+e),c=0,f=t+e;c<f;){if((o=this.readCodeByTable(r))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=u;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=0;u=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)l[c++]=0;u=0;break;default:l[c++]=o,u=o}}this.litlenTable=fr(l.subarray(0,t)),this.distTable=fr(l.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=cr.RawInflateStream.Status.BLOCK_BODY_END,0},cr.RawInflateStream.prototype.decodeHuffman=function(){var t,e,n,r,i,a=this.output,o=this.op,s=this.litlenTable,l=this.distTable,c=a.length;for(this.status=cr.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===t)break;if(t<256)o===c&&(c=(a=this.expandBuffer()).length),a[o++]=t;else{if(e=t-257,r=cr.RawInflateStream.LengthCodeTable[e],cr.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(cr.RawInflateStream.LengthExtraTable[e]))<0)return this.op=o,this.restore_(),-1;r+=i}if((t=this.readCodeByTable(l))<0)return this.op=o,this.restore_(),-1;if(n=cr.RawInflateStream.DistCodeTable[t],cr.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(cr.RawInflateStream.DistExtraTable[t]))<0)return this.op=o,this.restore_(),-1;n+=i}for(o+r>=c&&(c=(a=this.expandBuffer()).length);r--;)a[o]=a[o++-n];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=cr.RawInflateStream.Status.DECODE_BLOCK_END},cr.RawInflateStream.prototype.expandBuffer=function(t){var e,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(e=new Uint8Array(n)).set(o),this.output=e,this.output},cr.RawInflateStream.prototype.concatBuffer=function(){var t,e,n=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,n)):this.output.subarray(this.sp,n),this.sp=n,n>cr.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=cr.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+cr.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(n-cr.RawInflateStream.MaxBackwardLength,n))),t},cr.Inflate=function(t,e){var n,r;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),n=t[this.ip++],r=t[this.ip++],15&n){case cr.CompressionMethod.DEFLATE:this.method=cr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.rawinflate=new cr.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},cr.Inflate.BufferType=cr.RawInflate.BufferType,cr.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==cr.Adler32(t))throw new Error("invalid adler-32 checksum");return t},cr.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new cr.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},cr.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var n=new Uint8Array(this.input.length+t.length);n.set(this.input,0),n.set(t,this.input.length),this.input=n}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},cr.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,n=e[t++],r=e[t++];if(void 0===n||void 0===r)return-1;switch(15&n){case cr.CompressionMethod.DEFLATE:this.method=cr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.ip=t},cr.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},cr.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},cr.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},cr.Gunzip.prototype.decodeMember=function(){var t,e,n,r,i,a,o,s,l,c=new cr.GunzipMember,f=this.input,u=this.ip;if(c.id1=f[u++],c.id2=f[u++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=f[u++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=f[u++],s=f[u++]|f[u++]<<8|f[u++]<<16|f[u++]<<24,c.mtime=new Date(1e3*s),c.xfl=f[u++],c.os=f[u++],(c.flg&cr.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=f[u++]|f[u++]<<8,u=this.decodeSubField(u,c.xlen)),(c.flg&cr.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=f[u++])>0;)o[a++]=String.fromCharCode(i);c.name=o.join("")}if((c.flg&cr.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=f[u++])>0;)o[a++]=String.fromCharCode(i);c.comment=o.join("")}if((c.flg&cr.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&cr.CRC32.calc(f,0,u),c.crc16!==(f[u++]|f[u++]<<8)))throw new Error("invalid header crc16");if(t=f[f.length-4]|f[f.length-3]<<8|f[f.length-2]<<16|f[f.length-1]<<24,f.length-u-4-4<512*t&&(r=t),e=new cr.RawInflate(f,{index:u,bufferSize:r}),c.data=n=e.decompress(),u=e.ip,c.crc32=l=(f[u++]|f[u++]<<8|f[u++]<<16|f[u++]<<24)>>>0,cr.CRC32.calc(n)!==l)throw new Error("invalid CRC-32 checksum: 0x"+cr.CRC32.calc(n).toString(16)+" / 0x"+l.toString(16));if(c.isize=t=(f[u++]|f[u++]<<8|f[u++]<<16|f[u++]<<24)>>>0,(4294967295&n.length)!==t)throw new Error("invalid input size: "+(4294967295&n.length)+" / "+t);this.member.push(c),this.ip=u},cr.Gunzip.prototype.decodeSubField=function(t,e){return t+e},cr.Gunzip.prototype.concatMember=function(){var t,e,n,r=this.member,i=0,a=0;for(t=0,e=r.length;t<e;++t)a+=r[t].data.length;for(n=new Uint8Array(a),t=0;t<e;++t)n.set(r[t].data,i),i+=r[t].data.length;return n},cr.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},cr.GunzipMember.prototype.getName=function(){return this.name},cr.GunzipMember.prototype.getData=function(){return this.data},cr.GunzipMember.prototype.getMtime=function(){return this.mtime},cr.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},cr.Gzip.DefaultBufferSize=32768,cr.Gzip.prototype.compress=function(){var t,e,n,r,i,a,o,s,l=new Uint8Array(cr.Gzip.DefaultBufferSize),c=0,f=this.input,u=this.ip,h=this.filename,p=this.comment;if(l[c++]=31,l[c++]=139,l[c++]=8,t=0,this.flags.fname&&(t|=cr.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=cr.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=cr.Gzip.FlagsMask.FHCRC),l[c++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,l[c++]=255&e,l[c++]=e>>>8&255,l[c++]=e>>>16&255,l[c++]=e>>>24&255,l[c++]=0,l[c++]=cr.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=h.length;o<s;++o)(a=h.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}return this.flags.fhcrc&&(n=65535&cr.CRC32.calc(l,0,c),l[c++]=255&n,l[c++]=n>>>8&255),this.deflateOptions.outputBuffer=l,this.deflateOptions.outputIndex=c,l=(i=new cr.RawDeflate(f,this.deflateOptions)).compress(),(c=i.op)+8>l.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(l.buffer)),l=this.output):l=new Uint8Array(l.buffer),r=cr.CRC32.calc(f),l[c++]=255&r,l[c++]=r>>>8&255,l[c++]=r>>>16&255,l[c++]=r>>>24&255,s=f.length,l[c++]=255&s,l[c++]=s>>>8&255,l[c++]=s>>>16&255,l[c++]=s>>>24&255,this.ip=u,c<l.length&&(this.output=l=l.subarray(0,c)),l},cr.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},cr.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},cr.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},cr.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},cr.Heap.prototype.getChild=function(t){return 2*t+2},cr.Heap.prototype.push=function(t,e){var n,r,i,a=this.buffer;for(n=this.length,a[this.length++]=e,a[this.length++]=t;n>0&&(r=this.getParent(n),a[n]>a[r]);)i=a[n],a[n]=a[r],a[r]=i,i=a[n+1],a[n+1]=a[r+1],a[r+1]=i,n=r;return this.length},cr.Heap.prototype.pop=function(){var t,e,n,r,i,a=this.buffer;for(e=a[0],t=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((r=this.getChild(i))>=this.length)&&(r+2<this.length&&a[r+2]>a[r]&&(r+=2),a[r]>a[i]);)n=a[i],a[i]=a[r],a[r]=n,n=a[i+1],a[i+1]=a[r+1],a[r+1]=n,i=r;return{index:t,value:e,length:this.length}},cr.RawDeflate=function(t,e){this.compressionType=cr.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},cr.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},cr.RawDeflate.Lz77MinLength=3,cr.RawDeflate.Lz77MaxLength=258,cr.RawDeflate.WindowSize=32768,cr.RawDeflate.MaxCodeLength=16,cr.RawDeflate.HUFMAX=286,cr.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),cr.RawDeflate.prototype.compress=function(){var t,e,n,r=this.input;switch(this.compressionType){case cr.RawDeflate.CompressionType.NONE:for(e=0,n=r.length;e<n;)e+=(t=r.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===n);break;case cr.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case cr.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},cr.RawDeflate.prototype.makeNocompressBlock=function(t,e){var n,r,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+t.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),n=e?1:0,r=cr.RawDeflate.CompressionType.NONE,o[s++]=n|r<<1,a=65536+~(i=t.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(t,s),s+=t.length,o=o.subarray(0,s),this.op=s,this.output=o,o},cr.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var n,r,i,a=new cr.BitStream(new Uint8Array(this.output.buffer),this.op);return n=e?1:0,r=cr.RawDeflate.CompressionType.FIXED,a.writeBits(n,1,!0),a.writeBits(r,2,!0),i=this.lz77(t),this.fixedHuffman(i,a),a.finish()},cr.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var n,r,i,a,o,s,l,c,f,u,h,p,d,g,m,w,y,v=new cr.BitStream(new Uint8Array(this.output.buffer),this.op),b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(n=e?1:0,r=cr.RawDeflate.CompressionType.DYNAMIC,v.writeBits(n,1,!0),v.writeBits(r,2,!0),i=this.lz77(t),l=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(l),f=this.getLengths_(this.freqsDist,7),u=this.getCodesFromLengths_(f),a=286;a>257&&0===l[a-1];a--);for(o=30;o>1&&0===f[o-1];o--);for(h=this.getTreeSymbols_(a,l,o,f),p=this.getLengths_(h.freqs,7),w=0;w<19;w++)x[w]=p[b[w]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),v.writeBits(a-257,5,!0),v.writeBits(o-1,5,!0),v.writeBits(s-4,4,!0),w=0;w<s;w++)v.writeBits(x[w],3,!0);for(w=0,y=h.codes.length;w<y;w++)if(g=h.codes[w],v.writeBits(d[g],p[g],!0),g>=16){switch(w++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}v.writeBits(h.codes[w],m,!0)}return this.dynamicHuffman(i,[c,l],[u,f],v),v.finish()},cr.RawDeflate.prototype.dynamicHuffman=function(t,e,n,r){var i,a,o,s,l,c,f,u;for(l=e[0],c=e[1],f=n[0],u=n[1],i=0,a=t.length;i<a;++i)if(o=t[i],r.writeBits(l[o],c[o],!0),o>256)r.writeBits(t[++i],t[++i],!0),s=t[++i],r.writeBits(f[s],u[s],!0),r.writeBits(t[++i],t[++i],!0);else if(256===o)break;return r},cr.RawDeflate.prototype.fixedHuffman=function(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],cr.BitStream.prototype.writeBits.apply(e,cr.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++n],t[++n],!0),e.writeBits(t[++n],5),e.writeBits(t[++n],t[++n],!0);else if(256===i)break;return e},cr.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},cr.RawDeflate.Lz77Match.LengthCodeTable=(ur=function(){var t,e,n=[];for(t=3;t<=258;t++)e=r(t),n[t]=e[2]<<24|e[1]<<16|e[0];function r(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return n}(),new Uint32Array(ur)),cr.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},cr.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,n=this.backwardDistance,r=[],i=0;return t=cr.RawDeflate.Lz77Match.LengthCodeTable[e],r[i++]=65535&t,r[i++]=t>>16&255,r[i++]=t>>24,t=this.getDistanceCode_(n),r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],r},cr.RawDeflate.prototype.lz77=function(t){var e,n,r,i,a,o,s,l,c,f={},u=cr.RawDeflate.WindowSize,h=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),w=this.lazy;function y(t,e){var n,r,i=t.toLz77Array();for(n=0,r=i.length;n<r;++n)h[p++]=i[n];g[i[0]]++,m[i[3]]++,d=t.length+e-1,l=null}for(g[256]=1,e=0,n=t.length;e<n;++e){for(a=0,r=0,i=cr.RawDeflate.Lz77MinLength;r<i&&e+r!==n;++r)a=a<<8|t[e+r];if(void 0===f[a]&&(f[a]=[]),o=f[a],d-- >0)o.push(e);else{for(;o.length>0&&e-o[0]>u;)o.shift();if(e+cr.RawDeflate.Lz77MinLength>=n){for(l&&y(l,-1),r=0,i=n-e;r<i;++r)c=t[e+r],h[p++]=c,++g[c];break}o.length>0?(s=this.searchLongestMatch_(t,e,o),l?l.length<s.length?(c=t[e-1],h[p++]=c,++g[c],y(s,0)):y(l,-1):s.length<w?l=s:y(s,0)):l?y(l,-1):(c=t[e],h[p++]=c,++g[c]),o.push(e)}}return h[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,h.subarray(0,p)},cr.RawDeflate.prototype.searchLongestMatch_=function(t,e,n){var r,i,a,o,s,l,c=0,f=t.length;t:for(o=0,l=n.length;o<l;o++){if(r=n[l-o-1],a=cr.RawDeflate.Lz77MinLength,c>cr.RawDeflate.Lz77MinLength){for(s=c;s>cr.RawDeflate.Lz77MinLength;s--)if(t[r+s-1]!==t[e+s-1])continue t;a=c}for(;a<cr.RawDeflate.Lz77MaxLength&&e+a<f&&t[r+a]===t[e+a];)++a;if(a>c&&(i=r,c=a),a===cr.RawDeflate.Lz77MaxLength)break}return new cr.RawDeflate.Lz77Match(c,e-i)},cr.RawDeflate.prototype.getTreeSymbols_=function(t,e,n,r){var i,a,o,s,l,c,f=new Uint32Array(t+n),u=new Uint32Array(316),h=new Uint8Array(19);for(a=0,i=0;i<t;i++)f[a++]=e[i];for(i=0;i<n;i++)f[a++]=r[i];for(l=0,i=0,s=f.length;i<s;i+=a){for(a=1;i+a<s&&f[i+a]===f[i];++a);if(o=a,0===f[i])if(o<3)for(;o-- >0;)u[l++]=0,h[0]++;else for(;o>0;)(c=o<138?o:138)>o-3&&c<o&&(c=o-3),c<=10?(u[l++]=17,u[l++]=c-3,h[17]++):(u[l++]=18,u[l++]=c-11,h[18]++),o-=c;else if(u[l++]=f[i],h[f[i]]++,--o<3)for(;o-- >0;)u[l++]=f[i],h[f[i]]++;else for(;o>0;)(c=o<6?o:6)>o-3&&c<o&&(c=o-3),u[l++]=16,u[l++]=c-3,h[16]++,o-=c}return{codes:u.subarray(0,l),freqs:h}},cr.RawDeflate.prototype.getLengths_=function(t,e){var n,r,i,a,o,s=t.length,l=new cr.Heap(2*cr.RawDeflate.HUFMAX),c=new Uint8Array(s);for(a=0;a<s;++a)t[a]>0&&l.push(a,t[a]);if(n=new Array(l.length/2),r=new Uint32Array(l.length/2),1===n.length)return c[l.pop().index]=1,c;for(a=0,o=l.length/2;a<o;++a)n[a]=l.pop(),r[a]=n[a].value;for(i=this.reversePackageMerge_(r,r.length,e),a=0,o=n.length;a<o;++a)c[n[a].index]=i[a];return c},cr.RawDeflate.prototype.reversePackageMerge_=function(t,e,n){var r,i,a,o,s,l=new Uint16Array(n),c=new Uint8Array(n),f=new Uint8Array(e),u=new Array(n),h=new Array(n),p=new Array(n),d=(1<<n)-e,g=1<<n-1;function m(t){var n=h[t][p[t]];n===e?(m(t+1),m(t+1)):--f[n],++p[t]}for(l[n-1]=e,i=0;i<n;++i)d<g?c[i]=0:(c[i]=1,d-=g),d<<=1,l[n-2-i]=(l[n-1-i]/2|0)+e;for(l[0]=c[0],u[0]=new Array(l[0]),h[0]=new Array(l[0]),i=1;i<n;++i)l[i]>2*l[i-1]+c[i]&&(l[i]=2*l[i-1]+c[i]),u[i]=new Array(l[i]),h[i]=new Array(l[i]);for(r=0;r<e;++r)f[r]=n;for(a=0;a<l[n-1];++a)u[n-1][a]=t[a],h[n-1][a]=a;for(r=0;r<n;++r)p[r]=0;for(1===c[n-1]&&(--f[0],++p[n-1]),i=n-2;i>=0;--i){for(r=0,o=0,s=p[i+1],a=0;a<l[i];a++)(o=u[i+1][s]+u[i+1][s+1])>t[r]?(u[i][a]=o,h[i][a]=e,s+=2):(u[i][a]=t[r],h[i][a]=r,++r);p[i]=0,1===c[i]&&m(i)}return f},cr.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,n,r,i,a=new Uint16Array(t.length),o=[],s=[],l=0;for(e=0,n=t.length;e<n;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,n=cr.RawDeflate.MaxCodeLength;e<=n;e++)s[e]=l,l+=0|o[e],l<<=1;for(e=0,n=t.length;e<n;e++)for(l=s[t[e]],s[t[e]]+=1,a[e]=0,r=0,i=t[e];r<i;r++)a[e]=a[e]<<1|1&l,l>>>=1;return a},cr.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},cr.Unzip.CompressionMethod=cr.Zip.CompressionMethod,cr.Unzip.FileHeaderSignature=cr.Zip.FileHeaderSignature,cr.Unzip.LocalFileHeaderSignature=cr.Zip.LocalFileHeaderSignature,cr.Unzip.CentralDirectorySignature=cr.Zip.CentralDirectorySignature,cr.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},cr.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==cr.Unzip.FileHeaderSignature[0]||t[e++]!==cr.Unzip.FileHeaderSignature[1]||t[e++]!==cr.Unzip.FileHeaderSignature[2]||t[e++]!==cr.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},cr.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},cr.Unzip.LocalFileHeader.Flags=cr.Zip.Flags,cr.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==cr.Unzip.LocalFileHeaderSignature[0]||t[e++]!==cr.Unzip.LocalFileHeaderSignature[1]||t[e++]!==cr.Unzip.LocalFileHeaderSignature[2]||t[e++]!==cr.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},cr.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===cr.Unzip.CentralDirectorySignature[0]&&e[t+1]===cr.Unzip.CentralDirectorySignature[1]&&e[t+2]===cr.Unzip.CentralDirectorySignature[2]&&e[t+3]===cr.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},cr.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==cr.Unzip.CentralDirectorySignature[0]||e[t++]!==cr.Unzip.CentralDirectorySignature[1]||e[t++]!==cr.Unzip.CentralDirectorySignature[2]||e[t++]!==cr.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},cr.Unzip.prototype.parseFileHeader=function(){var t,e,n,r,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,n=0,r=this.totalEntries;n<r;++n)(e=new cr.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[n]=e,a[e.filename]=n;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},cr.Unzip.prototype.getFileData=function(t,e){e=e||{};var n,r,i,a,o,s,l,c,f=this.input,u=this.fileHeaderList;if(u||this.parseFileHeader(),void 0===u[t])throw new Error("wrong index");if(r=u[t].relativeOffset,(n=new cr.Unzip.LocalFileHeader(this.input,r)).parse(),r+=n.length,i=n.compressedSize,0!=(n.flags&cr.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),l=r,c=r+12;l<c;++l)this.decode(s,f[l]);for(l=r+=12,c=r+(i-=12);l<c;++l)f[l]=this.decode(s,f[l])}switch(n.compression){case cr.Unzip.CompressionMethod.STORE:a=this.input.subarray(r,r+i);break;case cr.Unzip.CompressionMethod.DEFLATE:a=new cr.RawInflate(this.input,{index:r,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=cr.CRC32.calc(a),n.crc32!==o))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+o.toString(16));return a},cr.Unzip.prototype.getFilenames=function(){var t,e,n,r=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(n=this.fileHeaderList).length;t<e;++t)r[t]=n[t].filename;return r},cr.Unzip.prototype.decompress=function(t,e){var n;if(this.filenameToIndex||this.parseFileHeader(),void 0===(n=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(n,e)},cr.Unzip.prototype.setPassword=function(t){this.password=t},cr.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},cr.Unzip.prototype.updateKeys=cr.Zip.prototype.updateKeys,cr.Unzip.prototype.createDecryptionKey=cr.Zip.prototype.createEncryptionKey,cr.Unzip.prototype.getByte=cr.Zip.prototype.getByte,cr.Util.stringToByteArray=function(t){var e,n,r=t.split("");for(e=0,n=r.length;e<n;e++)r[e]=(255&r[e].charCodeAt(0))>>>0;return r},cr.Adler32=function(t){return"string"==typeof t&&(t=cr.Util.stringToByteArray(t)),cr.Adler32.update(1,t)},cr.Adler32.update=function(t,e){for(var n,r=65535&t,i=t>>>16&65535,a=e.length,o=0;a>0;){a-=n=a>cr.Adler32.OptimizationParameter?cr.Adler32.OptimizationParameter:a;do{i+=r+=e[o++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},cr.Adler32.OptimizationParameter=1024,cr.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(cr.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},cr.BitStream.DefaultBlockSize=32768,cr.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,n=new Uint8Array(e<<1);return n.set(t),this.buffer=n},cr.BitStream.prototype.writeBits=function(t,e,n){var r,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(n&&e>1&&(t=e>8?function(t){return cr.BitStream.ReverseTable[255&t]<<24|cr.BitStream.ReverseTable[t>>>8&255]<<16|cr.BitStream.ReverseTable[t>>>16&255]<<8|cr.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:cr.BitStream.ReverseTable[t]>>8-e),e+o<8)s=s<<e|t,o+=e;else for(r=0;r<e;++r)s=s<<1|t>>e-r-1&1,8==++o&&(o=0,i[a++]=cr.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},cr.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=cr.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},cr.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,n=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--n;return(e<<n&255)>>>0}(t);return e}(),cr.CRC32.calc=function(t,e,n){return cr.CRC32.update(t,0,e,n)},cr.CRC32.update=function(t,e,n,r){var i=cr.CRC32.Table,a="number"==typeof n?n:n=0,o="number"==typeof r?r:t.length;for(e^=4294967295,a=7&o;a--;++n)e=e>>>8^i[255&(e^t[n])];for(a=o>>3;a--;n+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[n])])>>>8^i[255&(e^t[n+1])])>>>8^i[255&(e^t[n+2])])>>>8^i[255&(e^t[n+3])])>>>8^i[255&(e^t[n+4])])>>>8^i[255&(e^t[n+5])])>>>8^i[255&(e^t[n+6])])>>>8^i[255&(e^t[n+7])];return(4294967295^e)>>>0},cr.CRC32.single=function(t,e){return(cr.CRC32.Table[255&(t^e)]^t>>>8)>>>0},cr.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],cr.CRC32.Table=new Uint32Array(cr.CRC32.Table_),cr.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(cr.Deflate.DefaultBufferSize),this.compressionType=cr.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var n,r={};for(n in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)r[n]=e[n];r.outputBuffer=this.output,this.rawDeflate=new cr.RawDeflate(this.input,r)},cr.Deflate.DefaultBufferSize=32768,cr.Deflate.CompressionType=cr.RawDeflate.CompressionType,cr.Deflate.compress=function(t,e){return new cr.Deflate(t,e).compress()},cr.Deflate.prototype.compress=function(){var t,e,n,r,i,a,o,s=0;switch(o=this.output,t=cr.CompressionMethod.DEFLATE){case cr.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(cr.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(n=e<<4|t,o[s++]=n,0,t){case cr.CompressionMethod.DEFLATE:switch(this.compressionType){case cr.Deflate.CompressionType.NONE:i=0;break;case cr.Deflate.CompressionType.FIXED:i=1;break;case cr.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return r=i<<6|0,r|=31-(256*n+r)%31,o[s++]=r,a=cr.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},hr="undefined"==typeof btoa?require("btoa"):btoa,"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(t){return Buffer.from(t,"base64").toString("binary")});let gr={};class mr{constructor(){}subscribe(t,e){let n=gr[t];void 0===n&&(n=[],gr[t]=n),n.push(e)}post(t){const e=gr[t.type];if(e)for(let n of e)"function"==typeof n.receiveEvent?n.receiveEvent(t):"function"==typeof n&&n(t)}static createEvent(t,e,n){return{type:t,data:e||{},propogate:void 0===n||n}}}function wr(t){this.mode=vr.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;e<n;e++){var r=[],i=this.data.charCodeAt(e);i>65536?(r[0]=240|(1835008&i)>>>18,r[1]=128|(258048&i)>>>12,r[2]=128|(4032&i)>>>6,r[3]=128|63&i):i>2048?(r[0]=224|(61440&i)>>>12,r[1]=128|(4032&i)>>>6,r[2]=128|63&i):i>128?(r[0]=192|(1984&i)>>>6,r[1]=128|63&i):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function yr(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}mr.globalBus=new mr,wr.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},yr.prototype={addData:function(t){var e=new wr(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=yr.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=Tr.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n);this.make();for(var i=0;i<this.modules.length;i++)for(var a=1*i,o=0;o<this.modules[i].length;o++){var s=1*o;this.modules[i][o]&&(r.beginFill(0,100),r.moveTo(s,a),r.lineTo(s+1,a),r.lineTo(s+1,a+1),r.lineTo(s,a+1),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=Tr.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(null==this.modules[r][i])for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)this.modules[r+a][i+o]=-2==a||2==a||-2==o||2==o||0==a&&0==o}},setupTypeNumber:function(t){for(var e=Tr.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=Tr.getBCHTypeInfo(n),i=0;i<15;i++){var a=!t&&1==(r>>i&1);i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(i=0;i<15;i++){a=!t&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=a:i<9?this.modules[8][15-i-1+1]=a:this.modules[8][15-i-1]=a}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,a=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var s=0;s<2;s++)if(null==this.modules[r][o-s]){var l=!1;a<t.length&&(l=1==(t[a]>>>i&1)),Tr.getMask(e,r,o-s)&&(l=!l),this.modules[r][o-s]=l,-1==--i&&(a++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},yr.PAD0=236,yr.PAD1=17,yr.createData=function(t,e,n){for(var r=Or.getRSBlocks(t,e),i=new _r,a=0;a<n.length;a++){var o=n[a];i.put(o.mode,4),i.put(o.getLength(),Tr.getLengthInBits(o.mode,t)),o.write(i)}var s=0;for(a=0;a<r.length;a++)s+=r[a].dataCount;if(i.getLengthInBits()>8*s)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*s+")");for(i.getLengthInBits()+4<=8*s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s||(i.put(yr.PAD0,8),i.getLengthInBits()>=8*s));)i.put(yr.PAD1,8);return yr.createBytes(i,r)},yr.createBytes=function(t,e){for(var n=0,r=0,i=0,a=new Array(e.length),o=new Array(e.length),s=0;s<e.length;s++){var l=e[s].dataCount,c=e[s].totalCount-l;r=Math.max(r,l),i=Math.max(i,c),a[s]=new Array(l);for(var f=0;f<a[s].length;f++)a[s][f]=255&t.buffer[f+n];n+=l;var u=Tr.getErrorCorrectPolynomial(c),h=new Ar(a[s],u.getLength()-1).mod(u);o[s]=new Array(u.getLength()-1);for(f=0;f<o[s].length;f++){var p=f+h.getLength()-o[s].length;o[s][f]=p>=0?h.get(p):0}}var d=0;for(f=0;f<e.length;f++)d+=e[f].totalCount;var g=new Array(d),m=0;for(f=0;f<r;f++)for(s=0;s<e.length;s++)f<a[s].length&&(g[m++]=a[s][f]);for(f=0;f<i;f++)for(s=0;s<e.length;s++)f<o[s].length&&(g[m++]=o[s][f]);return g};for(var vr={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},br={L:1,M:0,Q:3,H:2},xr=0,Sr=1,Er=2,Rr=3,kr=4,Cr=5,Dr=6,Lr=7,Tr={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;Tr.getBCHDigit(e)-Tr.getBCHDigit(Tr.G15)>=0;)e^=Tr.G15<<Tr.getBCHDigit(e)-Tr.getBCHDigit(Tr.G15);return(t<<10|e)^Tr.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;Tr.getBCHDigit(e)-Tr.getBCHDigit(Tr.G18)>=0;)e^=Tr.G18<<Tr.getBCHDigit(e)-Tr.getBCHDigit(Tr.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return Tr.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case xr:return(e+n)%2==0;case Sr:return e%2==0;case Er:return n%3==0;case Rr:return(e+n)%3==0;case kr:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case Cr:return e*n%2+e*n%3==0;case Dr:return(e*n%2+e*n%3)%2==0;case Lr:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new Ar([1],0),n=0;n<t;n++)e=e.multiply(new Ar([1,Ir.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case vr.MODE_NUMBER:return 10;case vr.MODE_ALPHA_NUM:return 9;case vr.MODE_8BIT_BYTE:case vr.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case vr.MODE_NUMBER:return 12;case vr.MODE_ALPHA_NUM:return 11;case vr.MODE_8BIT_BYTE:return 16;case vr.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case vr.MODE_NUMBER:return 14;case vr.MODE_ALPHA_NUM:return 13;case vr.MODE_8BIT_BYTE:return 16;case vr.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var a=0,o=t.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||0==s&&0==l||o==t.isDark(r+s,i+l)&&a++;a>5&&(n+=3+a-5)}for(r=0;r<e-1;r++)for(i=0;i<e-1;i++){var c=0;t.isDark(r,i)&&c++,t.isDark(r+1,i)&&c++,t.isDark(r,i+1)&&c++,t.isDark(r+1,i+1)&&c++,0!=c&&4!=c||(n+=3)}for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var f=0;for(i=0;i<e;i++)for(r=0;r<e;r++)t.isDark(r,i)&&f++;return n+=10*(Math.abs(100*f/e/e-50)/5)}},Ir={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Ir.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Ir.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Br=0;Br<8;Br++)Ir.EXP_TABLE[Br]=1<<Br;for(Br=8;Br<256;Br++)Ir.EXP_TABLE[Br]=Ir.EXP_TABLE[Br-4]^Ir.EXP_TABLE[Br-5]^Ir.EXP_TABLE[Br-6]^Ir.EXP_TABLE[Br-8];for(Br=0;Br<255;Br++)Ir.LOG_TABLE[Ir.EXP_TABLE[Br]]=Br;function Ar(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function Or(t,e){this.totalCount=t,this.dataCount=e}function _r(){this.buffer=[],this.length=0}Ar.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=Ir.gexp(Ir.glog(this.get(n))+Ir.glog(t.get(r)));return new Ar(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=Ir.glog(this.get(0))-Ir.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<t.getLength();r++)n[r]^=Ir.gexp(Ir.glog(t.get(r))+e);return new Ar(n,0).mod(t)}},Or.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],Or.getRSBlocks=function(t,e){var n=Or.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],a=0;a<r;a++)for(var o=n[3*a+0],s=n[3*a+1],l=n[3*a+2],c=0;c<o;c++)i.push(new Or(s,l));return i},Or.getRsBlockTable=function(t,e){switch(e){case br.L:return Or.RS_BLOCK_TABLE[4*(t-1)+0];case br.M:return Or.RS_BLOCK_TABLE[4*(t-1)+1];case br.Q:return Or.RS_BLOCK_TABLE[4*(t-1)+2];case br.H:return Or.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},_r.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Mr=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];let zr;function Fr(t,e){for(var n=1,r=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),i=0,a=Mr.length;i<=a;i++){var o=0;switch(e){case br.L:o=Mr[i][0];break;case br.M:o=Mr[i][1];break;case br.Q:o=Mr[i][2];break;case br.H:o=Mr[i][3]}if(r<=o)break;n++}if(n>Mr.length)throw new Error("Too long data");return n}"svg"===document.documentElement.tagName.toLowerCase()?(zr=function(t,e){this._el=t,this._htOption=e},zr.prototype.draw=function(t){var e=this._htOption,n=this._el,r=t.getModuleCount();Math.floor(e.width/r),Math.floor(e.height/r);function i(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var r in e)e.hasOwnProperty(r)&&n.setAttribute(r,e[r]);return n}this.clear();var a=i("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:e.colorLight});a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(a),a.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),a.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var o=0;o<r;o++)for(var s=0;s<r;s++)if(t.isDark(o,s)){var l=i("use",{x:String(s),y:String(o)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(l)}},zr.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)}):(zr=function(t,e){this._bIsPainted=!1,this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null},zr.prototype.draw=function(t){var e=this._elImage,n=this._oContext,r=this._htOption,i=t.getModuleCount(),a=r.width/i,o=r.height/i,s=Math.round(a),l=Math.round(o);e.style.display="none",this.clear();for(var c=0;c<i;c++)for(var f=0;f<i;f++){var u=t.isDark(c,f),h=f*a,p=c*o;n.strokeStyle=u?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=u?r.colorDark:r.colorLight,n.fillRect(h,p,a,o),n.strokeRect(Math.floor(h)+.5,Math.floor(p)+.5,s,l),n.strokeRect(Math.ceil(h)-.5,Math.ceil(p)-.5,s,l)}this._bIsPainted=!0},zr.prototype.makeImage=function(){this._bIsPainted&&(this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none")},zr.prototype.isPainted=function(){return this._bIsPainted},zr.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},zr.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t});const Ur=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:br.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(zr=svgDrawer),this._el=t,this._oQRCode=null,this._oDrawing=new zr(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};function Hr(t){return Nr("div",t)}function Nr(t,e){const n=document.createElement(t);return e&&(e.class&&n.classList.add(e.class),e.id&&(n.id=e.id),e.style&&function(t,e){for(let n of Object.keys(e))t.style[n]=e[n]}(n,e.style)),n}function Pr(t){const e=getComputedStyle(t);"none"!==e.display&&(t._initialDisplay=e.display),t.style.display="none"}function $r(t){if("none"===getComputedStyle(t).display){const e=t._initialDisplay||"block";t.style.display=e}}function jr(t,e){return function(t,e){e=e||"currentColor";let n=Kr[t];n||(console.error(`No icon named: ${t}`),n=Kr.question);const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"viewBox","0 0 "+n[0]+" "+n[1]);const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"fill",e),i.setAttributeNS(null,"d",n[4]),r.appendChild(i),r}(t,e)}Ur.prototype.makeCode=function(t){this._oQRCode=new yr(Fr(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},Ur.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&this._oDrawing.makeImage()},Ur.prototype.clear=function(){this._oDrawing.clear()},Ur.CorrectLevel=br;const Kr={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};var Gr={Huffman:{},Util:{},CRC32:{},CompressionMethod:{DEFLATE:8,RESERVED:15},Zip:function(t){t=t||{},this.files=[],this.comment=t.comment,this.password}};Gr.Zip.CompressionMethod={STORE:0,DEFLATE:8},Gr.Zip.OperatingSystem={MSDOS:0,UNIX:3,MACINTOSH:7},Gr.Zip.Flags={ENCRYPT:1,DESCRIPTOR:8,UTF8:2048},Gr.Zip.FileHeaderSignature=[80,75,1,2],Gr.Zip.LocalFileHeaderSignature=[80,75,3,4],Gr.Zip.CentralDirectorySignature=[80,75,5,6],Gr.Zip.prototype.addFile=function(t,e){(e=e||{}).filename;var n,r=t.length,i=0;if(t instanceof Array&&(t=new Uint8Array(t)),"number"!=typeof e.compressionMethod&&(e.compressionMethod=Gr.Zip.CompressionMethod.DEFLATE),e.compress)switch(e.compressionMethod){case Gr.Zip.CompressionMethod.STORE:break;case Gr.Zip.CompressionMethod.DEFLATE:i=Gr.CRC32.calc(t),t=this.deflateWithOption(t,e),n=!0;break;default:throw new Error("unknown compression method:"+e.compressionMethod)}this.files.push({buffer:t,option:e,compressed:n,encrypted:!1,size:r,crc32:i})},Gr.Zip.prototype.setPassword=function(t){this.password=t},Gr.Zip.prototype.compress=function(){var t,e,n,r,i,a,o,s,l,c,f,u,h,p,d,g,m,w,y,v,b,x,S,E,R,k,C=this.files,D=0,L=0;for(S=0,E=C.length;S<E;++S){if(p=(t=C[S]).option.filename?t.option.filename.length:0,d=t.option.extraField?t.option.extraField.length:0,g=t.option.comment?t.option.comment.length:0,!t.compressed)switch(t.crc32=Gr.CRC32.calc(t.buffer),t.option.compressionMethod){case Gr.Zip.CompressionMethod.STORE:break;case Gr.Zip.CompressionMethod.DEFLATE:t.buffer=this.deflateWithOption(t.buffer,t.option),t.compressed=!0;break;default:throw new Error("unknown compression method:"+t.option.compressionMethod)}if(void 0!==t.option.password||void 0!==this.password){for(x=this.createEncryptionKey(t.option.password||this.password),v=t.buffer,(b=new Uint8Array(v.length+12)).set(v,12),v=b,R=0;R<12;++R)v[R]=this.encode(x,11===S?255&t.crc32:256*Math.random()|0);for(k=v.length;R<k;++R)v[R]=this.encode(x,v[R]);t.buffer=v}D+=30+p+t.buffer.length,L+=46+p+g}for(a=22+(this.comment?this.comment.length:0),e=new Uint8Array(D+L+a),n=0,i=(r=D)+L,S=0,E=C.length;S<E;++S)p=(t=C[S]).option.filename?t.option.filename.length:0,d=0,g=t.option.comment?t.option.comment.length:0,o=n,e[n++]=Gr.Zip.LocalFileHeaderSignature[0],e[n++]=Gr.Zip.LocalFileHeaderSignature[1],e[n++]=Gr.Zip.LocalFileHeaderSignature[2],e[n++]=Gr.Zip.LocalFileHeaderSignature[3],e[r++]=Gr.Zip.FileHeaderSignature[0],e[r++]=Gr.Zip.FileHeaderSignature[1],e[r++]=Gr.Zip.FileHeaderSignature[2],e[r++]=Gr.Zip.FileHeaderSignature[3],20,e[r++]=20,e[r++]=t.option.os||Gr.Zip.OperatingSystem.MSDOS,e[n++]=e[r++]=20,e[n++]=e[r++]=0,s=0,(t.option.password||this.password)&&(s|=Gr.Zip.Flags.ENCRYPT),e[n++]=e[r++]=255&s,e[n++]=e[r++]=s>>8&255,l=t.option.compressionMethod,e[n++]=e[r++]=255&l,e[n++]=e[r++]=l>>8&255,c=t.option.date||new Date,e[n++]=e[r++]=(7&c.getMinutes())<<5|c.getSeconds()/2|0,e[n++]=e[r++]=c.getHours()<<3|c.getMinutes()>>3,e[n++]=e[r++]=(c.getMonth()+1&7)<<5|c.getDate(),e[n++]=e[r++]=(c.getFullYear()-1980&127)<<1|c.getMonth()+1>>3,f=t.crc32,e[n++]=e[r++]=255&f,e[n++]=e[r++]=f>>8&255,e[n++]=e[r++]=f>>16&255,e[n++]=e[r++]=f>>24&255,u=t.buffer.length,e[n++]=e[r++]=255&u,e[n++]=e[r++]=u>>8&255,e[n++]=e[r++]=u>>16&255,e[n++]=e[r++]=u>>24&255,h=t.size,e[n++]=e[r++]=255&h,e[n++]=e[r++]=h>>8&255,e[n++]=e[r++]=h>>16&255,e[n++]=e[r++]=h>>24&255,e[n++]=e[r++]=255&p,e[n++]=e[r++]=p>>8&255,e[n++]=e[r++]=255&d,e[n++]=e[r++]=d>>8&255,e[r++]=255&g,e[r++]=g>>8&255,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=0,e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,(m=t.option.filename)&&(e.set(m,n),e.set(m,r),n+=p,r+=p),(w=t.option.extraField)&&(e.set(w,n),e.set(w,r),n+=d,r+=d),(y=t.option.comment)&&(e.set(y,r),r+=g),e.set(t.buffer,n),n+=t.buffer.length;return e[i++]=Gr.Zip.CentralDirectorySignature[0],e[i++]=Gr.Zip.CentralDirectorySignature[1],e[i++]=Gr.Zip.CentralDirectorySignature[2],e[i++]=Gr.Zip.CentralDirectorySignature[3],e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&E,e[i++]=E>>8&255,e[i++]=255&L,e[i++]=L>>8&255,e[i++]=L>>16&255,e[i++]=L>>24&255,e[i++]=255&D,e[i++]=D>>8&255,e[i++]=D>>16&255,e[i++]=D>>24&255,g=this.comment?this.comment.length:0,e[i++]=255&g,e[i++]=g>>8&255,this.comment&&(e.set(this.comment,i),i+=g),e},Gr.Zip.prototype.deflateWithOption=function(t,e){return new Gr.RawDeflate(t,e.deflateOption).compress()},Gr.Zip.prototype.getByte=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},Gr.Zip.prototype.encode=function(t,e){var n=this.getByte(t);return this.updateKeys(t,e),n^e},Gr.Zip.prototype.updateKeys=function(t,e){t[0]=Gr.CRC32.single(t[0],e),t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=Gr.CRC32.single(t[2],t[1]>>>24)},Gr.Zip.prototype.createEncryptionKey=function(t){var e,n,r=[305419896,591751049,878082192];for(r=new Uint32Array(r),e=0,n=t.length;e<n;++e)this.updateKeys(r,255&t[e]);return r},Gr.Huffman.buildHuffmanTable=function(t){var e,n,r,i,a,o,s,l,c,f,u,h=t.length,p=0,d=Number.POSITIVE_INFINITY;for(l=0,c=h;l<c;++l)t[l]>p&&(p=t[l]),t[l]<d&&(d=t[l]);for(e=1<<p,n=new Uint32Array(e),r=1,i=0,a=2;r<=p;){for(l=0;l<h;++l)if(t[l]===r){for(o=0,s=i,f=0;f<r;++f)o=o<<1|1&s,s>>=1;for(u=r<<16|l,f=o;f<e;f+=a)n[f]=u;++i}++r,i<<=1,a<<=1}return[n,p,d]};var Zr=Gr.Huffman.buildHuffmanTable;Gr.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=Gr.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case Gr.RawInflate.BufferType.BLOCK:this.op=Gr.RawInflate.MaxBackwardLength,this.output=new Uint8Array(Gr.RawInflate.MaxBackwardLength+this.bufferSize+Gr.RawInflate.MaxCopyLength);break;case Gr.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},Gr.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},Gr.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case Gr.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case Gr.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},Gr.RawInflate.MaxBackwardLength=32768,Gr.RawInflate.MaxCopyLength=258,Gr.RawInflate.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gr.RawInflate.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Gr.RawInflate.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Gr.RawInflate.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Gr.RawInflate.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Gr.RawInflate.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return Zr(n)}(),Gr.RawInflate.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return Zr(n)}(),Gr.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},Gr.RawInflate.prototype.readBits=function(t){var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;if(a+(t-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<t;)n|=i[a++]<<r,r+=8;return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,e},Gr.RawInflate.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=a.length,l=t[0],c=t[1];i<c&&!(o>=s);)r|=a[o++]<<i,i+=8;if((n=(e=l[r&(1<<c)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&e},Gr.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,n=this.input,r=this.ip,i=this.output,a=this.op,o=n.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=o)throw new Error("invalid uncompressed block header: LEN");if(t=n[r++]|n[r++]<<8,r+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(t===~(n[r++]|n[r++]<<8))throw new Error("invalid uncompressed block header: length verify");if(r+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case Gr.RawInflate.BufferType.BLOCK:for(;a+t>i.length;)t-=e=s-a,i.set(n.subarray(r,r+e),a),a+=e,r+=e,this.op=a,i=this.expandBufferBlock(),a=this.op;break;case Gr.RawInflate.BufferType.ADAPTIVE:for(;a+t>i.length;)i=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}i.set(n.subarray(r,r+t),a),a+=t,r+=t,this.ip=r,this.op=a,this.output=i},Gr.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case Gr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(Gr.RawInflate.FixedLiteralLengthTable,Gr.RawInflate.FixedDistanceTable);break;case Gr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(Gr.RawInflate.FixedLiteralLengthTable,Gr.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},Gr.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i,a,o,s,l,c=this.readBits(5)+257,f=this.readBits(5)+1,u=this.readBits(4)+4,h=new Uint8Array(Gr.RawInflate.Order.length);for(s=0;s<u;++s)h[Gr.RawInflate.Order[s]]=this.readBits(3);for(t=Zr(h),r=new Uint8Array(c+f),s=0,l=c+f;s<l;)switch(i=this.readCodeByTable(t)){case 16:for(o=3+this.readBits(2);o--;)r[s++]=a;break;case 17:for(o=3+this.readBits(3);o--;)r[s++]=0;a=0;break;case 18:for(o=11+this.readBits(7);o--;)r[s++]=0;a=0;break;default:r[s++]=i,a=i}switch(e=Zr(r.subarray(0,c)),n=Zr(r.subarray(c)),this.bufferType){case Gr.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e,n);break;case Gr.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e,n);break;default:throw new Error("invalid inflate mode")}},Gr.RawInflate.prototype.decodeHuffmanBlock=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=n.length-Gr.RawInflate.MaxCopyLength,c=Gr.RawInflate.LengthCodeTable,f=Gr.RawInflate.LengthExtraTable,u=Gr.RawInflate.DistCodeTable,h=Gr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=l&&(this.op=r,n=this.expandBufferBlock(),r=this.op),n[r++]=i;else for(s=c[a=i-257],f[a]>0&&(s+=this.readBits(f[a])),o=u[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),r>=l&&(this.op=r,n=this.expandBufferBlock(),r=this.op);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},Gr.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var n=this.output,r=this.op;this.currentLitlenTable=t;for(var i,a,o,s,l=n.length,c=Gr.RawInflate.LengthCodeTable,f=Gr.RawInflate.LengthExtraTable,u=Gr.RawInflate.DistCodeTable,h=Gr.RawInflate.DistExtraTable;256!==(i=this.readCodeByTable(t));)if(i<256)r>=l&&(l=(n=this.expandBufferAdaptive()).length),n[r++]=i;else for(s=c[a=i-257],f[a]>0&&(s+=this.readBits(f[a])),o=u[i=this.readCodeByTable(e)],h[i]>0&&(o+=this.readBits(h[i])),r+s>l&&(l=(n=this.expandBufferAdaptive()).length);s--;)n[r]=n[r++-o];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=r},Gr.RawInflate.prototype.expandBufferBlock=function(t){var e=new Uint8Array(this.op-Gr.RawInflate.MaxBackwardLength),n=this.op-Gr.RawInflate.MaxBackwardLength,r=this.output;return e.set(r.subarray(Gr.RawInflate.MaxBackwardLength,e.length)),this.blocks.push(e),this.totalpos+=e.length,r.set(r.subarray(n,n+Gr.RawInflate.MaxBackwardLength)),this.op=Gr.RawInflate.MaxBackwardLength,r},Gr.RawInflate.prototype.expandBufferAdaptive=function(t){var e,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(a.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(e=new Uint8Array(n)).set(o),this.output=e,this.output},Gr.RawInflate.prototype.concatBufferBlock=function(){var t,e,n,r,i,a=0,o=this.totalpos+(this.op-Gr.RawInflate.MaxBackwardLength),s=this.output,l=this.blocks,c=new Uint8Array(o);if(0===l.length)return this.output.subarray(Gr.RawInflate.MaxBackwardLength,this.op);for(e=0,n=l.length;e<n;++e)for(r=0,i=(t=l[e]).length;r<i;++r)c[a++]=t[r];for(e=Gr.RawInflate.MaxBackwardLength,n=this.op;e<n;++e)c[a++]=s[e];return this.blocks=[],this.buffer=c,this.buffer},Gr.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};Zr=Gr.Huffman.buildHuffmanTable;let Vr;function Yr(t){return t.indexOf("drive.google.com")>=0||t.indexOf("www.googleapis.com/drive")>0}function qr(t){var e=Wr(t);return e?"https://www.googleapis.com/drive/v3/files/"+e+"?alt=media&supportsTeamDrives=true":t}function Wr(t){var e,n;if(t.includes("/open?id=")){if(e=t.indexOf("/open?id=")+9,n=t.indexOf("&"),e>0&&n>e)return t.substring(e,n);if(e>0)return t.substring(e)}else if(t.includes("/file/d/"))return e=t.indexOf("/file/d/")+8,n=t.lastIndexOf("/"),t.substring(e,n)}Gr.RawInflateStream=function(t,e,n){this.blocks=[],this.bufferSize=n||65e3,this.totalpos=0,this.ip=void 0===e?0:e,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output=new Uint8Array(this.bufferSize),this.op=0,this.bfinal=!1,this.blockLength,this.resize=!1,this.litlenTable,this.distTable,this.sp=0,this.status=Gr.RawInflateStream.Status.INITIALIZED,this.ip_,this.bitsbuflen_,this.bitsbuf_},Gr.RawInflateStream.BlockType={UNCOMPRESSED:0,FIXED:1,DYNAMIC:2},Gr.RawInflateStream.Status={INITIALIZED:0,BLOCK_HEADER_START:1,BLOCK_HEADER_END:2,BLOCK_BODY_START:3,BLOCK_BODY_END:4,DECODE_BLOCK_START:5,DECODE_BLOCK_END:6},Gr.RawInflateStream.prototype.decompress=function(t,e){var n=!1;for(void 0!==t&&(this.input=t),void 0!==e&&(this.ip=e);!n;)switch(this.status){case Gr.RawInflateStream.Status.INITIALIZED:case Gr.RawInflateStream.Status.BLOCK_HEADER_START:this.readBlockHeader()<0&&(n=!0);break;case Gr.RawInflateStream.Status.BLOCK_HEADER_END:case Gr.RawInflateStream.Status.BLOCK_BODY_START:switch(this.currentBlockType){case Gr.RawInflateStream.BlockType.UNCOMPRESSED:this.readUncompressedBlockHeader()<0&&(n=!0);break;case Gr.RawInflateStream.BlockType.FIXED:this.parseFixedHuffmanBlock()<0&&(n=!0);break;case Gr.RawInflateStream.BlockType.DYNAMIC:this.parseDynamicHuffmanBlock()<0&&(n=!0)}break;case Gr.RawInflateStream.Status.BLOCK_BODY_END:case Gr.RawInflateStream.Status.DECODE_BLOCK_START:switch(this.currentBlockType){case Gr.RawInflateStream.BlockType.UNCOMPRESSED:this.parseUncompressedBlock()<0&&(n=!0);break;case Gr.RawInflateStream.BlockType.FIXED:case Gr.RawInflateStream.BlockType.DYNAMIC:this.decodeHuffman()<0&&(n=!0)}break;case Gr.RawInflateStream.Status.DECODE_BLOCK_END:this.bfinal?n=!0:this.status=Gr.RawInflateStream.Status.INITIALIZED}return this.concatBuffer()},Gr.RawInflateStream.MaxBackwardLength=32768,Gr.RawInflateStream.MaxCopyLength=258,Gr.RawInflateStream.Order=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gr.RawInflateStream.LengthCodeTable=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Gr.RawInflateStream.LengthExtraTable=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Gr.RawInflateStream.DistCodeTable=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Gr.RawInflateStream.DistExtraTable=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Gr.RawInflateStream.FixedLiteralLengthTable=function(){var t,e,n=new Uint8Array(288);for(t=0,e=n.length;t<e;++t)n[t]=t<=143?8:t<=255?9:t<=279?7:8;return Zr(n)}(),Gr.RawInflateStream.FixedDistanceTable=function(){var t,e,n=new Uint8Array(30);for(t=0,e=n.length;t<e;++t)n[t]=5;return Zr(n)}(),Gr.RawInflateStream.prototype.readBlockHeader=function(){var t;if(this.status=Gr.RawInflateStream.Status.BLOCK_HEADER_START,this.save_(),(t=this.readBits(3))<0)return this.restore_(),-1;switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.currentBlockType=Gr.RawInflateStream.BlockType.UNCOMPRESSED;break;case 1:this.currentBlockType=Gr.RawInflateStream.BlockType.FIXED;break;case 2:this.currentBlockType=Gr.RawInflateStream.BlockType.DYNAMIC;break;default:throw new Error("unknown BTYPE: "+t)}this.status=Gr.RawInflateStream.Status.BLOCK_HEADER_END},Gr.RawInflateStream.prototype.readBits=function(t){for(var e,n=this.bitsbuf,r=this.bitsbuflen,i=this.input,a=this.ip;r<t;){if(i.length<=a)return-1;n|=(e=i[a++])<<r,r+=8}return e=n&(1<<t)-1,n>>>=t,r-=t,this.bitsbuf=n,this.bitsbuflen=r,this.ip=a,e},Gr.RawInflateStream.prototype.readCodeByTable=function(t){for(var e,n,r=this.bitsbuf,i=this.bitsbuflen,a=this.input,o=this.ip,s=t[0],l=t[1];i<l;){if(a.length<=o)return-1;r|=a[o++]<<i,i+=8}if((n=(e=s[r&(1<<l)-1])>>>16)>i)throw new Error("invalid code length: "+n);return this.bitsbuf=r>>n,this.bitsbuflen=i-n,this.ip=o,65535&e},Gr.RawInflateStream.prototype.readUncompressedBlockHeader=function(){var t,e=this.input,n=this.ip;if(this.status=Gr.RawInflateStream.Status.BLOCK_BODY_START,n+4>=e.length)return-1;if((t=e[n++]|e[n++]<<8)===~(e[n++]|e[n++]<<8))throw new Error("invalid uncompressed block header: length verify");this.bitsbuf=0,this.bitsbuflen=0,this.ip=n,this.blockLength=t,this.status=Gr.RawInflateStream.Status.BLOCK_BODY_END},Gr.RawInflateStream.prototype.parseUncompressedBlock=function(){var t=this.input,e=this.ip,n=this.output,r=this.op,i=this.blockLength;for(this.status=Gr.RawInflateStream.Status.DECODE_BLOCK_START;i--;){if(r===n.length&&(n=this.expandBuffer({fixRatio:2})),e>=t.length)return this.ip=e,this.op=r,this.blockLength=i+1,-1;n[r++]=t[e++]}return i<0&&(this.status=Gr.RawInflateStream.Status.DECODE_BLOCK_END),this.ip=e,this.op=r,0},Gr.RawInflateStream.prototype.parseFixedHuffmanBlock=function(){return this.status=Gr.RawInflateStream.Status.BLOCK_BODY_START,this.litlenTable=Gr.RawInflateStream.FixedLiteralLengthTable,this.distTable=Gr.RawInflateStream.FixedDistanceTable,this.status=Gr.RawInflateStream.Status.BLOCK_BODY_END,0},Gr.RawInflateStream.prototype.save_=function(){this.ip_=this.ip,this.bitsbuflen_=this.bitsbuflen,this.bitsbuf_=this.bitsbuf},Gr.RawInflateStream.prototype.restore_=function(){this.ip=this.ip_,this.bitsbuflen=this.bitsbuflen_,this.bitsbuf=this.bitsbuf_},Gr.RawInflateStream.prototype.parseDynamicHuffmanBlock=function(){var t,e,n,r,i=new Uint8Array(Gr.RawInflateStream.Order.length);if(this.status=Gr.RawInflateStream.Status.BLOCK_BODY_START,this.save_(),t=this.readBits(5)+257,e=this.readBits(5)+1,n=this.readBits(4)+4,t<0||e<0||n<0)return this.restore_(),-1;try{(function(){var a,o,s,l,c,f,u=0;for(c=0;c<n;++c){if((a=this.readBits(3))<0)throw new Error("not enough input");i[Gr.RawInflateStream.Order[c]]=a}for(r=Zr(i),l=new Uint8Array(t+e),c=0,f=t+e;c<f;){if((o=this.readCodeByTable(r))<0)throw new Error("not enough input");switch(o){case 16:if((a=this.readBits(2))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=u;break;case 17:if((a=this.readBits(3))<0)throw new Error("not enough input");for(s=3+a;s--;)l[c++]=0;u=0;break;case 18:if((a=this.readBits(7))<0)throw new Error("not enough input");for(s=11+a;s--;)l[c++]=0;u=0;break;default:l[c++]=o,u=o}}this.litlenTable=Zr(l.subarray(0,t)),this.distTable=Zr(l.subarray(t))}).call(this)}catch(t){return this.restore_(),-1}return this.status=Gr.RawInflateStream.Status.BLOCK_BODY_END,0},Gr.RawInflateStream.prototype.decodeHuffman=function(){var t,e,n,r,i,a=this.output,o=this.op,s=this.litlenTable,l=this.distTable,c=a.length;for(this.status=Gr.RawInflateStream.Status.DECODE_BLOCK_START;;){if(this.save_(),(t=this.readCodeByTable(s))<0)return this.op=o,this.restore_(),-1;if(256===t)break;if(t<256)o===c&&(c=(a=this.expandBuffer()).length),a[o++]=t;else{if(e=t-257,r=Gr.RawInflateStream.LengthCodeTable[e],Gr.RawInflateStream.LengthExtraTable[e]>0){if((i=this.readBits(Gr.RawInflateStream.LengthExtraTable[e]))<0)return this.op=o,this.restore_(),-1;r+=i}if((t=this.readCodeByTable(l))<0)return this.op=o,this.restore_(),-1;if(n=Gr.RawInflateStream.DistCodeTable[t],Gr.RawInflateStream.DistExtraTable[t]>0){if((i=this.readBits(Gr.RawInflateStream.DistExtraTable[t]))<0)return this.op=o,this.restore_(),-1;n+=i}for(o+r>=c&&(c=(a=this.expandBuffer()).length);r--;)a[o]=a[o++-n];if(this.ip===this.input.length)return this.op=o,-1}}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=o,this.status=Gr.RawInflateStream.Status.DECODE_BLOCK_END},Gr.RawInflateStream.prototype.expandBuffer=function(t){var e,n,r,i=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),n=i<2?(r=(a.length-this.ip)/this.litlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(e=new Uint8Array(n)).set(o),this.output=e,this.output},Gr.RawInflateStream.prototype.concatBuffer=function(){var t,e,n=this.op;return t=this.resize?new Uint8Array(this.output.subarray(this.sp,n)):this.output.subarray(this.sp,n),this.sp=n,n>Gr.RawInflateStream.MaxBackwardLength+this.bufferSize&&(this.op=this.sp=Gr.RawInflateStream.MaxBackwardLength,e=this.output,this.output=new Uint8Array(this.bufferSize+Gr.RawInflateStream.MaxBackwardLength),this.output.set(e.subarray(n-Gr.RawInflateStream.MaxBackwardLength,n))),t},Gr.Inflate=function(t,e){var n,r;switch(this.input=t,this.ip=0,this.rawinflate,this.verify,!e&&(e={})||(e.index&&(this.ip=e.index),e.verify&&(this.verify=e.verify)),n=t[this.ip++],r=t[this.ip++],15&n){case Gr.CompressionMethod.DEFLATE:this.method=Gr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.rawinflate=new Gr.RawInflate(t,{index:this.ip,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})},Gr.Inflate.BufferType=Gr.RawInflate.BufferType,Gr.Inflate.prototype.decompress=function(){var t,e=this.input;if(t=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify&&(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0!==Gr.Adler32(t))throw new Error("invalid adler-32 checksum");return t},Gr.InflateStream=function(t){this.input=void 0===t?new Uint8Array:t,this.ip=0,this.rawinflate=new Gr.RawInflateStream(this.input,this.ip),this.method,this.output=this.rawinflate.output},Gr.InflateStream.prototype.decompress=function(t){var e;if(void 0!==t){var n=new Uint8Array(this.input.length+t.length);n.set(this.input,0),n.set(t,this.input.length),this.input=n}return void 0===this.method&&this.readHeader()<0?new Uint8Array:(e=this.rawinflate.decompress(this.input,this.ip),0!==this.rawinflate.ip&&(this.input=this.input.subarray(this.rawinflate.ip),this.ip=0),e)},Gr.InflateStream.prototype.readHeader=function(){var t=this.ip,e=this.input,n=e[t++],r=e[t++];if(void 0===n||void 0===r)return-1;switch(15&n){case Gr.CompressionMethod.DEFLATE:this.method=Gr.CompressionMethod.DEFLATE;break;default:throw new Error("unsupported compression method")}if(((n<<8)+r)%31!=0)throw new Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw new Error("fdict flag is not supported");this.ip=t},Gr.Gunzip=function(t,e){this.input=t,this.ip=0,this.member=[],this.decompressed=!1},Gr.Gunzip.prototype.getMembers=function(){return this.decompressed||this.decompress(),this.member.slice()},Gr.Gunzip.prototype.decompress=function(){for(var t=this.input.length;this.ip<t;)this.decodeMember();return this.decompressed=!0,this.concatMember()},Gr.Gunzip.prototype.decodeMember=function(){var t,e,n,r,i,a,o,s,l,c=new Gr.GunzipMember,f=this.input,u=this.ip;if(c.id1=f[u++],c.id2=f[u++],31!==c.id1||139!==c.id2)throw new Error("invalid file signature:"+c.id1+","+c.id2);switch(c.cm=f[u++],c.cm){case 8:break;default:throw new Error("unknown compression method: "+c.cm)}if(c.flg=f[u++],s=f[u++]|f[u++]<<8|f[u++]<<16|f[u++]<<24,c.mtime=new Date(1e3*s),c.xfl=f[u++],c.os=f[u++],(c.flg&Gr.Gzip.FlagsMask.FEXTRA)>0&&(c.xlen=f[u++]|f[u++]<<8,u=this.decodeSubField(u,c.xlen)),(c.flg&Gr.Gzip.FlagsMask.FNAME)>0){for(o=[],a=0;(i=f[u++])>0;)o[a++]=String.fromCharCode(i);c.name=o.join("")}if((c.flg&Gr.Gzip.FlagsMask.FCOMMENT)>0){for(o=[],a=0;(i=f[u++])>0;)o[a++]=String.fromCharCode(i);c.comment=o.join("")}if((c.flg&Gr.Gzip.FlagsMask.FHCRC)>0&&(c.crc16=65535&Gr.CRC32.calc(f,0,u),c.crc16!==(f[u++]|f[u++]<<8)))throw new Error("invalid header crc16");if(t=f[f.length-4]|f[f.length-3]<<8|f[f.length-2]<<16|f[f.length-1]<<24,f.length-u-4-4<512*t&&(r=t),e=new Gr.RawInflate(f,{index:u,bufferSize:r}),c.data=n=e.decompress(),u=e.ip,c.crc32=l=(f[u++]|f[u++]<<8|f[u++]<<16|f[u++]<<24)>>>0,Gr.CRC32.calc(n)!==l)throw new Error("invalid CRC-32 checksum: 0x"+Gr.CRC32.calc(n).toString(16)+" / 0x"+l.toString(16));if(c.isize=t=(f[u++]|f[u++]<<8|f[u++]<<16|f[u++]<<24)>>>0,(4294967295&n.length)!==t)throw new Error("invalid input size: "+(4294967295&n.length)+" / "+t);this.member.push(c),this.ip=u},Gr.Gunzip.prototype.decodeSubField=function(t,e){return t+e},Gr.Gunzip.prototype.concatMember=function(){var t,e,n,r=this.member,i=0,a=0;for(t=0,e=r.length;t<e;++t)a+=r[t].data.length;for(n=new Uint8Array(a),t=0;t<e;++t)n.set(r[t].data,i),i+=r[t].data.length;return n},Gr.GunzipMember=function(){this.id1,this.id2,this.cm,this.flg,this.mtime,this.xfl,this.os,this.crc16,this.xlen,this.crc32,this.isize,this.name,this.comment,this.data},Gr.GunzipMember.prototype.getName=function(){return this.name},Gr.GunzipMember.prototype.getData=function(){return this.data},Gr.GunzipMember.prototype.getMtime=function(){return this.mtime},Gr.Gzip=function(t,e){this.input=t,this.ip=0,this.output,this.op=0,this.flags={},this.filename,this.comment,this.deflateOptions,e&&(e.flags&&(this.flags=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.comment=e.comment),e.deflateOptions&&(this.deflateOptions=e.deflateOptions)),this.deflateOptions||(this.deflateOptions={})},Gr.Gzip.DefaultBufferSize=32768,Gr.Gzip.prototype.compress=function(){var t,e,n,r,i,a,o,s,l=new Uint8Array(Gr.Gzip.DefaultBufferSize),c=0,f=this.input,u=this.ip,h=this.filename,p=this.comment;if(l[c++]=31,l[c++]=139,l[c++]=8,t=0,this.flags.fname&&(t|=Gr.Gzip.FlagsMask.FNAME),this.flags.fcomment&&(t|=Gr.Gzip.FlagsMask.FCOMMENT),this.flags.fhcrc&&(t|=Gr.Gzip.FlagsMask.FHCRC),l[c++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,l[c++]=255&e,l[c++]=e>>>8&255,l[c++]=e>>>16&255,l[c++]=e>>>24&255,l[c++]=0,l[c++]=Gr.Gzip.OperatingSystem.UNKNOWN,void 0!==this.flags.fname){for(o=0,s=h.length;o<s;++o)(a=h.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}if(this.flags.comment){for(o=0,s=p.length;o<s;++o)(a=p.charCodeAt(o))>255&&(l[c++]=a>>>8&255),l[c++]=255&a;l[c++]=0}return this.flags.fhcrc&&(n=65535&Gr.CRC32.calc(l,0,c),l[c++]=255&n,l[c++]=n>>>8&255),this.deflateOptions.outputBuffer=l,this.deflateOptions.outputIndex=c,l=(i=new Gr.RawDeflate(f,this.deflateOptions)).compress(),(c=i.op)+8>l.buffer.byteLength?(this.output=new Uint8Array(c+8),this.output.set(new Uint8Array(l.buffer)),l=this.output):l=new Uint8Array(l.buffer),r=Gr.CRC32.calc(f),l[c++]=255&r,l[c++]=r>>>8&255,l[c++]=r>>>16&255,l[c++]=r>>>24&255,s=f.length,l[c++]=255&s,l[c++]=s>>>8&255,l[c++]=s>>>16&255,l[c++]=s>>>24&255,this.ip=u,c<l.length&&(this.output=l=l.subarray(0,c)),l},Gr.Gzip.OperatingSystem={FAT:0,AMIGA:1,VMS:2,UNIX:3,VM_CMS:4,ATARI_TOS:5,HPFS:6,MACINTOSH:7,Z_SYSTEM:8,CP_M:9,TOPS_20:10,NTFS:11,QDOS:12,ACORN_RISCOS:13,UNKNOWN:255},Gr.Gzip.FlagsMask={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},Gr.Heap=function(t){this.buffer=new Uint16Array(2*t),this.length=0},Gr.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},Gr.Heap.prototype.getChild=function(t){return 2*t+2},Gr.Heap.prototype.push=function(t,e){var n,r,i,a=this.buffer;for(n=this.length,a[this.length++]=e,a[this.length++]=t;n>0&&(r=this.getParent(n),a[n]>a[r]);)i=a[n],a[n]=a[r],a[r]=i,i=a[n+1],a[n+1]=a[r+1],a[r+1]=i,n=r;return this.length},Gr.Heap.prototype.pop=function(){var t,e,n,r,i,a=this.buffer;for(e=a[0],t=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((r=this.getChild(i))>=this.length)&&(r+2<this.length&&a[r+2]>a[r]&&(r+=2),a[r]>a[i]);)n=a[i],a[i]=a[r],a[r]=n,n=a[i+1],a[i+1]=a[r+1],a[r+1]=n,i=r;return{index:t,value:e,length:this.length}},Gr.RawDeflate=function(t,e){this.compressionType=Gr.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new Uint8Array(32768))},Gr.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},Gr.RawDeflate.Lz77MinLength=3,Gr.RawDeflate.Lz77MaxLength=258,Gr.RawDeflate.WindowSize=32768,Gr.RawDeflate.MaxCodeLength=16,Gr.RawDeflate.HUFMAX=286,Gr.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),Gr.RawDeflate.prototype.compress=function(){var t,e,n,r=this.input;switch(this.compressionType){case Gr.RawDeflate.CompressionType.NONE:for(e=0,n=r.length;e<n;)e+=(t=r.subarray(e,e+65535)).length,this.makeNocompressBlock(t,e===n);break;case Gr.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(r,!0),this.op=this.output.length;break;case Gr.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(r,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},Gr.RawDeflate.prototype.makeNocompressBlock=function(t,e){var n,r,i,a,o=this.output,s=this.op;for(o=new Uint8Array(this.output.buffer);o.length<=s+t.length+5;)o=new Uint8Array(o.length<<1);return o.set(this.output),n=e?1:0,r=Gr.RawDeflate.CompressionType.NONE,o[s++]=n|r<<1,a=65536+~(i=t.length)&65535,o[s++]=255&i,o[s++]=i>>>8&255,o[s++]=255&a,o[s++]=a>>>8&255,o.set(t,s),s+=t.length,o=o.subarray(0,s),this.op=s,this.output=o,o},Gr.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var n,r,i,a=new Gr.BitStream(new Uint8Array(this.output.buffer),this.op);return n=e?1:0,r=Gr.RawDeflate.CompressionType.FIXED,a.writeBits(n,1,!0),a.writeBits(r,2,!0),i=this.lz77(t),this.fixedHuffman(i,a),a.finish()},Gr.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var n,r,i,a,o,s,l,c,f,u,h,p,d,g,m,w,y,v=new Gr.BitStream(new Uint8Array(this.output.buffer),this.op),b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(n=e?1:0,r=Gr.RawDeflate.CompressionType.DYNAMIC,v.writeBits(n,1,!0),v.writeBits(r,2,!0),i=this.lz77(t),l=this.getLengths_(this.freqsLitLen,15),c=this.getCodesFromLengths_(l),f=this.getLengths_(this.freqsDist,7),u=this.getCodesFromLengths_(f),a=286;a>257&&0===l[a-1];a--);for(o=30;o>1&&0===f[o-1];o--);for(h=this.getTreeSymbols_(a,l,o,f),p=this.getLengths_(h.freqs,7),w=0;w<19;w++)x[w]=p[b[w]];for(s=19;s>4&&0===x[s-1];s--);for(d=this.getCodesFromLengths_(p),v.writeBits(a-257,5,!0),v.writeBits(o-1,5,!0),v.writeBits(s-4,4,!0),w=0;w<s;w++)v.writeBits(x[w],3,!0);for(w=0,y=h.codes.length;w<y;w++)if(g=h.codes[w],v.writeBits(d[g],p[g],!0),g>=16){switch(w++,g){case 16:m=2;break;case 17:m=3;break;case 18:m=7;break;default:throw"invalid code: "+g}v.writeBits(h.codes[w],m,!0)}return this.dynamicHuffman(i,[c,l],[u,f],v),v.finish()},Gr.RawDeflate.prototype.dynamicHuffman=function(t,e,n,r){var i,a,o,s,l,c,f,u;for(l=e[0],c=e[1],f=n[0],u=n[1],i=0,a=t.length;i<a;++i)if(o=t[i],r.writeBits(l[o],c[o],!0),o>256)r.writeBits(t[++i],t[++i],!0),s=t[++i],r.writeBits(f[s],u[s],!0),r.writeBits(t[++i],t[++i],!0);else if(256===o)break;return r},Gr.RawDeflate.prototype.fixedHuffman=function(t,e){var n,r,i;for(n=0,r=t.length;n<r;n++)if(i=t[n],Gr.BitStream.prototype.writeBits.apply(e,Gr.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++n],t[++n],!0),e.writeBits(t[++n],5),e.writeBits(t[++n],t[++n],!0);else if(256===i)break;return e},Gr.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},Gr.RawDeflate.Lz77Match.LengthCodeTable=function(t){return new Uint32Array(t)}(function(){var t,e,n=[];for(t=3;t<=258;t++)e=r(t),n[t]=e[2]<<24|e[1]<<16|e[0];function r(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}return n}()),Gr.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},Gr.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,n=this.backwardDistance,r=[],i=0;return t=Gr.RawDeflate.Lz77Match.LengthCodeTable[e],r[i++]=65535&t,r[i++]=t>>16&255,r[i++]=t>>24,t=this.getDistanceCode_(n),r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],r},Gr.RawDeflate.prototype.lz77=function(t){var e,n,r,i,a,o,s,l,c,f={},u=Gr.RawDeflate.WindowSize,h=new Uint16Array(2*t.length),p=0,d=0,g=new Uint32Array(286),m=new Uint32Array(30),w=this.lazy;function y(t,e){var n,r,i=t.toLz77Array();for(n=0,r=i.length;n<r;++n)h[p++]=i[n];g[i[0]]++,m[i[3]]++,d=t.length+e-1,l=null}for(g[256]=1,e=0,n=t.length;e<n;++e){for(a=0,r=0,i=Gr.RawDeflate.Lz77MinLength;r<i&&e+r!==n;++r)a=a<<8|t[e+r];if(void 0===f[a]&&(f[a]=[]),o=f[a],d-- >0)o.push(e);else{for(;o.length>0&&e-o[0]>u;)o.shift();if(e+Gr.RawDeflate.Lz77MinLength>=n){for(l&&y(l,-1),r=0,i=n-e;r<i;++r)c=t[e+r],h[p++]=c,++g[c];break}o.length>0?(s=this.searchLongestMatch_(t,e,o),l?l.length<s.length?(c=t[e-1],h[p++]=c,++g[c],y(s,0)):y(l,-1):s.length<w?l=s:y(s,0)):l?y(l,-1):(c=t[e],h[p++]=c,++g[c]),o.push(e)}}return h[p++]=256,g[256]++,this.freqsLitLen=g,this.freqsDist=m,h.subarray(0,p)},Gr.RawDeflate.prototype.searchLongestMatch_=function(t,e,n){var r,i,a,o,s,l,c=0,f=t.length;t:for(o=0,l=n.length;o<l;o++){if(r=n[l-o-1],a=Gr.RawDeflate.Lz77MinLength,c>Gr.RawDeflate.Lz77MinLength){for(s=c;s>Gr.RawDeflate.Lz77MinLength;s--)if(t[r+s-1]!==t[e+s-1])continue t;a=c}for(;a<Gr.RawDeflate.Lz77MaxLength&&e+a<f&&t[r+a]===t[e+a];)++a;if(a>c&&(i=r,c=a),a===Gr.RawDeflate.Lz77MaxLength)break}return new Gr.RawDeflate.Lz77Match(c,e-i)},Gr.RawDeflate.prototype.getTreeSymbols_=function(t,e,n,r){var i,a,o,s,l,c,f=new Uint32Array(t+n),u=new Uint32Array(316),h=new Uint8Array(19);for(a=0,i=0;i<t;i++)f[a++]=e[i];for(i=0;i<n;i++)f[a++]=r[i];for(l=0,i=0,s=f.length;i<s;i+=a){for(a=1;i+a<s&&f[i+a]===f[i];++a);if(o=a,0===f[i])if(o<3)for(;o-- >0;)u[l++]=0,h[0]++;else for(;o>0;)(c=o<138?o:138)>o-3&&c<o&&(c=o-3),c<=10?(u[l++]=17,u[l++]=c-3,h[17]++):(u[l++]=18,u[l++]=c-11,h[18]++),o-=c;else if(u[l++]=f[i],h[f[i]]++,--o<3)for(;o-- >0;)u[l++]=f[i],h[f[i]]++;else for(;o>0;)(c=o<6?o:6)>o-3&&c<o&&(c=o-3),u[l++]=16,u[l++]=c-3,h[16]++,o-=c}return{codes:u.subarray(0,l),freqs:h}},Gr.RawDeflate.prototype.getLengths_=function(t,e){var n,r,i,a,o,s=t.length,l=new Gr.Heap(2*Gr.RawDeflate.HUFMAX),c=new Uint8Array(s);for(a=0;a<s;++a)t[a]>0&&l.push(a,t[a]);if(n=new Array(l.length/2),r=new Uint32Array(l.length/2),1===n.length)return c[l.pop().index]=1,c;for(a=0,o=l.length/2;a<o;++a)n[a]=l.pop(),r[a]=n[a].value;for(i=this.reversePackageMerge_(r,r.length,e),a=0,o=n.length;a<o;++a)c[n[a].index]=i[a];return c},Gr.RawDeflate.prototype.reversePackageMerge_=function(t,e,n){var r,i,a,o,s,l=new Uint16Array(n),c=new Uint8Array(n),f=new Uint8Array(e),u=new Array(n),h=new Array(n),p=new Array(n),d=(1<<n)-e,g=1<<n-1;function m(t){var n=h[t][p[t]];n===e?(m(t+1),m(t+1)):--f[n],++p[t]}for(l[n-1]=e,i=0;i<n;++i)d<g?c[i]=0:(c[i]=1,d-=g),d<<=1,l[n-2-i]=(l[n-1-i]/2|0)+e;for(l[0]=c[0],u[0]=new Array(l[0]),h[0]=new Array(l[0]),i=1;i<n;++i)l[i]>2*l[i-1]+c[i]&&(l[i]=2*l[i-1]+c[i]),u[i]=new Array(l[i]),h[i]=new Array(l[i]);for(r=0;r<e;++r)f[r]=n;for(a=0;a<l[n-1];++a)u[n-1][a]=t[a],h[n-1][a]=a;for(r=0;r<n;++r)p[r]=0;for(1===c[n-1]&&(--f[0],++p[n-1]),i=n-2;i>=0;--i){for(r=0,o=0,s=p[i+1],a=0;a<l[i];a++)(o=u[i+1][s]+u[i+1][s+1])>t[r]?(u[i][a]=o,h[i][a]=e,s+=2):(u[i][a]=t[r],h[i][a]=r,++r);p[i]=0,1===c[i]&&m(i)}return f},Gr.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,n,r,i,a=new Uint16Array(t.length),o=[],s=[],l=0;for(e=0,n=t.length;e<n;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,n=Gr.RawDeflate.MaxCodeLength;e<=n;e++)s[e]=l,l+=0|o[e],l<<=1;for(e=0,n=t.length;e<n;e++)for(l=s[t[e]],s[t[e]]+=1,a[e]=0,r=0,i=t[e];r<i;r++)a[e]=a[e]<<1|1&l,l>>>=1;return a},Gr.Unzip=function(t,e){e=e||{},this.input=t instanceof Array?new Uint8Array(t):t,this.ip=0,this.eocdrOffset,this.numberOfThisDisk,this.startDisk,this.totalEntriesThisDisk,this.totalEntries,this.centralDirectorySize,this.centralDirectoryOffset,this.commentLength,this.comment,this.fileHeaderList,this.filenameToIndex,this.verify=e.verify||!1,this.password=e.password},Gr.Unzip.CompressionMethod=Gr.Zip.CompressionMethod,Gr.Unzip.FileHeaderSignature=Gr.Zip.FileHeaderSignature,Gr.Unzip.LocalFileHeaderSignature=Gr.Zip.LocalFileHeaderSignature,Gr.Unzip.CentralDirectorySignature=Gr.Zip.CentralDirectorySignature,Gr.Unzip.FileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.version,this.os,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.fileCommentLength,this.diskNumberStart,this.internalFileAttributes,this.externalFileAttributes,this.relativeOffset,this.filename,this.extraField,this.comment},Gr.Unzip.FileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==Gr.Unzip.FileHeaderSignature[0]||t[e++]!==Gr.Unzip.FileHeaderSignature[1]||t[e++]!==Gr.Unzip.FileHeaderSignature[2]||t[e++]!==Gr.Unzip.FileHeaderSignature[3])throw new Error("invalid file header signature");this.version=t[e++],this.os=t[e++],this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.fileCommentLength=t[e++]|t[e++]<<8,this.diskNumberStart=t[e++]|t[e++]<<8,this.internalFileAttributes=t[e++]|t[e++]<<8,this.externalFileAttributes=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,this.relativeOffset=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.comment=t.subarray(e,e+this.fileCommentLength),this.length=e-this.offset},Gr.Unzip.LocalFileHeader=function(t,e){this.input=t,this.offset=e,this.length,this.needVersion,this.flags,this.compression,this.time,this.date,this.crc32,this.compressedSize,this.plainSize,this.fileNameLength,this.extraFieldLength,this.filename,this.extraField},Gr.Unzip.LocalFileHeader.Flags=Gr.Zip.Flags,Gr.Unzip.LocalFileHeader.prototype.parse=function(){var t=this.input,e=this.offset;if(t[e++]!==Gr.Unzip.LocalFileHeaderSignature[0]||t[e++]!==Gr.Unzip.LocalFileHeaderSignature[1]||t[e++]!==Gr.Unzip.LocalFileHeaderSignature[2]||t[e++]!==Gr.Unzip.LocalFileHeaderSignature[3])throw new Error("invalid local file header signature");this.needVersion=t[e++]|t[e++]<<8,this.flags=t[e++]|t[e++]<<8,this.compression=t[e++]|t[e++]<<8,this.time=t[e++]|t[e++]<<8,this.date=t[e++]|t[e++]<<8,this.crc32=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.compressedSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.plainSize=(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)>>>0,this.fileNameLength=t[e++]|t[e++]<<8,this.extraFieldLength=t[e++]|t[e++]<<8,this.filename=String.fromCharCode.apply(null,t.subarray(e,e+=this.fileNameLength)),this.extraField=t.subarray(e,e+=this.extraFieldLength),this.length=e-this.offset},Gr.Unzip.prototype.searchEndOfCentralDirectoryRecord=function(){var t,e=this.input;for(t=e.length-12;t>0;--t)if(e[t]===Gr.Unzip.CentralDirectorySignature[0]&&e[t+1]===Gr.Unzip.CentralDirectorySignature[1]&&e[t+2]===Gr.Unzip.CentralDirectorySignature[2]&&e[t+3]===Gr.Unzip.CentralDirectorySignature[3])return void(this.eocdrOffset=t);throw new Error("End of Central Directory Record not found")},Gr.Unzip.prototype.parseEndOfCentralDirectoryRecord=function(){var t,e=this.input;if(this.eocdrOffset||this.searchEndOfCentralDirectoryRecord(),t=this.eocdrOffset,e[t++]!==Gr.Unzip.CentralDirectorySignature[0]||e[t++]!==Gr.Unzip.CentralDirectorySignature[1]||e[t++]!==Gr.Unzip.CentralDirectorySignature[2]||e[t++]!==Gr.Unzip.CentralDirectorySignature[3])throw new Error("invalid signature");this.numberOfThisDisk=e[t++]|e[t++]<<8,this.startDisk=e[t++]|e[t++]<<8,this.totalEntriesThisDisk=e[t++]|e[t++]<<8,this.totalEntries=e[t++]|e[t++]<<8,this.centralDirectorySize=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.centralDirectoryOffset=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.commentLength=e[t++]|e[t++]<<8,this.comment=e.subarray(t,t+this.commentLength)},Gr.Unzip.prototype.parseFileHeader=function(){var t,e,n,r,i=[],a={};if(!this.fileHeaderList){for(void 0===this.centralDirectoryOffset&&this.parseEndOfCentralDirectoryRecord(),t=this.centralDirectoryOffset,n=0,r=this.totalEntries;n<r;++n)(e=new Gr.Unzip.FileHeader(this.input,t)).parse(),t+=e.length,i[n]=e,a[e.filename]=n;if(this.centralDirectorySize<t-this.centralDirectoryOffset)throw new Error("invalid file header size");this.fileHeaderList=i,this.filenameToIndex=a}},Gr.Unzip.prototype.getFileData=function(t,e){e=e||{};var n,r,i,a,o,s,l,c,f=this.input,u=this.fileHeaderList;if(u||this.parseFileHeader(),void 0===u[t])throw new Error("wrong index");if(r=u[t].relativeOffset,(n=new Gr.Unzip.LocalFileHeader(this.input,r)).parse(),r+=n.length,i=n.compressedSize,0!=(n.flags&Gr.Unzip.LocalFileHeader.Flags.ENCRYPT)){if(!e.password&&!this.password)throw new Error("please set password");for(s=this.createDecryptionKey(e.password||this.password),l=r,c=r+12;l<c;++l)this.decode(s,f[l]);for(l=r+=12,c=r+(i-=12);l<c;++l)f[l]=this.decode(s,f[l])}switch(n.compression){case Gr.Unzip.CompressionMethod.STORE:a=this.input.subarray(r,r+i);break;case Gr.Unzip.CompressionMethod.DEFLATE:a=new Gr.RawInflate(this.input,{index:r,bufferSize:n.plainSize}).decompress();break;default:throw new Error("unknown compression type")}if(this.verify&&(o=Gr.CRC32.calc(a),n.crc32!==o))throw new Error("wrong crc: file=0x"+n.crc32.toString(16)+", data=0x"+o.toString(16));return a},Gr.Unzip.prototype.getFilenames=function(){var t,e,n,r=[];for(this.fileHeaderList||this.parseFileHeader(),t=0,e=(n=this.fileHeaderList).length;t<e;++t)r[t]=n[t].filename;return r},Gr.Unzip.prototype.decompress=function(t,e){var n;if(this.filenameToIndex||this.parseFileHeader(),void 0===(n=this.filenameToIndex[t]))throw new Error(t+" not found");return this.getFileData(n,e)},Gr.Unzip.prototype.setPassword=function(t){this.password=t},Gr.Unzip.prototype.decode=function(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},Gr.Unzip.prototype.updateKeys=Gr.Zip.prototype.updateKeys,Gr.Unzip.prototype.createDecryptionKey=Gr.Zip.prototype.createEncryptionKey,Gr.Unzip.prototype.getByte=Gr.Zip.prototype.getByte,Gr.Util.stringToByteArray=function(t){var e,n,r=t.split("");for(e=0,n=r.length;e<n;e++)r[e]=(255&r[e].charCodeAt(0))>>>0;return r},Gr.Adler32=function(t){return"string"==typeof t&&(t=Gr.Util.stringToByteArray(t)),Gr.Adler32.update(1,t)},Gr.Adler32.update=function(t,e){for(var n,r=65535&t,i=t>>>16&65535,a=e.length,o=0;a>0;){a-=n=a>Gr.Adler32.OptimizationParameter?Gr.Adler32.OptimizationParameter:a;do{i+=r+=e[o++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},Gr.Adler32.OptimizationParameter=1024,Gr.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof Uint8Array?t:new Uint8Array(Gr.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},Gr.BitStream.DefaultBlockSize=32768,Gr.BitStream.prototype.expandBuffer=function(){var t=this.buffer,e=t.length,n=new Uint8Array(e<<1);return n.set(t),this.buffer=n},Gr.BitStream.prototype.writeBits=function(t,e,n){var r,i=this.buffer,a=this.index,o=this.bitindex,s=i[a];if(n&&e>1&&(t=e>8?function(t){return Gr.BitStream.ReverseTable[255&t]<<24|Gr.BitStream.ReverseTable[t>>>8&255]<<16|Gr.BitStream.ReverseTable[t>>>16&255]<<8|Gr.BitStream.ReverseTable[t>>>24&255]}(t)>>32-e:Gr.BitStream.ReverseTable[t]>>8-e),e+o<8)s=s<<e|t,o+=e;else for(r=0;r<e;++r)s=s<<1|t>>e-r-1&1,8==++o&&(o=0,i[a++]=Gr.BitStream.ReverseTable[s],s=0,a===i.length&&(i=this.expandBuffer()));i[a]=s,this.buffer=i,this.bitindex=o,this.index=a},Gr.BitStream.prototype.finish=function(){var t=this.buffer,e=this.index;return this.bitindex>0&&(t[e]<<=8-this.bitindex,t[e]=Gr.BitStream.ReverseTable[t[e]],e++),t.subarray(0,e)},Gr.BitStream.ReverseTable=function(){var t,e=new Uint8Array(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,n=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--n;return(e<<n&255)>>>0}(t);return e}(),Gr.CRC32.calc=function(t,e,n){return Gr.CRC32.update(t,0,e,n)},Gr.CRC32.update=function(t,e,n,r){var i=Gr.CRC32.Table,a="number"==typeof n?n:n=0,o="number"==typeof r?r:t.length;for(e^=4294967295,a=7&o;a--;++n)e=e>>>8^i[255&(e^t[n])];for(a=o>>3;a--;n+=8)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^i[255&(e^t[n])])>>>8^i[255&(e^t[n+1])])>>>8^i[255&(e^t[n+2])])>>>8^i[255&(e^t[n+3])])>>>8^i[255&(e^t[n+4])])>>>8^i[255&(e^t[n+5])])>>>8^i[255&(e^t[n+6])])>>>8^i[255&(e^t[n+7])];return(4294967295^e)>>>0},Gr.CRC32.single=function(t,e){return(Gr.CRC32.Table[255&(t^e)]^t>>>8)>>>0},Gr.CRC32.Table_=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Gr.CRC32.Table=new Uint32Array(Gr.CRC32.Table_),Gr.Deflate=function(t,e){this.input=t,this.output=new Uint8Array(Gr.Deflate.DefaultBufferSize),this.compressionType=Gr.Deflate.CompressionType.DYNAMIC,this.rawDeflate;var n,r={};for(n in!e&&(e={})||"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e)r[n]=e[n];r.outputBuffer=this.output,this.rawDeflate=new Gr.RawDeflate(this.input,r)},Gr.Deflate.DefaultBufferSize=32768,Gr.Deflate.CompressionType=Gr.RawDeflate.CompressionType,Gr.Deflate.compress=function(t,e){return new Gr.Deflate(t,e).compress()},Gr.Deflate.prototype.compress=function(){var t,e,n,r,i,a,o,s=0;switch(o=this.output,t=Gr.CompressionMethod.DEFLATE){case Gr.CompressionMethod.DEFLATE:e=Math.LOG2E*Math.log(Gr.RawDeflate.WindowSize)-8;break;default:throw new Error("invalid compression method")}switch(n=e<<4|t,o[s++]=n,0,t){case Gr.CompressionMethod.DEFLATE:switch(this.compressionType){case Gr.Deflate.CompressionType.NONE:i=0;break;case Gr.Deflate.CompressionType.FIXED:i=1;break;case Gr.Deflate.CompressionType.DYNAMIC:i=2;break;default:throw new Error("unsupported compression type")}break;default:throw new Error("invalid compression method")}return r=i<<6|0,r|=31-(256*n+r)%31,o[s++]=r,a=Gr.Adler32(this.input),this.rawDeflate.op=s,s=(o=this.rawDeflate.compress()).length,(o=new Uint8Array(o.buffer)).length<=s+4&&(this.output=new Uint8Array(o.length+4),this.output.set(o),o=this.output),(o=o.subarray(0,s+4))[s++]=a>>24&255,o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a,o},Vr="undefined"==typeof btoa?require("btoa"):btoa;let Xr=!1;async function Jr(t){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");if(!gapi.auth2)throw Error("Google 'auth2' has not been initialized");if(Xr)return new Promise((function(e,n){let r;r=setInterval((()=>{try{!1===Xr&&(e(Jr(t)),clearInterval(r))}catch(t){clearInterval(r),n(t)}}),100)}));Xr=!0;try{let e,n=gapi.auth2.getAuthInstance().currentUser.get();if(n.isSignedIn()){n.hasGrantedScopes(t)||await n.grant({scope:t});const{access_token:r,expires_at:i}=n.getAuthResponse();if(Date.now()<i-3e5)e={access_token:r,expires_at:i};else{const{access_token:t,expires_at:r}=n.reloadAuthResponse();e={access_token:t,expires_at:r}}}else{n=await async function(t){const e=new gapi.auth2.SigninOptionsBuilder;return e.setPrompt("select_account"),e.setScope(t),gapi.auth2.getAuthInstance().signIn(e)}(t);const{access_token:r,expires_at:i}=n.getAuthResponse();e={access_token:r,expires_at:i}}return e}finally{Xr=!1}}async function Qr(t){let e="https://www.googleapis.com/drive/v3/files/"+Wr(t)+"?supportsTeamDrives=true";const n=gapi.apiKey;n&&(e+="&key="+n);const r=await fetch(e);let i=await r.json();if(i.error&&404===i.error.code){const{access_token:t}=await Jr("https://www.googleapis.com/auth/drive.readonly");if(!t)throw Error(i.error);{const n=await fetch(e,{headers:{Authorization:`Bearer ${t}`}});if(i=await n.json(),i.error)throw Error(i.error)}}return i}"object"==typeof process&&"undefined"==typeof window&&(global.atob=function(t){return Buffer.from(t,"base64").toString("binary")});const ti={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function ei(t){if(void 0===t)return;let e=(ni(t)||t.google_url?t.name:t).toLowerCase(),n=e.indexOf("?");return n>0&&(e=e.substr(0,n)),e.endsWith(".gz")?e=e.substr(0,e.length-3):(e.endsWith(".txt")||e.endsWith(".tab")||e.endsWith(".bgz"))&&(e=e.substr(0,e.length-4)),n=e.lastIndexOf("."),n<0?e:e.substr(1+n)}function ni(t){return t instanceof File}const ri=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","vcf","bb","bigbed","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram","gwas"]);function ii(t){var e,n;if((t=t.toLowerCase()).endsWith("refgene.txt.gz")||t.endsWith("refgene.txt.bgz")||t.endsWith("refgene.txt")||t.endsWith("refgene.sorted.txt.gz")||t.endsWith("refgene.sorted.txt.bgz"))return"refgene";switch((e=t.indexOf("?"))>0&&(t=t.substr(0,e)),t.endsWith(".gz")&&(t=t.substr(0,t.length-3)),(t.endsWith(".txt")||t.endsWith(".tab")||t.endsWith(".bgz"))&&(t=t.substr(0,t.length-4)),n=(e=t.lastIndexOf("."))<0?t:t.substr(e+1)){case"bw":return"bigwig";case"bb":return"bigbed";default:return ri.has(n)?n:void 0}}async function ai(t,e){if("undefined"==typeof gapi)throw Error("Google authentication requires the 'gapi' library");"undefined"!=typeof google&&google.picker||await async function(){return new Promise((function(t,e){gapi.load("picker",{callback:t,onerror:e})}))}();const{access_token:n}=await Jr("https://www.googleapis.com/auth/drive.file");if(!n)throw Error("Sign into Google before using picker");{const r=new google.picker.DocsView(google.picker.ViewId.DOCS);r.setIncludeFolders(!0);const i=new google.picker.DocsView(google.picker.ViewId.DOCS);let a;i.setEnableTeamDrives(!0),i.setIncludeFolders(!0),a=t?(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(n).addView(r).addView(i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(t){t[google.picker.Response.ACTION]===google.picker.Action.PICKED&&e(t[google.picker.Response.DOCUMENTS])})).build():(new google.picker.PickerBuilder).disableFeature(google.picker.Feature.MULTISELECT_ENABLED).setOAuthToken(n).addView(r).addView(i).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).setCallback((function(t){t[google.picker.Response.ACTION]===google.picker.Action.PICKED&&e(t[google.picker.Response.DOCUMENTS])})).build(),a.setVisible(!0)}}let oi;function si(t,e){e.addEventListener("mousedown",li.bind(t))}function li(t){t.stopPropagation(),t.preventDefault();!function(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;e.top,n.pageYOffset,e.left,n.pageXOffset}(this);const e=ci.bind(this),n=fi.bind(this),r=getComputedStyle(this),i=parseInt(r.top.replace("px","")),a=parseInt(r.left.replace("px",""));oi={dragFunction:e,dragEndFunction:n,screenX:t.screenX,screenY:t.screenY,top:i,left:a},document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),document.addEventListener("mouseleave",n),document.addEventListener("mouseexit",n)}function ci(t){if(!oi)return;t.stopPropagation(),t.preventDefault();const e=t.screenX-oi.screenX,n=t.screenY-oi.screenY;this.style.left=`${oi.left+e}px`,this.style.top=`${oi.top+n}px`}function fi(t){if(!oi)return;t.stopPropagation(),t.preventDefault();const e=oi.dragFunction,n=oi.dragEndFunction;document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n),document.removeEventListener("mouseleave",n),document.removeEventListener("mouseexit",n),oi=void 0}const ui={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class hi{constructor(t){this.container=Hr({class:"igv-ui-alert-dialog-container"}),t.appendChild(this.container),this.container.setAttribute("tabIndex","-1");const e=Hr();this.container.appendChild(e),this.errorHeadline=Hr(),e.appendChild(this.errorHeadline),this.errorHeadline.textContent="";let n=Hr({id:"igv-ui-alert-dialog-body"});this.container.appendChild(n),this.body=Hr({id:"igv-ui-alert-dialog-body-copy"}),n.appendChild(this.body);let r=Hr();this.container.appendChild(r),this.ok=Hr(),r.appendChild(this.ok),this.ok.textContent="OK";const i=()=>{"function"==typeof this.callback&&(this.callback("OK"),this.callback=void 0),this.body.innerHTML="",Pr(this.container)};this.ok.addEventListener("click",(t=>{t.stopPropagation(),i()})),this.container.addEventListener("keypress",(t=>{t.stopPropagation(),"Enter"===t.key&&i()})),si(this.container,e),Pr(this.container)}present(t,e){this.errorHeadline.textContent=t.message?"ERROR":"";let n=t.message||t;ui.hasOwnProperty(n)&&(n=ui[n]),this.body.innerHTML=n,this.callback=e,$r(this.container),this.container.focus()}}var pi=new class{constructor(t){t&&(this.alertDialog=void 0)}init(t){this.alertDialog=new hi(t)}present(t,e){this.alertDialog.present(t,e)}};class di{constructor(){this.dictionary={}}inputHandler(t,e){this.ingestPath(t,e)}ingestPath(t,e){let n=!0===e?"index":"data";this.dictionary[n]=t.trim()}didDragDrop(t){var e;return(e=t.files)&&e.length>0}dragDropHandler(t,e){var n,r;n=t.getData("text/uri-list"),(r=t.files)&&r.length>0?this.ingestPath(r[0],e):n&&""!==n&&this.ingestPath(n,e)}indexName(){return gi(this.dictionary.index)}dataName(){return gi(this.dictionary.data)}reset(){this.dictionary={}}}function gi(t){return ni(t)?t.name:t}class mi{constructor({widgetParent:t,dataTitle:e,indexTitle:n,mode:r,fileLoadManager:i,dataOnly:a,doURL:o}){let s;var l,c,f;e=e||"Data",n=n||"Index",this.fileLoadManager=i,a=a||!1,o=o||!1,this.container=Hr({class:"igv-file-load-widget-container"}),t.appendChild(this.container),s="localFile"===r?{parent:this.container,doURL:!1,dataTitle:e+" file",indexTitle:n+" file",dataOnly:a}:{parent:this.container,doURL:!0,dataTitle:e+" URL",indexTitle:n+" URL",dataOnly:a},this.createInputContainer(s),this.error_message=Hr({class:"igv-flw-error-message-container"}),this.container.appendChild(this.error_message),this.error_message.appendChild(Hr({class:"igv-flw-error-message"})),l=this.error_message,c=()=>{this.dismissErrorMessage()},f=document.createElement("div"),l.appendChild(f),f.appendChild(jr("times")),f.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),c()})),this.dismissErrorMessage()}retrievePaths(){this.fileLoadManager.ingestPath(this.inputData.value,!1),this.inputIndex&&this.fileLoadManager.ingestPath(this.inputIndex.value,!0);let t=[];return this.fileLoadManager.dictionary&&(this.fileLoadManager.dictionary.data&&t.push(this.fileLoadManager.dictionary.data),this.fileLoadManager.dictionary.index&&t.push(this.fileLoadManager.dictionary.index)),this.container.querySelectorAll(".igv-flw-input-row").forEach((t=>{t.querySelector("input").value=""})),t}presentErrorMessage(t){this.error_message.querySelector(".igv-flw-error-message").textContent=t,$r(this.error_message)}dismissErrorMessage(){Pr(this.error_message),this.error_message.querySelector(".igv-flw-error-message").textContent=""}present(){$r(this.container)}dismiss(){this.dismissErrorMessage(),this.container.querySelectorAll(".igv-flw-input-row").forEach((t=>{t.querySelector("input").value=""})),this.fileLoadManager.reset()}createInputContainer({parent:t,doURL:e,dataTitle:n,indexTitle:r,dataOnly:i}){const a=Hr({class:"igv-flw-input-container"});t.appendChild(a);const o=Hr({class:"igv-flw-input-row"});let s;if(a.appendChild(o),s=Hr({class:"igv-flw-input-label"}),o.appendChild(s),s.textContent=n,!0===e?this.createURLContainer(o,"igv-flw-data-url",!1):this.createLocalFileContainer(o,"igv-flw-local-data-file",!1),!0===i)return;const l=Hr({class:"igv-flw-input-row"});a.appendChild(l),s=Hr({class:"igv-flw-input-label"}),l.appendChild(s),s.textContent=r,!0===e?this.createURLContainer(l,"igv-flw-index-url",!0):this.createLocalFileContainer(l,"igv-flw-local-index-file",!0)}createURLContainer(t,e,n){const r=Nr("input");r.setAttribute("type","text"),t.appendChild(r),n?this.inputIndex=r:this.inputData=r}createLocalFileContainer(t,e,n){const r=Hr({class:"igv-flw-file-chooser-container"});t.appendChild(r);const i=`${e}${("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}`,a=Nr("label");a.setAttribute("for",i),r.appendChild(a),a.textContent="Choose file";const o=Nr("input",{class:"igv-flw-file-chooser-input"});o.setAttribute("id",i),o.setAttribute("name",i),o.setAttribute("type","file"),r.appendChild(o);const s=Hr({class:"igv-flw-local-file-name-container"});t.appendChild(s),Pr(s),o.addEventListener("change",(t=>{this.dismissErrorMessage();const e=t.target.files[0];this.fileLoadManager.inputHandler(e,n);const{name:r}=e;s.textContent=r,s.setAttribute("title",r),$r(s)}))}}function wi(t){let e,n,r,i,a;if(e=ei(t),!1!==yi(e)){if(n=t.split(".").pop(),r=function(t){const e={index:"idx",isOptional:!0},n={fa:{index:"fai",isOptional:!1},fasta:{index:"fai",isOptional:!1},bam:{index:"bai",isOptional:!1},cram:{index:"crai",isOptional:!1},gz:{index:"tbi",isOptional:!0},bgz:{index:"tbi",isOptional:!0}};return n[t]?n[t]:e}(n),i={},a=t+"."+r.index,i[a]={},i[a].data=t,i[a].isOptional=r.isOptional,"bam"===e||"cram"===e){let e,n;n=t.split("."),n.pop(),e=n.join(".")+"."+r.index,i[e]={},i[e].data=t,i[e].isOptional=r.isOptional}return i}}function yi(t){let e=new Set(["fa","fasta"]);return new Set([...TrackUtils.knownFileExtensions,...e]).has(t)}function vi(t,e,n){const r=()=>{t.dismiss(),$(e).modal("hide")},i=async()=>{!0===await n(t)&&(t.dismiss(),$(e).modal("hide"))};let a;a=e.querySelector(".modal-header button"),a.addEventListener("click",r),a=e.querySelector(".modal-footer button:nth-child(1)"),a.addEventListener("click",r);e.querySelector(".modal-footer button:nth-child(2)").addEventListener("click",i),e.addEventListener("keypress",(t=>{"Enter"===t.key&&i()}))}var bi=Object.freeze({__proto__:null,getIndexObjectWithDataName:wi,isKnownFileExtension:yi,configureModal:vi});class xi{constructor({localFileInput:t,dropboxButton:e,googleEnabled:n,googleDriveButton:r,igvxhr:i}){this.igvxhr=i,t.addEventListener("change",(async()=>{!0===xi.isValidLocalFileInput(t)&&(await this.loadPaths(Array.from(t.files)),t.value="")})),e.addEventListener("click",(()=>{const t={success:t=>this.loadPaths(t.map((t=>t.link))),cancel:()=>{},linkType:"preview",multiselect:!0,folderselect:!1};Dropbox.choose(t)})),!1===n&&Pr(r.parentElement),!0===n&&r&&r.addEventListener("click",(()=>{ai(!0,(t=>{const e=t.map((({name:t,url:e})=>({filename:t,name:t,google_url:qr(e)})));this.loadPaths(e)}))}))}async loadPaths(t){}static isValidLocalFileInput(t){return t.files&&t.files.length>0}static getIndexURL(t){return t?t[0]?t[0].path:t[1]?t[1].path:void 0:void 0}static getIndexPaths(t,e){return Object.keys(t).map((function(t){let n;n=wi(t);for(let t in n)n.hasOwnProperty(t)&&(n[t].missing=void 0===e[t]);return n})).filter((function(t){if(1===Object.keys(t).length){let e;return e=t[Object.keys(t)[0]],(!0!==e.missing||!0!==e.isOptional)&&(!1===e.missing&&!1===e.isOptional||!0===e.missing&&e.isOptional,!0)}return!0})).reduce((function(t,n){for(let r in n)if(n.hasOwnProperty(r)){let i;i=n[r],void 0===t[i.data]&&(t[i.data]=[]),t[i.data].push(!1===i.missing?{name:r,path:e[r]}:void 0)}return t}),{})}}const Si=new Set(["fai","fa","fasta"]),Ei=new Set(["fna","fa","fasta"]),Ri=new Set(["fai"]),ki="Genome not loaded - you must select both a sequence file (.fa or .fasta) and an index file (.fai)";class Ci extends xi{constructor({localFileInput:t,dropboxButton:e,googleEnabled:n,googleDriveButton:r,loadHandler:i,igvxhr:a}){super({localFileInput:t,dropboxButton:e,googleEnabled:n,googleDriveButton:r,igvxhr:a}),this.loadHandler=i}async loadPaths(t){if(1===t.length){const e=t[0];if("json"===ei(e)){const t=await this.igvxhr.loadJson(e.google_url||e);this.loadHandler(t)}else if("xml"===ei(e)){const t={};t[!0===ni(e)?"file":"url"]=e,this.loadHandler(t)}else pi.present(new Error(ki))}else if(2===t.length){let[e,n]=t.map((t=>ei(t)));if(!1===Ci.extensionValidator(e,n))return void pi.present(new Error(ki));const[r,i]=Ci.retrieveDataPathAndIndexPath(t);await this.loadHandler({fastaURL:r,indexURL:i})}else pi.present(new Error(ki))}static retrieveDataPathAndIndexPath(t){let[e,n]=t.map((t=>ei(t)));const[r,i]=t;let a,o;return Ei.has(e)&&Ri.has(n)?(a=r.google_url||r,o=i.google_url||i):(a=i.google_url||i,o=r.google_url||r),[a,o]}static extensionValidator(t,e){return!(!Ei.has(t)||!Ri.has(e))||Ei.has(e)&&Ri.has(t)}static pathValidator(t){return Si.has(t)}static configurationHandler(t,e,n){return{fastaURL:e,indexURL:xi.getIndexURL(n[t])}}}class Di extends xi{constructor({localFileInput:t,dropboxButton:e,googleEnabled:n,googleDriveButton:r,loadHandler:i,igvxhr:a}){super({localFileInput:t,dropboxButton:e,googleEnabled:n,googleDriveButton:r,igvxhr:a}),this.loadHandler=i}async loadPaths(t){const e=t[0];if("json"===ei(e)){const t=await this.igvxhr.loadJson(e.google_url||e);this.loadHandler(t)}else if("xml"===ei(e)){const t={};t[!0===ni(e)?"file":"url"]=e,this.loadHandler(t)}}}class Li{constructor({$localFileInput:t,$dropboxButton:e,$googleDriveButton:n,fileLoadHandler:r,multipleFileSelection:i}){this.fileLoadHandler=r,t.on("change",(async()=>{if(!0===Li.isValidLocalFileInput(t)){const e=t.get(0),{files:n}=e,i=Array.from(n);e.value="",await Bi({paths:i,fileLoadHandler:r})}})),e.on("click",(()=>{const t={success:t=>Bi({paths:t.map((({link:t})=>t)),fileLoadHandler:r}),cancel:()=>{},linkType:"preview",multiselect:i,folderselect:!1};Dropbox.choose(t)})),n&&n.on("click",(()=>{ai(i,(async t=>{await Bi({paths:t.map((({name:t,url:e})=>e)),fileLoadHandler:r})}))}))}async loadPaths(t){await Bi({paths:t,fileLoadHandler:this.fileLoadHandler})}static isValidLocalFileInput(t){return t.get(0).files&&t.get(0).files.length>0}static async getFilename(t){if(t instanceof File)return t.name;if(Yr(t)){const e=await Qr(t);return e.name||e.originalFileName}return function(t){for(var e=ti,n=e.parser.loose.exec(t),r={},i=14;i--;)r[e.key[i]]=n[i]||"";return r[e.q.name]={},r[e.key[12]].replace(e.q.parser,(function(t,n,i){n&&(r[e.q.name][n]=i)})),r}(t).file}static isGoogleDrivePath(t){return!(t instanceof File)&&Yr(t)}}const Ti=new Set(["bai","csi","tbi","idx","crai"]),Ii=new Set(["bam","cram"]);async function Bi({paths:t,fileLoadHandler:e}){try{await async function({paths:t,fileLoadHandler:e}){const n=new Map,r=[];for(let e of t){const t=await Li.getFilename(e),i=ei(t);if(Ti.has(i)){const r=Ai(t,i);n.set(r,{indexURL:e,indexFilename:Li.isGoogleDrivePath(e)?t:void 0})}else r.push(e)}const i=[];for(let t of r){const e=await Li.getFilename(t),r=ii(e);if(!r)throw new Error(`Unable to load track file ${e} - unknown file format`);if(n.has(e)){const{indexURL:a,indexFilename:o}=n.get(e);i.push({url:t,name:e,indexURL:a,indexFilename:o,format:r})}else{if(Ii.has(ei(e)))throw new Error(`Unable to load track file ${e} - you must select both ${e} and its corresponding index file`);i.push({url:t,name:e,format:r})}}i&&e(i)}({paths:t,fileLoadHandler:e})}catch(t){console.error(t),pi.present(t.message)}}const Ai=(t,e)=>{let n=t.substring(0,t.length-(e.length+1));return"bai"!==e||n.endsWith("bam")?"crai"!==e||n.endsWith("cram")?n:`${n}.cram`:`${n}.bam`},Oi=(t,e)=>`<div id="${t}" class="modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n                        <div class="modal-title">${e}</div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span>&times;</span>\n                        </button>\n    \n                    </div>\n    \n                    <div class="modal-body">\n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n\n        </div>`;let _i;function Mi(t,e,n,r,i,a,o,s,l,c,f){const u=$(Oi(o,"Session URL"));t.append(u),l||$(`#${a}`).parent().hide();const h={widgetParent:u.find(".modal-body").get(0),dataTitle:"Session",indexTitle:void 0,mode:"url",fileLoadManager:new di,dataOnly:!0,doURL:void 0};_i=new mi(h);const p={localFileInput:document.querySelector(`#${r}`),dropboxButton:document.querySelector(`#${i}`),googleEnabled:l,googleDriveButton:document.querySelector(`#${a}`),loadHandler:c,igvxhr:e},d=new Di(p);vi(_i,u.get(0),(async t=>(await d.loadPaths(t.retrievePaths()),!0))),function(t,e,n,r){const i=$(`<div id="${r}" class="modal fade igv-app-file-save-modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n    \n                        <div class="modal-title">\n                            <div>\n                                Save Session File\n                            </div>\n                        </div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n    \n                    <div class="modal-body">\n                        <input class="form-control" type="text" placeholder="igv-app-session.json">\n    \n                        <div>\n                            Enter session filename with .json suffix\n                        </div>\n    \n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n    \n        </div>`);t.append(i);let a=i.find("input"),o=()=>{const t=new Set(["json","xml"]);let e=a.val();void 0===e||""===e?e=a.attr("placeholder"):!1===t.has(ei(e))&&(e+=".json");const r=n();if(r){const t=JSON.stringify(r,null,"\t");!function(t,e){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(e,URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})))}i.modal("hide")};i.find(".modal-footer button:nth-child(2)").on("click",o),i.on("show.bs.modal",(t=>{a.val(`${e}-session.json`)})),a.on("keyup",(t=>{13===t.keyCode&&o()}))}(t,n,f,s)}var zi=function(t){this.data=t,this.ptr=0};zi.prototype.nextLine=function(){var t=this.ptr,e=this.data.indexOf("\n",t);return e>0?(this.ptr=e+1,e===t?void 0:this.data.substring(t,e).trim()):(this.ptr=this.data.length,t>=this.data.length?void 0:this.data.substring(t).trim())},zi.prototype.nextLineNoTrim=function(){var t=this.ptr,e=this.data.indexOf("\n",t),n=this.data;if(e>0)return this.ptr=e+1,e>t&&"\r"===n.charAt(e-1)?n.substring(t,e-1):n.substring(t,e);var r=n.length;return this.ptr=r,t>=r?void 0:n.substring(t)};var Fi=function(t){this.data=t,this.length=this.data.length,this.ptr=0};Fi.prototype.nextLine=function(){var t,e;if(e="",!(this.ptr>=this.length)){for(var n=this.ptr;n<this.length;n++)if("\r"!==(t=String.fromCharCode(this.data[n]))){if("\n"===t)break;e+=t}return this.ptr=n+1,e}},Fi.prototype.nextLineNoTrim=Fi.prototype.nextLine;class Ui{constructor(t){this.columns=t.columns,this.columnDefs=t.columnDefs,this.rowHandler=t.rowHandler,t.data?this.data=t.data:(this.url=t.url,this.isJSON=t.isJSON||!1,this.parser=t.parser,this.filter=t.filter,this.sort=t.sort)}async tableColumns(){return this.columns}async tableData(){if(!this.data){let t;try{const e=this.url;t=await fetch(e)}catch(t){return void console.error(t)}if(t){const e=await t.text();let n;this.parser?n=this.parser.parse(e):this.isJSON?(n=JSON.parse(e),"function"==typeof this.filter&&(n=n.filter(this.filter))):n=this.parseTabData(e,this.filter),"function"==typeof this.sort&&n.sort(this.sort),this.data=n}}return this.data}parseTabData(t,e){const n=function(t){return"string"==typeof t||t instanceof String?new zi(t):new Fi(t)}(t),r=n.nextLine().split("\t"),i=[];let a;for(;a=n.nextLine();){const t={},n=a.split("\t");if(n.length!==r.length)throw Error("Number of values must equal number of headers in file "+this.url);for(let e=0;e<r.length;e++)t[r[e]]=n[e];(void 0===e||e(t))&&i.push(t)}return i}}class Hi{constructor(t){this.datasource=t.datasource,this.okHandler=t.okHandler,this.pageLength=t.pageLength||10,t.selectionStyle?this.select={style:t.selectionStyle}:this.select=!0;const e=t.id,n=t.title||"",r=t.parent?$(t.parent):$("body"),i=$(`\n        <div id="${e}" class="modal fade">\n        \n            <div class="modal-dialog modal-xl">\n        \n                <div class="modal-content">\n        \n                    <div class="modal-header">\n                        <div class="modal-title">${n}</div>\n                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n        \n                    <div class="modal-body">\n        \n                        <div id="${e}-spinner" class="spinner-border" style="display: none;">\n                            \x3c!-- spinner --\x3e\n                        </div>\n        \n                        <div id="${e}-datatable-container">\n        \n                        </div>\n                    </div>\n        \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n        \n                </div>\n        \n            </div>\n        \n        </div>\n    `);r.append(i),this.$modal=i,this.$datatableContainer=i.find(`#${e}-datatable-container`),this.$spinner=i.find(`#${e}-spinner`);const a=i.find(".modal-footer button:nth-child(2)");i.on("shown.bs.modal",(t=>{this.buildTable()})),i.on("hidden.bs.modal",(t=>{$(t.relatedTarget).find("tr.selected").removeClass("selected")})),a.on("click",(t=>{const e=this.getSelectedTableRowsData.call(this,this.$dataTable.$("tr.selected"));e&&this.okHandler&&this.okHandler(e)}))}remove(){this.$modal.remove()}setDatasource(t){this.datasource=t,this.$datatableContainer.empty(),this.$table=void 0}async buildTable(){if(!this.$table&&this.datasource){this.$table=$('<table class="display"></table>'),this.$datatableContainer.append(this.$table);try{this.startSpinner();const t=await this.datasource.tableData(),e=await this.datasource.tableColumns(),n=this.datasource.columnDefs,r={data:t,columns:e.map((t=>n&&n[t]?Object.assign({},n[t],{data:t}):{title:t,data:t})),pageLength:this.pageLength,select:this.select,autoWidth:!1,paging:!0,scrollX:!0,scrollY:"400px"};this.api=this.$table.DataTable(r),this.api.columns.adjust().draw(),this.$dataTable=this.$table.dataTable(),this.tableData=t}catch(t){}finally{this.stopSpinner()}}}getSelectedTableRowsData(t){const e=this.tableData,n=[];if(t.length>0){t.removeClass("selected");const r=this.$table.api();return t.each((function(){const t=r.row(this).index();n.push(e[t])})),"function"==typeof this.datasource.rowHandler?n.map((t=>this.datasource.rowHandler(t))):n}}startSpinner(){this.$spinner&&this.$spinner.show()}stopSpinner(){this.$spinner&&this.$spinner.hide()}}function Ni(t,e){const n="other"===e?".other.txt":"signals"===e?".signals.txt":void 0;return{isJSON:!1,url:`https://s3.amazonaws.com/igv.org.app/encode/${Pi(t)}${n}`,sort:$i,columns:["Biosample","AssayType","Target","BioRep","TechRep","OutputType","Format","Lab","Accession","Experiment"],columnDefs:{AssayType:{title:"Assay Type"},OutputType:{title:"Output Type"},BioRep:{title:"Bio Rep"},TechRep:{title:"Tech Rep"}},rowHandler:t=>({name:function(t){let e=t.Biosample||"";t.Target&&(e+=" "+t.Target);"chip-seq"!==t.AssayType.toLowerCase()&&(e+=" "+t.AssayType);return e}(t),url:`https://www.encodeproject.org${t.HREF}`,color:function(t){const e=t.toLowerCase();return e.startsWith("h3k4")?"rgb(0,150,0)":e.startsWith("h3k27")?"rgb(200,0,0)":e.startsWith("h3k36")?"rgb(0,0,150)":e.startsWith("h3k9")?"rgb(100,0,0)":"ctcf"===e?"black":void 0}(t.Target)})}}function Pi(t){switch(t){case"hg38":return"GRCh38";case"CRCh37":return"hg19";case"GRCm38":return"mm10";case"NCBI37":return"mm9";case"WBcel235":return"ce11";case"WS220":return"ce10";default:return t}}function $i(t,e){var n,r,i,a,o,s;return n=t["Assay Type"],r=e["Assay Type"],i=t.Biosample,a=e.Biosample,o=t.Target,s=e.Target,n===r?i===a?o===s?0:o<s?-1:1:i<a?-1:1:n<r?-1:1}let ji,Ki,Gi,Zi=[];function Vi(t,e,n,r,i,a,o,s,l,c,f,u){!function(t,e,n,r,i,a,o,s){const l=$((t=>`<div id="${t}" class="modal">\n\n            <div class="modal-dialog modal-lg">\n    \n                <div class="modal-content">\n    \n                    <div class="modal-header">\n                        <div class="modal-title">Track URL</div>\n    \n                        <button type="button" class="close" data-dismiss="modal">\n                            <span>&times;</span>\n                        </button>\n    \n                    </div>\n    \n                    <div class="modal-body">\n                    </div>\n    \n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                        <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                    </div>\n    \n                </div>\n    \n            </div>\n\n        </div>`)(o));t.append(l);let c={widgetParent:l.find(".modal-body").get(0),dataTitle:"Track",indexTitle:"Index",mode:"url",fileLoadManager:new di,dataOnly:!1,doURL:!0};ji=new mi(c),vi(ji,l.get(0),(async t=>{const e=t.retrievePaths();return await Ki.loadPaths(e),!0})),r||i.parent().hide(),Ki=new Li({$localFileInput:e,$dropboxButton:n,$googleDriveButton:r?i:void 0,fileLoadHandler:s,multipleFileSelection:!0});for(let t of a){const e={id:t,title:"ENCODE",selectionStyle:"multi",pageLength:100,okHandler:s};Zi.push(new Hi(e))}Gi={receiveEvent:async({data:t})=>{const{genomeID:e}=t;Zi[0].setDatasource(new Ui(Ni(e,"signals"))),Zi[1].setDatasource(new Ui(Ni(e,"other")))}},mr.globalBus.subscribe("DidChangeGenome",Gi)}(t,n,r,i,a,o,s,u);const h=$(function(t,e){return`<div id="${t}" class="modal">\n\n                <div class="modal-dialog modal-lg">\n    \n                    <div class="modal-content">\n    \n                        <div class="modal-header">\n                            <div class="modal-title"></div>\n                            <button type="button" class="close" data-dismiss="modal">\n                                <span>&times;</span>\n                            </button>\n                        </div>\n            \n                        <div class="modal-body">\n                            <div class="form-group">\n                                <select id="${e}" class="form-control" multiple></select>\n                            </div>\n                            <div id="igv-widgets-generic-select-modal-footnotes"></div>\n                        </div>\n                        \n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-sm btn-outline-secondary" data-dismiss="modal">Cancel</button>\n                            <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>\n                        </div>\n    \n                    </div>\n    \n                </div>\n\n            </div>`}(l,`${l}-select`));t.append(h);const p=h.find("select");h.find(".modal-footer button:nth-child(1)").on("click",(()=>h.modal("hide")));const d=h.find(".modal-footer button:nth-child(2)"),g=()=>{const t=[];p.find("option:selected").each((function(){t.push($(this).data("track")),$(this).removeAttr("selected")})),t.length>0&&u(t),h.modal("hide")};d.on("click",g),h.get(0).addEventListener("keypress",(t=>{"Enter"===t.key&&g()})),Gi={receiveEvent:async({data:t})=>{const{genomeID:n}=t,r=function(t){const e=new Set(["ce10","ce11","dm3","dm6","GRCh38","hg19","mm9","mm10"]),n=Pi(t);return e.has(n)}(n);r&&(Zi[0].setDatasource(new Ui(Ni(n,"signals"))),Zi[1].setDatasource(new Ui(Ni(n,"other")))),await async function(t,e,n,r,i,a,o){const s="genome_specific_",l=a.find(".dropdown-divider"),c="[id^="+s+"]";a.find(c).remove();const f=await async function(t,e){let n;try{n=await fetch(e)}catch(t){console.error(t)}let r;if(!n){const t=new Error("Error retrieving registry via getPathsWithTrackRegistryFile()");throw pi.present(t.message),t}r=await n.json();return r[t]}(t,i);if(void 0===f)return void console.warn(`There are no tracks in the track registryy for genome ${t}`);let u=[];try{u=await Promise.all(f.map((t=>fetch(t))))}catch(t){pi.present(t.message)}let h=[];try{h=await Promise.all(u.map((t=>t.json())))}catch(t){pi.present(t.message)}let p=[];for(let n of h)if("ENCODE"===n.type){let e=0;for(let i of[Ni(t,"signals"),Ni(n.genomeID,"other")])r[e++].setDatasource(new Ui(i));p.push(n)}else if("GTEX"===n.type){let t;try{t=await e.getTissueInfo(n.datasetId)}catch(t){pi.present(t.message)}t&&(n.tracks=t.tissueInfo.map((t=>e.trackConfiguration(t))),p.push(n))}else p.push(n);let d=[];for(let t of p)t.type&&"ENCODE"===t.type||d.unshift(t);n&&(Yi(l,"ENCODE Other",s).on("click",(()=>r[1].$modal.modal("show"))),Yi(l,"ENCODE Signals",s).on("click",(()=>r[0].$modal.modal("show"))));for(let t of d){Yi(l,t.label,s).on("click",(()=>{qi(o,t),o.modal("show")}))}}(n,c,r,Zi,f,e,h)}},mr.globalBus.subscribe("DidChangeGenome",Gi)}function Yi(t,e,n){const r=$("<button>",{class:"dropdown-item",type:"button"});return r.text(`${e} ...`),r.attr("id",`${n}${e.toLowerCase().split(" ").join("_")}`),r.insertAfter(t),r}function qi(t,e){e.label;t.find(".modal-title").text(`${e.label}`);let n=t.find("select");n.empty(),e.tracks.reduce(((t,e)=>{const r=$("<option>",{value:e.name,text:e.name});return n.append(r),r.data("track",e),t.append(r),t}),n),e.description&&t.find("#igv-widgets-generic-select-modal-footnotes").html(e.description)}const Wi=()=>window.btoa('<svg width="75px" height="64px" viewBox="0 0 75 64" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <title>Shape</title>\n        <desc>Created with Sketch.</desc>\n        <defs></defs>\n        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="dropbox" fill="#0061FF" fill-rule="nonzero">\n                <path d="M37.6,12 L18.8,24 L37.6,36 L18.8,48 L1.42108547e-14,35.9 L18.8,23.9 L1.42108547e-14,12 L18.8,0 L37.6,12 Z M18.7,51.8 L37.5,39.8 L56.3,51.8 L37.5,63.8 L18.7,51.8 Z M37.6,35.9 L56.4,23.9 L37.6,12 L56.3,0 L75.1,12 L56.3,24 L75.1,36 L56.3,48 L37.6,35.9 Z" id="Shape"></path>\n            </g>\n        </g>\n    </svg>'),Xi=()=>window.btoa('<svg viewBox="0 0 139 120.4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><radialGradient id="a" cx="-254.81979" cy="705.83588" gradientTransform="matrix(2.827 1.6322 -1.6322 2.827 2092.1199 -1494.5786)" gradientUnits="userSpaceOnUse" r="82.978401"><stop offset="0" stop-color="#4387fd"/><stop offset=".65" stop-color="#3078f0"/><stop offset=".9099" stop-color="#2b72ea"/><stop offset="1" stop-color="#286ee6"/></radialGradient><radialGradient id="b" cx="-254.8174" cy="705.83691" gradientTransform="matrix(2.827 1.6322 -1.6322 2.827 2092.1199 -1494.5786)" gradientUnits="userSpaceOnUse" r="82.973"><stop offset="0" stop-color="#ffd24d"/><stop offset="1" stop-color="#f6c338"/></radialGradient><path d="m24.2 120.4-24.2-41.9 45.3-78.5 24.2 41.9z" fill="#0da960"/><path d="m24.2 120.4 24.2-41.9h90.6l-24.2 41.9z" fill="url(#a)"/><path d="m139 78.5h-48.4l-45.3-78.5h48.4z" fill="url(#b)"/><path d="m69.5 78.5h-21.1l10.5-18.3-34.7 60.2z" fill="#2d6fdd"/><path d="m90.6 78.5h48.4l-58.9-18.3z" fill="#e5b93c"/><path d="m58.9 60.2 10.6-18.3-24.2-41.9z" fill="#0c9b57"/></svg>'),Ji=t=>`<div class="dropdown-item">\n                <div id="${t}" class="igv-app-dropdown-item-cloud-storage">\n                    <div>Dropbox File</div>\n                    <div>\n                        <img src="data:image/svg+xml;base64,${Wi()}" width="18" height="18">\n                    </div>\n                </div>\n            </div>`,Qi=t=>`<div class="dropdown-item">\n                <div id="${t}" class="igv-app-dropdown-item-cloud-storage">\n                    <div>Google Drive File</div>\n                    <div>\n                        <img src="data:image/svg+xml;base64,${Xi()}" width="18" height="18">\n                    </div>\n                </div>\n            </div>`;if("undefined"!=typeof document){(function(t){for(let e of document.styleSheets)if(e=e.href?e.href.replace(/^.*[\\\/]/,""):"",e===t)return!0;return!1})("igv-widgets.css")||((ta=document.createElement("style")).setAttribute("type","text/css"),ta.innerHTML='.igv-widgets-alert-dialog-container {\n  box-sizing: content-box;\n  position: absolute;\n  z-index: 2048;\n  top: 50%;\n  left: 50%;\n  width: 400px;\n  height: 200px;\n  border-color: #7F7F7F;\n  border-radius: 4px;\n  border-style: solid;\n  border-width: thin;\n  outline: none;\n  font-family: "Open Sans", sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  align-items: center; }\n  .igv-widgets-alert-dialog-container > div:first-child {\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center;\n    width: 100%;\n    height: 24px;\n    cursor: move;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    border-bottom-color: #7F7F7F;\n    border-bottom-style: solid;\n    border-bottom-width: thin;\n    background-color: #eee; }\n    .igv-widgets-alert-dialog-container > div:first-child div:first-child {\n      padding-left: 8px; }\n  .igv-widgets-alert-dialog-container #igv-widgets-alert-dialog-body {\n    color: #373737;\n    width: 100%;\n    height: calc(100% - 24px - 64px);\n    overflow-y: scroll; }\n    .igv-widgets-alert-dialog-container #igv-widgets-alert-dialog-body #igv-widgets-alert-dialog-body-copy {\n      cursor: pointer;\n      margin: 16px;\n      width: auto;\n      height: auto;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      background-color: white;\n      border: unset; }\n  .igv-widgets-alert-dialog-container > div:last-child {\n    width: 100%;\n    margin-bottom: 10px;\n    background-color: white;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: center;\n    align-items: center; }\n    .igv-widgets-alert-dialog-container > div:last-child div {\n      margin: unset;\n      width: 40px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      color: white;\n      font-family: "Open Sans", sans-serif;\n      font-size: small;\n      font-weight: 400;\n      border-color: #2B81AF;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 4px;\n      background-color: #2B81AF; }\n    .igv-widgets-alert-dialog-container > div:last-child div:hover {\n      cursor: pointer;\n      border-color: #25597f;\n      background-color: #25597f; }\n\n.igv-file-load-widget-container {\n  position: relative;\n  border-color: transparent;\n  width: 100%;\n  color: #7F7F7F;\n  font-family: "Open Sans", sans-serif;\n  font-size: 0.875rem;\n  font-weight: 200;\n  border-style: solid;\n  border-width: thin;\n  background-color: white;\n  display: flex;\n  flex-flow: column;\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: center; }\n  .igv-file-load-widget-container .igv-file-load-widget-header {\n    width: 100%;\n    height: 24px;\n    background-color: #bfbfbf;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-file-load-widget-header div {\n      height: 24px;\n      width: 16px;\n      margin-right: 6px;\n      text-align: center;\n      line-height: 24px;\n      color: #373737; }\n    .igv-file-load-widget-container .igv-file-load-widget-header div:hover {\n      cursor: pointer; }\n  .igv-file-load-widget-container .igv-flw-input-container {\n    width: 95%;\n    margin-top: 24px;\n    margin-bottom: 0;\n    display: flex;\n    flex-flow: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row {\n      height: 36px;\n      width: 100%;\n      margin-top: 8px;\n      padding-top: 4px;\n      padding-bottom: 4px;\n      display: flex;\n      flex-flow: row;\n      flex-wrap: nowrap;\n      justify-content: flex-start;\n      align-items: center;\n      border-color: white;\n      border-style: solid;\n      border-width: thin;\n      border-radius: calc(2 * 2px); }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-input-label {\n        color: #6c757c;\n        font-weight: 400;\n        width: 136px;\n        height: 36px;\n        line-height: 36px;\n        text-align: left; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row input {\n        display: block;\n        height: 100%;\n        width: 100%;\n        padding-left: 4px;\n        color: #373737;\n        font-size: 0.875rem;\n        font-family: "Open Sans", sans-serif;\n        font-weight: 400;\n        text-align: left;\n        outline: none;\n        border-style: solid;\n        border-width: thin;\n        border-color: #dee2e6;\n        border-radius: .25rem;\n        background-color: white; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row input {\n        height: calc(36px - 12px); }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container {\n        display: flex;\n        flex-flow: row;\n        justify-content: center;\n        align-items: center;\n        width: 130px;\n        height: calc(36px - 8px);\n        border-color: #6c757c;\n        border-style: solid;\n        border-width: thin;\n        border-radius: calc(2 * 2px);\n        background-color: white; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container label {\n          display: block;\n          margin: unset; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container label.igv-flw-label-color {\n          color: #6c757c; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container label.igv-flw-label-color-hover {\n          cursor: pointer; }\n        .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container input.igv-flw-file-chooser-input {\n          width: 0.1px;\n          height: 0.1px;\n          opacity: 0;\n          overflow: hidden;\n          position: absolute;\n          z-index: -1; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-file-chooser-container:hover {\n        cursor: pointer;\n        background-color: #6c757c; }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-drag-drop-target {\n        cursor: default;\n        margin-left: 8px;\n        width: 120px;\n        height: calc(36px - 8px);\n        line-height: calc(36px - 8px);\n        text-align: center;\n        border-color: #7F7F7F;\n        border-style: dashed;\n        border-width: thin;\n        border-radius: calc(2 * 2px); }\n      .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row .igv-flw-local-file-name-container {\n        max-width: 400px;\n        height: 36px;\n        color: #373737;\n        line-height: 36px;\n        text-align: left;\n        font-weight: 400;\n        margin-left: 8px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis; }\n    .igv-file-load-widget-container .igv-flw-input-container .igv-flw-input-row-hover-state {\n      background-color: #efefef;\n      border-color: #7F7F7F; }\n  .igv-file-load-widget-container .igv-flw-error-message-container {\n    margin-top: 8px;\n    width: 95%;\n    height: 24px;\n    padding-left: 8px;\n    color: white;\n    font-size: 0.875rem;\n    background-color: rgba(59, 92, 127, 0.5);\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-flw-error-message-container div:first-child.igv-flw-error-message {\n      height: 24px;\n      width: 600px;\n      font-style: italic;\n      line-height: 24px;\n      text-align: left; }\n    .igv-file-load-widget-container .igv-flw-error-message-container div:last-child {\n      height: 24px;\n      width: 16px;\n      margin-right: 6px;\n      text-align: center;\n      line-height: 24px;\n      color: #373737; }\n    .igv-file-load-widget-container .igv-flw-error-message-container div:hover {\n      cursor: pointer; }\n  .igv-file-load-widget-container .igv-file-load-widget-ok-cancel {\n    width: 100%;\n    height: 28px;\n    margin-top: 32px;\n    color: white;\n    font-size: 0.875rem;\n    display: flex;\n    flex-flow: row;\n    flex-wrap: nowrap;\n    justify-content: flex-end;\n    align-items: center; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div {\n      width: 75px;\n      height: 28px;\n      line-height: 28px;\n      text-align: center;\n      border-color: transparent;\n      border-style: solid;\n      border-width: thin;\n      border-radius: 2px;\n      margin-right: 16px; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:first-child {\n      margin-right: 22px;\n      background-color: #c4c4c4; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:first-child:hover {\n      cursor: pointer;\n      background-color: #7f7f7f; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:last-child {\n      background-color: #5ea4e0; }\n    .igv-file-load-widget-container .igv-file-load-widget-ok-cancel div:last-child:hover {\n      cursor: pointer;\n      background-color: #3b5c7f; }\n\n/*# sourceMappingURL=igv-widgets.css.map */\n',document.head.insertBefore(ta,document.head.childNodes[document.head.childNodes.length-1]))}var ta,ea,na={},ra=Object.keys||function(t){return wt(t,yt)},ia=o?Object.defineProperties:function(t,e){D(t);for(var n,r=ra(e),i=r.length,a=0;i>a;)T.f(t,n=r[a++],e[n]);return t},aa=V("IE_PROTO"),oa=function(){},sa=function(t){return"<script>"+t+"</"+"script>"},la=function(){try{ea=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;la=ea?function(t){t.write(sa("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ea):((e=E("iframe")).style.display="none",_e.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(sa("document.F=Object")),t.close(),t.F);for(var n=yt.length;n--;)delete la.prototype[yt[n]];return la()};Y[aa]=!0;var ca=Object.create||function(t,e){var n;return null!==t?(oa.prototype=D(t),n=new oa,oa.prototype=null,n[aa]=t):n=la(),void 0===e?n:ia(n,e)},fa=$t("unscopables"),ua=Array.prototype;null==ua[fa]&&T.f(ua,fa,{configurable:!0,value:ca(null)});var ha=function(t){ua[fa][t]=!0},pa=Vt.find,da="find",ga=!0,ma=Jt(da);da in[]&&Array(1).find((function(){ga=!1})),At({target:"Array",proto:!0,forced:ga||!ma},{find:function(t){return pa(this,t,arguments.length>1?arguments[1]:void 0)}}),ha(da);var wa,ya,va,ba=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),xa=V("IE_PROTO"),Sa=Object.prototype,Ea=ba?Object.getPrototypeOf:function(t){return t=Mt(t),b(t,xa)?t[xa]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Sa:null},Ra=$t("iterator"),ka=!1;[].keys&&("next"in(va=[].keys())?(ya=Ea(Ea(va)))!==Object.prototype&&(wa=ya):ka=!0),null==wa&&(wa={}),b(wa,Ra)||I(wa,Ra,(function(){return this}));var Ca={IteratorPrototype:wa,BUGGY_SAFARI_ITERATORS:ka},Da=Ca.IteratorPrototype,La=function(){return this},Ta=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return D(n),function(t){if(!w(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ia=Ca.IteratorPrototype,Ba=Ca.BUGGY_SAFARI_ITERATORS,Aa=$t("iterator"),Oa="keys",_a="values",Ma="entries",za=function(){return this},Fa=function(t,e,n,r,i,a,o){!function(t,e,n){var r=e+" Iterator";t.prototype=ca(Da,{next:f(1,n)}),pe(t,r,!1),we[r]=La}(n,e,r);var s,l,c,u=function(t){if(t===i&&m)return m;if(!Ba&&t in d)return d[t];switch(t){case Oa:case _a:case Ma:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",p=!1,d=t.prototype,g=d[Aa]||d["@@iterator"]||i&&d[i],m=!Ba&&g||u(i),w="Array"==e&&d.entries||g;if(w&&(s=Ea(w.call(new t)),Ia!==Object.prototype&&s.next&&(Ea(s)!==Ia&&(Ta?Ta(s,Ia):"function"!=typeof s[Aa]&&I(s,Aa,za)),pe(s,h,!0))),i==_a&&g&&g.name!==_a&&(p=!0,m=function(){return g.call(this)}),d[Aa]!==m&&I(d,Aa,m),we[e]=m,i)if(l={values:u(_a),keys:a?m:u(Oa),entries:u(Ma)},o)for(c in l)(Ba||p||!(c in d))&&nt(d,c,l[c]);else At({target:e,proto:!0,forced:Ba||p},l);return l},Ua="Array Iterator",Ha=et.set,Na=et.getterFor(Ua),Pa=Fa(Array,"Array",(function(t,e){Ha(this,{type:Ua,target:m(t),index:0,kind:e})}),(function(){var t=Na(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");we.Arguments=we.Array,ha("keys"),ha("values"),ha("entries");var $a=T.f,ja=Function.prototype,Ka=ja.toString,Ga=/^\s*function ([^ (]*)/,Za="name";o&&!(Za in ja)&&$a(ja,Za,{configurable:!0,get:function(){try{return Ka.call(this).match(Ga)[1]}catch(t){return""}}});var Va=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ya=n((function(t){var e=T.f,n=G("meta"),r=0,i=Object.isExtensible||function(){return!0},a=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!w(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!b(t,n)){if(!i(t))return"F";if(!e)return"E";a(t)}return t[n].objectID},getWeakData:function(t,e){if(!b(t,n)){if(!i(t))return!0;if(!e)return!1;a(t)}return t[n].weakData},onFreeze:function(t){return Va&&o.REQUIRED&&i(t)&&!b(t,n)&&a(t),t}};Y[n]=!0})),qa=(Ya.REQUIRED,Ya.fastKey,Ya.getWeakData,Ya.onFreeze,function(t,e,n){var r,i;return Ta&&"function"==typeof(r=e.constructor)&&r!==n&&w(i=r.prototype)&&i!==n.prototype&&Ta(t,i),t}),Wa=function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),s=r?"set":"add",l=i[t],c=l&&l.prototype,f=l,u={},h=function(t){var e=c[t];nt(c,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!w(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!w(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!w(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(It(t,"function"!=typeof l||!(o||c.forEach&&!a((function(){(new l).entries().next()})))))f=n.getConstructor(e,t,r,s),Ya.REQUIRED=!0;else if(It(t,!0)){var p=new f,d=p[s](o?{}:-0,1)!=p,g=a((function(){p.has(1)})),m=Be((function(t){new l(t)})),y=!o&&a((function(){for(var t=new l,e=5;e--;)t[s](e,e);return!t.has(-0)}));m||((f=e((function(e,n){me(e,f,t);var i=qa(new l,e,f);return null!=n&&Ee(n,i[s],{that:i,AS_ENTRIES:r}),i}))).prototype=c,c.constructor=f),(g||y)&&(h("delete"),h("has"),r&&h("get")),(y||d)&&h(s),o&&c.clear&&delete c.clear}return u[t]=f,At({global:!0,forced:f!=l},u),pe(f,t),o||n.setStrong(f,t,r),f},Xa=T.f,Ja=Ya.fastKey,Qa=et.set,to=et.getterFor,eo={getConstructor:function(t,e,n,r){var i=t((function(t,a){me(t,i,e),Qa(t,{type:e,index:ca(null),first:void 0,last:void 0,size:0}),o||(t.size=0),null!=a&&Ee(a,t[r],{that:t,AS_ENTRIES:n})})),a=to(e),s=function(t,e,n){var r,i,s=a(t),c=l(t,e);return c?c.value=n:(s.last=c={index:i=Ja(e,!0),key:e,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=c),r&&(r.next=c),o?s.size++:t.size++,"F"!==i&&(s.index[i]=c)),t},l=function(t,e){var n,r=a(t),i=Ja(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return fe(i.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,o?t.size=0:this.size=0},delete:function(t){var e=this,n=a(e),r=l(e,t);if(r){var i=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=i),i&&(i.previous=s),n.first==r&&(n.first=i),n.last==r&&(n.last=s),o?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=a(this),r=_t(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),fe(i.prototype,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),o&&Xa(i.prototype,"size",{get:function(){return a(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=to(e),a=to(r);Fa(t,e,(function(t,e){Qa(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=a(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ge(e)}},no=(Wa("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),eo),"[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]"),ro=RegExp("^"+no+no+"*"),io=RegExp(no+no+"*$"),ao=function(t){return function(e){var n=String(g(e));return 1&t&&(n=n.replace(ro,"")),2&t&&(n=n.replace(io,"")),n}},oo={start:ao(1),end:ao(2),trim:ao(3)},so=bt.f,lo=C.f,co=T.f,fo=oo.trim,uo="Number",ho=i.Number,po=ho.prototype,go=h(ca(po))==uo,mo=function(t){var e,n,r,i,a,o,s,l,c=y(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=fo(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=(a=c.slice(2)).length,s=0;s<o;s++)if((l=a.charCodeAt(s))<48||l>i)return NaN;return parseInt(a,r)}return+c};if(It(uo,!ho(" 0o1")||!ho("0b1")||ho("+0x1"))){for(var wo,yo=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof yo&&(go?a((function(){po.valueOf.call(n)})):h(n)!=uo)?qa(new ho(mo(e)),n,yo):mo(e)},vo=o?so(ho):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),bo=0;vo.length>bo;bo++)b(ho,wo=vo[bo])&&!b(yo,wo)&&co(yo,wo,lo(ho,wo));yo.prototype=po,po.constructor=yo,nt(i,uo,yo)}At({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var xo=function(t){return function(e,n){var r,i,a=String(g(e)),o=lt(n),s=a.length;return o<0||o>=s?t?"":void 0:(r=a.charCodeAt(o))<55296||r>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?t?a.charAt(o):r:t?a.slice(o,o+2):i-56320+(r-55296<<10)+65536}},So={codeAt:xo(!1),charAt:xo(!0)},Eo=So.charAt,Ro="String Iterator",ko=et.set,Co=et.getterFor(Ro);Fa(String,"String",(function(t){ko(this,{type:Ro,string:String(t),index:0})}),(function(){var t,e=Co(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Eo(n,r),e.index+=t.length,{value:t,done:!1})}));var Do,Lo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},To=$t("iterator"),Io=$t("toStringTag"),Bo=Pa.values;for(var Ao in Lo){var Oo=i[Ao],_o=Oo&&Oo.prototype;if(_o){if(_o[To]!==Bo)try{I(_o,To,Bo)}catch(t){_o[To]=Bo}if(_o[Io]||I(_o,Io,Ao),Lo[Ao])for(var Mo in Pa)if(_o[Mo]!==Pa[Mo])try{I(_o,Mo,Pa[Mo])}catch(t){_o[Mo]=Pa[Mo]}}}function zo(t){var e=t.$igvMain,n=t.urlModalId,r=t.genomeFileLoad,i=$(Oi(n,"Genome URL"));e.append(i);var a={widgetParent:i.find(".modal-body").get(0),dataTitle:"Genome",indexTitle:"Index",mode:"url",fileLoadManager:new di,dataOnly:!1,doURL:!0};Do=new mi(a),bi.configureModal(Do,i.get(0),function(){var t=ir(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.loadPaths(e.retrievePaths());case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function Fo(t,e,n){return Uo.apply(this,arguments)}function Uo(){return(Uo=ir(regeneratorRuntime.mark((function t(e,n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ho(n);case 3:(i=t.sent)&&$o({browser:e,genomeMap:i,$dropdown_menu:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),pi.present(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Ho(t){return No.apply(this,arguments)}function No(){return(No=ir(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!Array.isArray(e)){t.next=6;break}return t.abrupt("return",Po(e));case 6:return n=void 0,t.prev=7,t.next=10,fetch(e);case 10:n=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),pi.present(t.t0.message);case 16:if(!n){t.next=21;break}return t.next=19,n.json();case 19:return r=t.sent,t.abrupt("return",Po(r));case 21:case"end":return t.stop()}}),t,null,[[7,13]])})))).apply(this,arguments)}function Po(t){var e=new Map;if(!0===Array.isArray(t)){var n,r=lr(t.reverse());try{for(r.s();!(n=r.n()).done;){var i=n.value;e.set(i.id,i)}}catch(t){r.e(t)}finally{r.f()}}else e.set(t.id,t);return e}function $o(t){var e=t.browser,n=t.genomeMap,r=t.$dropdown_menu.find(".dropdown-divider");r.nextAll().remove();var i,a=lr(n);try{var o=function(){var t=ar(i.value,2),n=t[0],a=t[1],o=function(t){var e=$("<button>",{class:"dropdown-item",type:"button"});return e.text(t),e}(a.name);o.insertAfter(r),o.data("id",n);var s="click.genome-dropdown.".concat(n);o.on(s,ir(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.data("id")===e.genome.id){t.next=4;break}return t.next=4,Ko(a);case 4:case"end":return t.stop()}}),t)}))))};for(a.s();!(i=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}}function jo(t){var e,n={localFileInput:document.getElementById("igv-app-dropdown-local-genome-file-input"),dropboxButton:document.getElementById("igv-app-dropdown-dropbox-genome-file-button"),googleEnabled:t,googleDriveButton:document.getElementById("igv-app-dropdown-google-drive-genome-file-button"),loadHandler:(e=ir(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ko(e);case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)}),igvxhr:igv.xhr},r=new Ci(n);return{$igvMain:$("#igv-main"),urlModalId:"igv-app-genome-from-url-modal",genomeFileLoad:r}}function Ko(t){return Go.apply(this,arguments)}function Go(){return(Go=ir(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=1,e.tracks&&e.tracks.push({type:"sequence",order:Number.MIN_SAFE_INTEGER}),t.next=5,na.browser.loadGenome(e);case 5:(n=t.sent).id&&localStorage.setItem("genomeID",n.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),pi.present(t.t0.message);case 12:n&&mr.globalBus.post({type:"DidChangeGenome",data:{genomeID:n.id}});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}var Zo=gt.indexOf,Vo=[].indexOf,Yo=!!Vo&&1/[1].indexOf(1,-0)<0,qo=Yt("indexOf"),Wo=Jt("indexOf",{ACCESSORS:!0,1:0});At({target:"Array",proto:!0,forced:Yo||!qo||!Wo},{indexOf:function(t){return Yo?Vo.apply(this,arguments)||0:Zo(this,t,arguments.length>1?arguments[1]:void 0)}});var Xo=function(t,e,n){var r=y(e);r in t?T.f(t,r,f(0,n)):t[r]=n},Jo=$t("species"),Qo=function(t){return Tn>=51||!a((function(){var e=[];return(e.constructor={})[Jo]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},ts=Qo("slice"),es=Jt("slice",{ACCESSORS:!0,0:0,1:2}),ns=$t("species"),rs=[].slice,is=Math.max;At({target:"Array",proto:!0,forced:!ts||!es},{slice:function(t,e){var n,r,i,a=m(this),o=ft(a.length),s=pt(t,o),l=pt(void 0===e?o:e,o);if(zt(a)&&("function"!=typeof(n=a.constructor)||n!==Array&&!zt(n.prototype)?w(n)&&null===(n=n[ns])&&(n=void 0):n=void 0,n===Array||void 0===n))return rs.call(a,s,l);for(r=new(void 0===n?Array:n)(is(l-s,0)),i=0;s<l;s++,i++)s in a&&Xo(r,i,a[s]);return r.length=i,r}});var as=$t("isConcatSpreadable"),os=9007199254740991,ss="Maximum allowed index exceeded",ls=Tn>=51||!a((function(){var t=[];return t[as]=!1,t.concat()[0]!==t})),cs=Qo("concat"),fs=function(t){if(!w(t))return!1;var e=t[as];return void 0!==e?!!e:zt(t)};At({target:"Array",proto:!0,forced:!ls||!cs},{concat:function(t){var e,n,r,i,a,o=Mt(this),s=Kt(o,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(fs(a=-1===e?o:arguments[e])){if(l+(i=ft(a.length))>os)throw TypeError(ss);for(n=0;n<i;n++,l++)n in a&&Xo(s,l,a[n])}else{if(l>=os)throw TypeError(ss);Xo(s,l++,a)}return s.length=l,s}});var us=function(){var t=D(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function hs(t,e){return RegExp(t,e)}var ps,ds,gs={UNSUPPORTED_Y:a((function(){var t=hs("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:a((function(){var t=hs("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ms=RegExp.prototype.exec,ws=String.prototype.replace,ys=ms,vs=(ps=/a/,ds=/b*/g,ms.call(ps,"a"),ms.call(ds,"a"),0!==ps.lastIndex||0!==ds.lastIndex),bs=gs.UNSUPPORTED_Y||gs.BROKEN_CARET,xs=void 0!==/()??/.exec("")[1];(vs||xs||bs)&&(ys=function(t){var e,n,r,i,a=this,o=bs&&a.sticky,s=us.call(a),l=a.source,c=0,f=t;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),f=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(l="(?: "+l+")",f=" "+f,c++),n=new RegExp("^(?:"+l+")",s)),xs&&(n=new RegExp("^"+l+"$(?!\\s)",s)),vs&&(e=a.lastIndex),r=ms.call(o?n:a,f),o?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:vs&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),xs&&r&&r.length>1&&ws.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Ss=ys;At({target:"RegExp",proto:!0,forced:/./.exec!==Ss},{exec:Ss});var Es=$t("species"),Rs=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ks="$0"==="a".replace(/./,"$0"),Cs=$t("replace"),Ds=!!/./[Cs]&&""===/./[Cs]("a","$0"),Ls=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Ts=function(t,e,n,r){var i=$t(t),o=!a((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),s=o&&!a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Es]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!s||"replace"===t&&(!Rs||!ks||Ds)||"split"===t&&!Ls){var l=/./[i],c=n(i,""[t],(function(t,e,n,r,i){return e.exec===Ss?o&&!i?{done:!0,value:l.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:ks,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Ds}),f=c[0],u=c[1];nt(String.prototype,t,f),nt(RegExp.prototype,i,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}r&&I(RegExp.prototype[i],"sham",!0)},Is=So.charAt,Bs=function(t,e,n){return e+(n?Is(t,e).length:1)},As=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==h(t))throw TypeError("RegExp#exec called on incompatible receiver");return Ss.call(t,e)},Os=Math.max,_s=Math.min,Ms=Math.floor,zs=/\$([$&'`]|\d\d?|<[^>]*>)/g,Fs=/\$([$&'`]|\d\d?)/g;Ts("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,a=r.REPLACE_KEEPS_$0,o=i?"$":"$0";return[function(n,r){var i=g(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&a||"string"==typeof r&&-1===r.indexOf(o)){var l=n(e,t,this,r);if(l.done)return l.value}var c=D(t),f=String(this),u="function"==typeof r;u||(r=String(r));var h=c.global;if(h){var p=c.unicode;c.lastIndex=0}for(var d=[];;){var g=As(c,f);if(null===g)break;if(d.push(g),!h)break;""===String(g[0])&&(c.lastIndex=Bs(f,ft(c.lastIndex),p))}for(var m,w="",y=0,v=0;v<d.length;v++){g=d[v];for(var b=String(g[0]),x=Os(_s(lt(g.index),f.length),0),S=[],E=1;E<g.length;E++)S.push(void 0===(m=g[E])?m:String(m));var R=g.groups;if(u){var k=[b].concat(S,x,f);void 0!==R&&k.push(R);var C=String(r.apply(void 0,k))}else C=s(b,f,x,S,R,r);x>=y&&(w+=f.slice(y,x)+C,y=x+b.length)}return w+f.slice(y)}];function s(t,n,r,i,a,o){var s=r+t.length,l=i.length,c=Fs;return void 0!==a&&(a=Mt(a),c=zs),e.call(o,c,(function(e,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":c=a[o.slice(1,-1)];break;default:var f=+o;if(0===f)return e;if(f>l){var u=Ms(f/10);return 0===u?e:u<=l?void 0===i[u-1]?o.charAt(1):i[u-1]+o.charAt(1):e}c=i[f-1]}return void 0===c?"":c}))}}));var Us,Hs,Ns=$t("match"),Ps=function(t){var e;return w(t)&&(void 0!==(e=t[Ns])?!!e:"RegExp"==h(t))},$s=function(t){if(Ps(t))throw TypeError("The method doesn't accept regular expressions");return t},js=$t("match"),Ks=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[js]=!1,"/./"[t](e)}catch(t){}}return!1},Gs=C.f,Zs="".startsWith,Vs=Math.min,Ys=Ks("startsWith"),qs=!(Ys||(Us=Gs(String.prototype,"startsWith"),!Us||Us.writable));function Ws(t){var e,n,r,i;return"function"==typeof t?e=t:t.provider?"tinyURL"===t.provider?(i=(i=t.endpoint)||"https://2et6uxfezb.execute-api.us-east-1.amazonaws.com/dev/tinyurl/",e=function(){var t=ir(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURIComponent(e),t.next=3,fetch("".concat(i).concat(n));case 3:if(!(r=t.sent).ok){t.next=8;break}return t.abrupt("return",r.text());case 8:throw new Error(r.statusText);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):"bitly"===t.provider&&t.apiKey?e=(r=t.apiKey)&&"BITLY_TOKEN"!==r?function(){var t=ir(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.startsWith("http://localhost")&&(e=e.replace("localhost","192.168.1.11")),n="https://api-ssl.bitly.com/v3/shorten?access_token="+r+"&longUrl="+encodeURIComponent(e),t.abrupt("return",igv.xhr.loadJson(n,{}).then((function(t){return t.data.url})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():void 0:"google"===t.provider&&t.apiKey?e=(n=t.apiKey)&&"API_KEY"!==n?function(){var t=ir(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="https://www.googleapis.com/urlshortener/v1/url?key="+n,t.abrupt("return",igv.xhr.loadJson(r,{sendData:JSON.stringify({longUrl:e}),contentType:"application/json"}).then((function(t){return t.id})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():void 0:pi.present(new Error("Unknown URL shortener provider: ".concat(t.provider))):pi.present(new Error("URL shortener object must either be an object specifying a provider and apiKey, or a function")),e&&(Hs={shortenURL:e}),e}function Xs(t,e){return function(t){return Hs?Hs.shortenURL(t):Promise.resolve(t)}(t+"?sessionURL=blob:"+e)}function Js(t){var e=t.browser,n=t.$container,r=t.$modal,i=t.$share_input,a=t.$copy_link_button,o=t.$tweet_button_container,s=t.$email_button,l=t.$qrcode_button,c=t.$qrcode_image,f=t.$embed_container,u=t.$embed_button,h=t.embedTarget;void 0===h&&(h="https://igv.org/web/release/".concat(igv.version(),"/embed.html")),r.on("shown.bs.modal",function(){var t=ir(regeneratorRuntime.mark((function t(a){var l,u,p,d,g,m,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=window.location.href.slice(),(u=l.indexOf("?"))>0&&(l=l.substring(0,u)),p=void 0;try{p=e.compressedSession()}catch(t){pi.present(t.message)}if(!p){t.next=20;break}return h&&(d=Qs(n,h,p),f.find("textarea").val(d),f.find("textarea").get(0).select()),t.next=9,Xs(l,p);case 9:g=t.sent,i.val(g),i.get(0).select(),s.attr("href","mailto:?body="+g),c.empty(),m={width:128,height:128,correctLevel:Ur.CorrectLevel.H},new Ur(c.get(0),m).makeCode(g),o&&(o.empty(),w={text:""},window.twttr.widgets.createShareButton(g,o.get(0),w)),t.next=21;break;case 20:r.modal("hide");case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.on("hidden.bs.modal",(function(t){f.hide(),c.hide()})),a.on("click",(function(t){i.get(0).select(),document.execCommand("copy")&&r.modal("hide")})),void 0===h?u.hide():(f.find("button").on("click",(function(t){f.find("textarea").get(0).select(),document.execCommand("copy")&&r.modal("hide")})),u.on("click",(function(t){c.hide(),f.toggle()}))),l.on("click",(function(t){f.hide(),c.toggle()}))}function Qs(t,e,n){return'<iframe src="'+(e+"?sessionURL=blob:"+n)+'" style="width:100%; height:'+(t.height()+50)+'px"  allowfullscreen></iframe>'}function tl(t,e,n){var r,i=n.urlShortener,a=n.embedTarget;i&&(r=void 0!==Ws(i));var o=$("#igv-app-tweet-button-container");return r||o.hide(),{browser:t,$container:e,$modal:$("#igv-app-share-modal"),$share_input:$("#igv-app-share-input"),$copy_link_button:$("#igv-app-copy-link-button"),$tweet_button_container:r?o:void 0,$email_button:$("#igv-app-email-button"),$qrcode_button:$("#igv-app-qrcode-button"),$qrcode_image:$("#igv-app-qrcode-image"),$embed_container:$("#igv-app-embed-container"),$embed_button:$("#igv-app-embed-button"),embedTarget:a}}At({target:"String",proto:!0,forced:!qs&&!Ys},{startsWith:function(t){var e=String(g(this));$s(t);var n=ft(Vs(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Zs?Zs.call(e,r,n):e.slice(n,n+r.length)===r}});Wa("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),eo);var el=C.f,nl="".endsWith,rl=Math.min,il=Ks("endsWith"),al=!il&&!!function(){var t=el(String.prototype,"endsWith");return t&&!t.writable}();function ol(t){var e=t.browser,n=t.$saveModal,r="igv-app.svg",i=n.find("input");n.on("show.bs.modal",(function(t){i.val(r)})),n.on("hidden.bs.modal",(function(t){i.val(r)}));var a=function(){var t=i.val();void 0===t||""===t?t=i.attr("placeholder"):t.endsWith(".svg")||(t+=".svg"),n.modal("hide"),e.saveSVGtoFile({filename:t})};n.find(".modal-footer button:nth-child(2)").on("click",a),i.on("keyup",(function(t){13===t.keyCode&&a()}));var o=n.find(".modal-header button:nth-child(1)");o.on("click",(function(){n.modal("hide")})),(o=n.find(".modal-footer button:nth-child(1)")).on("click",(function(){n.modal("hide")}))}At({target:"String",proto:!0,forced:!al&&!il},{endsWith:function(t){var e=String(g(this));$s(t);var n=arguments.length>1?arguments[1]:void 0,r=ft(e.length),i=void 0===n?r:rl(ft(n),r),a=String(t);return nl?nl.call(e,a,i):e.slice(i-a.length,i)===a}});var sl=[].join,ll=d!=Object,cl=Yt("join",",");At({target:"Array",proto:!0,forced:ll||!cl},{join:function(t){return sl.call(m(this),void 0===t?",":t)}});var fl=[].push,ul=Math.min,hl=4294967295,pl=!a((function(){return!RegExp(hl,"y")}));Ts("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(g(this)),i=void 0===n?hl:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Ps(t))return e.call(r,t,i);for(var a,o,s,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,u=new RegExp(t.source,c+"g");(a=Ss.call(u,r))&&!((o=u.lastIndex)>f&&(l.push(r.slice(f,a.index)),a.length>1&&a.index<r.length&&fl.apply(l,a.slice(1)),s=a[0].length,f=o,l.length>=i));)u.lastIndex===a.index&&u.lastIndex++;return f===r.length?!s&&u.test("")||l.push(""):l.push(r.slice(f)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=g(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var o=D(t),s=String(this),l=Oe(o,RegExp),c=o.unicode,f=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(pl?"y":"g"),u=new l(pl?o:"^(?:"+o.source+")",f),h=void 0===i?hl:i>>>0;if(0===h)return[];if(0===s.length)return null===As(u,s)?[s]:[];for(var p=0,d=0,g=[];d<s.length;){u.lastIndex=pl?d:0;var m,w=As(u,pl?s:s.slice(d));if(null===w||(m=ul(ft(u.lastIndex+(pl?0:d)),s.length))===p)d=Bs(s,d,c);else{if(g.push(s.slice(p,d)),g.length===h)return g;for(var y=1;y<=w.length-1;y++)if(g.push(w[y]),g.length===h)return g;d=p=m}}return g.push(s.slice(p)),g}]}),!pl);var dl={getTissueInfo:function(t,e){var n=(e=e||"https://gtexportal.org/rest/v1")+"/dataset/tissueInfo?datasetId="+(t=t||"gtex_v8");return igv.xhr.loadJson(n,{})},trackConfiguration:function(t,e){return{type:"eqtl",sourceType:"gtex-ws",url:(e=e||"https://gtexportal.org/rest/v1")+"/association/singleTissueEqtlByLocation",tissueSiteDetailId:t.tissueSiteDetailId,name:t.tissueSiteDetailId.split("_").join(" "),visibilityWindow:25e4}}};$(document).ready(ir(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ml($("#igv-app-container"),igvwebConfig));case 1:case"end":return t.stop()}}),t)}))));var gl=!1;function ml(t,e){return wl.apply(this,arguments)}function wl(){return(wl=ir(regeneratorRuntime.mark((function t(e,n){var r,i,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(pi.init(e.get(0)),$("#igv-app-version").text("IGV-Web app version ".concat("1.4.6")),$("#igv-igvjs-version").text("igv.js version ".concat(igv.version())),!((n.clientId||n.apiKey)&&("https:"===window.location.protocol||"localhost"===window.location.host))){t.next=17;break}return t.prev=5,t.next=8,pr({client_id:n.clientId,apiKey:n.apiKey,scope:"https://www.googleapis.com/auth/userinfo.profile"});case 8:return t.next=10,dr();case 10:gl=!0,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0),pi.present(t.t0.message);case 17:if(!n.genomes){t.next=23;break}return t.next=20,xl(n.genomes);case 20:r=t.sent,n.genomes=r,n.igvConfig.genomes=r;case 23:return i=n.igvConfig,n.restoreLastGenome&&(a=localStorage.getItem("genomeID"))&&a!==i.genome&&(i.genome=a,i.tracks=[]),t.next=27,igv.createBrowser(e.get(0),i);case 27:if(!(o=t.sent)){t.next=32;break}return na.browser=o,t.next=32,yl(o,e,n);case 32:case"end":return t.stop()}}),t,null,[[5,13]])})))).apply(this,arguments)}function yl(t,e,n){return vl.apply(this,arguments)}function vl(){return(vl=ir(regeneratorRuntime.mark((function t(e,n,r){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return["track","genome"].forEach((function(t){document.querySelector("img#igv-app-".concat(t,"-dropbox-button-image")).src="data:image/svg+xml;base64,".concat(Wi()),document.querySelector("img#igv-app-".concat(t,"-google-drive-button-image")).src="data:image/svg+xml;base64,".concat(Xi())})),$("div#igv-session-dropdown-menu > :nth-child(1)").after(Ji("igv-app-dropdown-dropbox-session-file-button")),$("div#igv-session-dropdown-menu > :nth-child(2)").after(Qi("igv-app-dropdown-google-drive-session-file-button")),zo(jo(gl)),t.next=6,Fo(e,r.genomes,$("#igv-app-genome-dropdown-menu"));case 6:Vi(i=$("#igv-main"),$("#igv-app-track-dropdown-menu"),$("#igv-app-dropdown-local-track-file-input"),$("#igv-app-dropdown-dropbox-track-file-button"),gl,$("#igv-app-dropdown-google-drive-track-file-button"),["igv-app-encode-signal-modal","igv-app-encode-others-modal"],"igv-app-track-from-url-modal","igv-app-track-select-modal",dl,r.trackRegistryFile,function(){var t=ir(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTrackList(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),$("#igv-app-session-save-button").on("click",(function(){var t=void 0;try{t=e.toJSON()}catch(t){pi.present(t.message)}t&&$("#igv-app-session-save-modal").modal("show")})),Mi(i,igv.xhr,"igv-webapp","igv-app-dropdown-local-session-file-input","igv-app-dropdown-dropbox-session-file-button","igv-app-dropdown-google-drive-session-file-button","igv-app-session-url-modal","igv-app-session-save-modal",gl,function(){var t=ir(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadSession(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(){return e.toJSON()})),ol({browser:e,$saveModal:$("#igv-app-svg-save-modal")}),Js(tl(e,n,r)),bl($("#igv-app-bookmark-button")),mr.globalBus.post({type:"DidChangeGenome",data:{genomeID:e.genome.id}});case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bl(t){t.on("click",(function(t){var e=void 0;try{e=function(){var t,e;return((e=(t=window.location.href.slice()).indexOf("?"))>0?t.substring(0,e):t)+"?sessionURL=blob:"+na.browser.compressedSession()}()}catch(t){pi.present(t.message)}if(e){window.history.pushState({},"IGV",e);var n=/Mac/i.test(navigator.userAgent)?"Cmd":"Ctrl";alert("A bookmark URL has been created. Press "+n+"+D to save.")}}))}function xl(t){return Sl.apply(this,arguments)}function Sl(){return(Sl=ir(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!Array.isArray(e)){t.next=6;break}return t.abrupt("return",e);case 6:return n=void 0,t.prev=7,t.next=10,fetch(e);case 10:return n=t.sent,t.abrupt("return",n.json());case 14:t.prev=14,t.t0=t.catch(7),pi.present(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}t.main=ml,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=app_bundle-1.4.6.min.js.map
